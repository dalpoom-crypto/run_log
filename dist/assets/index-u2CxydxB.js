(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function ME(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var r0={exports:{}},ju={},s0={exports:{}},fe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var va=Symbol.for("react.element"),VE=Symbol.for("react.portal"),UE=Symbol.for("react.fragment"),FE=Symbol.for("react.strict_mode"),BE=Symbol.for("react.profiler"),zE=Symbol.for("react.provider"),$E=Symbol.for("react.context"),HE=Symbol.for("react.forward_ref"),WE=Symbol.for("react.suspense"),qE=Symbol.for("react.memo"),KE=Symbol.for("react.lazy"),Im=Symbol.iterator;function GE(t){return t===null||typeof t!="object"?null:(t=Im&&t[Im]||t["@@iterator"],typeof t=="function"?t:null)}var i0={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},o0=Object.assign,a0={};function Hi(t,e,n){this.props=t,this.context=e,this.refs=a0,this.updater=n||i0}Hi.prototype.isReactComponent={};Hi.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Hi.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function l0(){}l0.prototype=Hi.prototype;function Vd(t,e,n){this.props=t,this.context=e,this.refs=a0,this.updater=n||i0}var Ud=Vd.prototype=new l0;Ud.constructor=Vd;o0(Ud,Hi.prototype);Ud.isPureReactComponent=!0;var Am=Array.isArray,u0=Object.prototype.hasOwnProperty,Fd={current:null},c0={key:!0,ref:!0,__self:!0,__source:!0};function h0(t,e,n){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)u0.call(e,r)&&!c0.hasOwnProperty(r)&&(s[r]=e[r]);var a=arguments.length-2;if(a===1)s.children=n;else if(1<a){for(var u=Array(a),c=0;c<a;c++)u[c]=arguments[c+2];s.children=u}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)s[r]===void 0&&(s[r]=a[r]);return{$$typeof:va,type:t,key:i,ref:o,props:s,_owner:Fd.current}}function QE(t,e){return{$$typeof:va,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Bd(t){return typeof t=="object"&&t!==null&&t.$$typeof===va}function YE(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Sm=/\/+/g;function Lc(t,e){return typeof t=="object"&&t!==null&&t.key!=null?YE(""+t.key):e.toString(36)}function El(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case va:case VE:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+Lc(o,0):r,Am(s)?(n="",t!=null&&(n=t.replace(Sm,"$&/")+"/"),El(s,e,n,"",function(c){return c})):s!=null&&(Bd(s)&&(s=QE(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(Sm,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",Am(t))for(var a=0;a<t.length;a++){i=t[a];var u=r+Lc(i,a);o+=El(i,e,n,u,s)}else if(u=GE(t),typeof u=="function")for(t=u.call(t),a=0;!(i=t.next()).done;)i=i.value,u=r+Lc(i,a++),o+=El(i,e,n,u,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Ya(t,e,n){if(t==null)return t;var r=[],s=0;return El(t,r,"","",function(i){return e.call(n,i,s++)}),r}function XE(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Bt={current:null},xl={transition:null},JE={ReactCurrentDispatcher:Bt,ReactCurrentBatchConfig:xl,ReactCurrentOwner:Fd};function d0(){throw Error("act(...) is not supported in production builds of React.")}fe.Children={map:Ya,forEach:function(t,e,n){Ya(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Ya(t,function(){e++}),e},toArray:function(t){return Ya(t,function(e){return e})||[]},only:function(t){if(!Bd(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};fe.Component=Hi;fe.Fragment=UE;fe.Profiler=BE;fe.PureComponent=Vd;fe.StrictMode=FE;fe.Suspense=WE;fe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=JE;fe.act=d0;fe.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=o0({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=Fd.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(u in e)u0.call(e,u)&&!c0.hasOwnProperty(u)&&(r[u]=e[u]===void 0&&a!==void 0?a[u]:e[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){a=Array(u);for(var c=0;c<u;c++)a[c]=arguments[c+2];r.children=a}return{$$typeof:va,type:t.type,key:s,ref:i,props:r,_owner:o}};fe.createContext=function(t){return t={$$typeof:$E,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:zE,_context:t},t.Consumer=t};fe.createElement=h0;fe.createFactory=function(t){var e=h0.bind(null,t);return e.type=t,e};fe.createRef=function(){return{current:null}};fe.forwardRef=function(t){return{$$typeof:HE,render:t}};fe.isValidElement=Bd;fe.lazy=function(t){return{$$typeof:KE,_payload:{_status:-1,_result:t},_init:XE}};fe.memo=function(t,e){return{$$typeof:qE,type:t,compare:e===void 0?null:e}};fe.startTransition=function(t){var e=xl.transition;xl.transition={};try{t()}finally{xl.transition=e}};fe.unstable_act=d0;fe.useCallback=function(t,e){return Bt.current.useCallback(t,e)};fe.useContext=function(t){return Bt.current.useContext(t)};fe.useDebugValue=function(){};fe.useDeferredValue=function(t){return Bt.current.useDeferredValue(t)};fe.useEffect=function(t,e){return Bt.current.useEffect(t,e)};fe.useId=function(){return Bt.current.useId()};fe.useImperativeHandle=function(t,e,n){return Bt.current.useImperativeHandle(t,e,n)};fe.useInsertionEffect=function(t,e){return Bt.current.useInsertionEffect(t,e)};fe.useLayoutEffect=function(t,e){return Bt.current.useLayoutEffect(t,e)};fe.useMemo=function(t,e){return Bt.current.useMemo(t,e)};fe.useReducer=function(t,e,n){return Bt.current.useReducer(t,e,n)};fe.useRef=function(t){return Bt.current.useRef(t)};fe.useState=function(t){return Bt.current.useState(t)};fe.useSyncExternalStore=function(t,e,n){return Bt.current.useSyncExternalStore(t,e,n)};fe.useTransition=function(){return Bt.current.useTransition()};fe.version="18.3.1";s0.exports=fe;var X=s0.exports;const ZE=ME(X);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var e2=X,t2=Symbol.for("react.element"),n2=Symbol.for("react.fragment"),r2=Object.prototype.hasOwnProperty,s2=e2.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,i2={key:!0,ref:!0,__self:!0,__source:!0};function f0(t,e,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)r2.call(e,r)&&!i2.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:t2,type:t,key:i,ref:o,props:s,_owner:s2.current}}ju.Fragment=n2;ju.jsx=f0;ju.jsxs=f0;r0.exports=ju;var g=r0.exports,wh={},p0={exports:{}},ln={},m0={exports:{}},g0={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(U,V){var H=U.length;U.push(V);e:for(;0<H;){var J=H-1>>>1,K=U[J];if(0<s(K,V))U[J]=V,U[H]=K,H=J;else break e}}function n(U){return U.length===0?null:U[0]}function r(U){if(U.length===0)return null;var V=U[0],H=U.pop();if(H!==V){U[0]=H;e:for(var J=0,K=U.length,Y=K>>>1;J<Y;){var F=2*(J+1)-1,B=U[F],ee=F+1,ae=U[ee];if(0>s(B,H))ee<K&&0>s(ae,B)?(U[J]=ae,U[ee]=H,J=ee):(U[J]=B,U[F]=H,J=F);else if(ee<K&&0>s(ae,H))U[J]=ae,U[ee]=H,J=ee;else break e}}return V}function s(U,V){var H=U.sortIndex-V.sortIndex;return H!==0?H:U.id-V.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var u=[],c=[],h=1,f=null,d=3,v=!1,x=!1,k=!1,P=typeof setTimeout=="function"?setTimeout:null,E=typeof clearTimeout=="function"?clearTimeout:null,I=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function C(U){for(var V=n(c);V!==null;){if(V.callback===null)r(c);else if(V.startTime<=U)r(c),V.sortIndex=V.expirationTime,e(u,V);else break;V=n(c)}}function b(U){if(k=!1,C(U),!x)if(n(u)!==null)x=!0,O(j);else{var V=n(c);V!==null&&L(b,V.startTime-U)}}function j(U,V){x=!1,k&&(k=!1,E(y),y=-1),v=!0;var H=d;try{for(C(V),f=n(u);f!==null&&(!(f.expirationTime>V)||U&&!A());){var J=f.callback;if(typeof J=="function"){f.callback=null,d=f.priorityLevel;var K=J(f.expirationTime<=V);V=t.unstable_now(),typeof K=="function"?f.callback=K:f===n(u)&&r(u),C(V)}else r(u);f=n(u)}if(f!==null)var Y=!0;else{var F=n(c);F!==null&&L(b,F.startTime-V),Y=!1}return Y}finally{f=null,d=H,v=!1}}var D=!1,S=null,y=-1,p=5,w=-1;function A(){return!(t.unstable_now()-w<p)}function R(){if(S!==null){var U=t.unstable_now();w=U;var V=!0;try{V=S(!0,U)}finally{V?T():(D=!1,S=null)}}else D=!1}var T;if(typeof I=="function")T=function(){I(R)};else if(typeof MessageChannel<"u"){var M=new MessageChannel,z=M.port2;M.port1.onmessage=R,T=function(){z.postMessage(null)}}else T=function(){P(R,0)};function O(U){S=U,D||(D=!0,T())}function L(U,V){y=P(function(){U(t.unstable_now())},V)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(U){U.callback=null},t.unstable_continueExecution=function(){x||v||(x=!0,O(j))},t.unstable_forceFrameRate=function(U){0>U||125<U?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):p=0<U?Math.floor(1e3/U):5},t.unstable_getCurrentPriorityLevel=function(){return d},t.unstable_getFirstCallbackNode=function(){return n(u)},t.unstable_next=function(U){switch(d){case 1:case 2:case 3:var V=3;break;default:V=d}var H=d;d=V;try{return U()}finally{d=H}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(U,V){switch(U){case 1:case 2:case 3:case 4:case 5:break;default:U=3}var H=d;d=U;try{return V()}finally{d=H}},t.unstable_scheduleCallback=function(U,V,H){var J=t.unstable_now();switch(typeof H=="object"&&H!==null?(H=H.delay,H=typeof H=="number"&&0<H?J+H:J):H=J,U){case 1:var K=-1;break;case 2:K=250;break;case 5:K=1073741823;break;case 4:K=1e4;break;default:K=5e3}return K=H+K,U={id:h++,callback:V,priorityLevel:U,startTime:H,expirationTime:K,sortIndex:-1},H>J?(U.sortIndex=H,e(c,U),n(u)===null&&U===n(c)&&(k?(E(y),y=-1):k=!0,L(b,H-J))):(U.sortIndex=K,e(u,U),x||v||(x=!0,O(j))),U},t.unstable_shouldYield=A,t.unstable_wrapCallback=function(U){var V=d;return function(){var H=d;d=V;try{return U.apply(this,arguments)}finally{d=H}}}})(g0);m0.exports=g0;var o2=m0.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var a2=X,an=o2;function Q(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var y0=new Set,qo={};function Ws(t,e){Ri(t,e),Ri(t+"Capture",e)}function Ri(t,e){for(qo[t]=e,t=0;t<e.length;t++)y0.add(e[t])}var fr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Eh=Object.prototype.hasOwnProperty,l2=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,km={},Cm={};function u2(t){return Eh.call(Cm,t)?!0:Eh.call(km,t)?!1:l2.test(t)?Cm[t]=!0:(km[t]=!0,!1)}function c2(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function h2(t,e,n,r){if(e===null||typeof e>"u"||c2(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function zt(t,e,n,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var wt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){wt[t]=new zt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];wt[e]=new zt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){wt[t]=new zt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){wt[t]=new zt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){wt[t]=new zt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){wt[t]=new zt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){wt[t]=new zt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){wt[t]=new zt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){wt[t]=new zt(t,5,!1,t.toLowerCase(),null,!1,!1)});var zd=/[\-:]([a-z])/g;function $d(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(zd,$d);wt[e]=new zt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(zd,$d);wt[e]=new zt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(zd,$d);wt[e]=new zt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){wt[t]=new zt(t,1,!1,t.toLowerCase(),null,!1,!1)});wt.xlinkHref=new zt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){wt[t]=new zt(t,1,!1,t.toLowerCase(),null,!0,!0)});function Hd(t,e,n,r){var s=wt.hasOwnProperty(e)?wt[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(h2(e,n,s,r)&&(n=null),r||s===null?u2(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var xr=a2.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Xa=Symbol.for("react.element"),ii=Symbol.for("react.portal"),oi=Symbol.for("react.fragment"),Wd=Symbol.for("react.strict_mode"),xh=Symbol.for("react.profiler"),v0=Symbol.for("react.provider"),_0=Symbol.for("react.context"),qd=Symbol.for("react.forward_ref"),Th=Symbol.for("react.suspense"),Ih=Symbol.for("react.suspense_list"),Kd=Symbol.for("react.memo"),Nr=Symbol.for("react.lazy"),w0=Symbol.for("react.offscreen"),Rm=Symbol.iterator;function co(t){return t===null||typeof t!="object"?null:(t=Rm&&t[Rm]||t["@@iterator"],typeof t=="function"?t:null)}var He=Object.assign,Oc;function Eo(t){if(Oc===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Oc=e&&e[1]||""}return`
`+Oc+t}var jc=!1;function Mc(t,e){if(!t||jc)return"";jc=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){r=c}t.call(e.prototype)}else{try{throw Error()}catch(c){r=c}t()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var s=c.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,a=i.length-1;1<=o&&0<=a&&s[o]!==i[a];)a--;for(;1<=o&&0<=a;o--,a--)if(s[o]!==i[a]){if(o!==1||a!==1)do if(o--,a--,0>a||s[o]!==i[a]){var u=`
`+s[o].replace(" at new "," at ");return t.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",t.displayName)),u}while(1<=o&&0<=a);break}}}finally{jc=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Eo(t):""}function d2(t){switch(t.tag){case 5:return Eo(t.type);case 16:return Eo("Lazy");case 13:return Eo("Suspense");case 19:return Eo("SuspenseList");case 0:case 2:case 15:return t=Mc(t.type,!1),t;case 11:return t=Mc(t.type.render,!1),t;case 1:return t=Mc(t.type,!0),t;default:return""}}function Ah(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case oi:return"Fragment";case ii:return"Portal";case xh:return"Profiler";case Wd:return"StrictMode";case Th:return"Suspense";case Ih:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case _0:return(t.displayName||"Context")+".Consumer";case v0:return(t._context.displayName||"Context")+".Provider";case qd:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Kd:return e=t.displayName||null,e!==null?e:Ah(t.type)||"Memo";case Nr:e=t._payload,t=t._init;try{return Ah(t(e))}catch{}}return null}function f2(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Ah(e);case 8:return e===Wd?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function ts(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function E0(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function p2(t){var e=E0(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Ja(t){t._valueTracker||(t._valueTracker=p2(t))}function x0(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=E0(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function $l(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Sh(t,e){var n=e.checked;return He({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function bm(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=ts(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function T0(t,e){e=e.checked,e!=null&&Hd(t,"checked",e,!1)}function kh(t,e){T0(t,e);var n=ts(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Ch(t,e.type,n):e.hasOwnProperty("defaultValue")&&Ch(t,e.type,ts(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Nm(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Ch(t,e,n){(e!=="number"||$l(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var xo=Array.isArray;function _i(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+ts(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function Rh(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(Q(91));return He({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Pm(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(Q(92));if(xo(n)){if(1<n.length)throw Error(Q(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:ts(n)}}function I0(t,e){var n=ts(e.value),r=ts(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Dm(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function A0(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function bh(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?A0(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Za,S0=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Za=Za||document.createElement("div"),Za.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Za.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Ko(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var No={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},m2=["Webkit","ms","Moz","O"];Object.keys(No).forEach(function(t){m2.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),No[e]=No[t]})});function k0(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||No.hasOwnProperty(t)&&No[t]?(""+e).trim():e+"px"}function C0(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=k0(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var g2=He({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Nh(t,e){if(e){if(g2[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(Q(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(Q(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(Q(61))}if(e.style!=null&&typeof e.style!="object")throw Error(Q(62))}}function Ph(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Dh=null;function Gd(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Lh=null,wi=null,Ei=null;function Lm(t){if(t=Ea(t)){if(typeof Lh!="function")throw Error(Q(280));var e=t.stateNode;e&&(e=Bu(e),Lh(t.stateNode,t.type,e))}}function R0(t){wi?Ei?Ei.push(t):Ei=[t]:wi=t}function b0(){if(wi){var t=wi,e=Ei;if(Ei=wi=null,Lm(t),e)for(t=0;t<e.length;t++)Lm(e[t])}}function N0(t,e){return t(e)}function P0(){}var Vc=!1;function D0(t,e,n){if(Vc)return t(e,n);Vc=!0;try{return N0(t,e,n)}finally{Vc=!1,(wi!==null||Ei!==null)&&(P0(),b0())}}function Go(t,e){var n=t.stateNode;if(n===null)return null;var r=Bu(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(Q(231,e,typeof n));return n}var Oh=!1;if(fr)try{var ho={};Object.defineProperty(ho,"passive",{get:function(){Oh=!0}}),window.addEventListener("test",ho,ho),window.removeEventListener("test",ho,ho)}catch{Oh=!1}function y2(t,e,n,r,s,i,o,a,u){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(h){this.onError(h)}}var Po=!1,Hl=null,Wl=!1,jh=null,v2={onError:function(t){Po=!0,Hl=t}};function _2(t,e,n,r,s,i,o,a,u){Po=!1,Hl=null,y2.apply(v2,arguments)}function w2(t,e,n,r,s,i,o,a,u){if(_2.apply(this,arguments),Po){if(Po){var c=Hl;Po=!1,Hl=null}else throw Error(Q(198));Wl||(Wl=!0,jh=c)}}function qs(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function L0(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Om(t){if(qs(t)!==t)throw Error(Q(188))}function E2(t){var e=t.alternate;if(!e){if(e=qs(t),e===null)throw Error(Q(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return Om(s),t;if(i===r)return Om(s),e;i=i.sibling}throw Error(Q(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o){for(a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o)throw Error(Q(189))}}if(n.alternate!==r)throw Error(Q(190))}if(n.tag!==3)throw Error(Q(188));return n.stateNode.current===n?t:e}function O0(t){return t=E2(t),t!==null?j0(t):null}function j0(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=j0(t);if(e!==null)return e;t=t.sibling}return null}var M0=an.unstable_scheduleCallback,jm=an.unstable_cancelCallback,x2=an.unstable_shouldYield,T2=an.unstable_requestPaint,Je=an.unstable_now,I2=an.unstable_getCurrentPriorityLevel,Qd=an.unstable_ImmediatePriority,V0=an.unstable_UserBlockingPriority,ql=an.unstable_NormalPriority,A2=an.unstable_LowPriority,U0=an.unstable_IdlePriority,Mu=null,Hn=null;function S2(t){if(Hn&&typeof Hn.onCommitFiberRoot=="function")try{Hn.onCommitFiberRoot(Mu,t,void 0,(t.current.flags&128)===128)}catch{}}var Rn=Math.clz32?Math.clz32:R2,k2=Math.log,C2=Math.LN2;function R2(t){return t>>>=0,t===0?32:31-(k2(t)/C2|0)|0}var el=64,tl=4194304;function To(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Kl(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~s;a!==0?r=To(a):(i&=o,i!==0&&(r=To(i)))}else o=n&~s,o!==0?r=To(o):i!==0&&(r=To(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Rn(e),s=1<<n,r|=t[n],e&=~s;return r}function b2(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function N2(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-Rn(i),a=1<<o,u=s[o];u===-1?(!(a&n)||a&r)&&(s[o]=b2(a,e)):u<=e&&(t.expiredLanes|=a),i&=~a}}function Mh(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function F0(){var t=el;return el<<=1,!(el&4194240)&&(el=64),t}function Uc(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function _a(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Rn(e),t[e]=n}function P2(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-Rn(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function Yd(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Rn(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var Se=0;function B0(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var z0,Xd,$0,H0,W0,Vh=!1,nl=[],Hr=null,Wr=null,qr=null,Qo=new Map,Yo=new Map,Dr=[],D2="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Mm(t,e){switch(t){case"focusin":case"focusout":Hr=null;break;case"dragenter":case"dragleave":Wr=null;break;case"mouseover":case"mouseout":qr=null;break;case"pointerover":case"pointerout":Qo.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Yo.delete(e.pointerId)}}function fo(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=Ea(e),e!==null&&Xd(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function L2(t,e,n,r,s){switch(e){case"focusin":return Hr=fo(Hr,t,e,n,r,s),!0;case"dragenter":return Wr=fo(Wr,t,e,n,r,s),!0;case"mouseover":return qr=fo(qr,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return Qo.set(i,fo(Qo.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,Yo.set(i,fo(Yo.get(i)||null,t,e,n,r,s)),!0}return!1}function q0(t){var e=xs(t.target);if(e!==null){var n=qs(e);if(n!==null){if(e=n.tag,e===13){if(e=L0(n),e!==null){t.blockedOn=e,W0(t.priority,function(){$0(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Tl(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Uh(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Dh=r,n.target.dispatchEvent(r),Dh=null}else return e=Ea(n),e!==null&&Xd(e),t.blockedOn=n,!1;e.shift()}return!0}function Vm(t,e,n){Tl(t)&&n.delete(e)}function O2(){Vh=!1,Hr!==null&&Tl(Hr)&&(Hr=null),Wr!==null&&Tl(Wr)&&(Wr=null),qr!==null&&Tl(qr)&&(qr=null),Qo.forEach(Vm),Yo.forEach(Vm)}function po(t,e){t.blockedOn===e&&(t.blockedOn=null,Vh||(Vh=!0,an.unstable_scheduleCallback(an.unstable_NormalPriority,O2)))}function Xo(t){function e(s){return po(s,t)}if(0<nl.length){po(nl[0],t);for(var n=1;n<nl.length;n++){var r=nl[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Hr!==null&&po(Hr,t),Wr!==null&&po(Wr,t),qr!==null&&po(qr,t),Qo.forEach(e),Yo.forEach(e),n=0;n<Dr.length;n++)r=Dr[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Dr.length&&(n=Dr[0],n.blockedOn===null);)q0(n),n.blockedOn===null&&Dr.shift()}var xi=xr.ReactCurrentBatchConfig,Gl=!0;function j2(t,e,n,r){var s=Se,i=xi.transition;xi.transition=null;try{Se=1,Jd(t,e,n,r)}finally{Se=s,xi.transition=i}}function M2(t,e,n,r){var s=Se,i=xi.transition;xi.transition=null;try{Se=4,Jd(t,e,n,r)}finally{Se=s,xi.transition=i}}function Jd(t,e,n,r){if(Gl){var s=Uh(t,e,n,r);if(s===null)Qc(t,e,r,Ql,n),Mm(t,r);else if(L2(s,t,e,n,r))r.stopPropagation();else if(Mm(t,r),e&4&&-1<D2.indexOf(t)){for(;s!==null;){var i=Ea(s);if(i!==null&&z0(i),i=Uh(t,e,n,r),i===null&&Qc(t,e,r,Ql,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else Qc(t,e,r,null,n)}}var Ql=null;function Uh(t,e,n,r){if(Ql=null,t=Gd(r),t=xs(t),t!==null)if(e=qs(t),e===null)t=null;else if(n=e.tag,n===13){if(t=L0(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Ql=t,null}function K0(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(I2()){case Qd:return 1;case V0:return 4;case ql:case A2:return 16;case U0:return 536870912;default:return 16}default:return 16}}var Fr=null,Zd=null,Il=null;function G0(){if(Il)return Il;var t,e=Zd,n=e.length,r,s="value"in Fr?Fr.value:Fr.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[i-r];r++);return Il=s.slice(t,1<r?1-r:void 0)}function Al(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function rl(){return!0}function Um(){return!1}function un(t){function e(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(i):i[a]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?rl:Um,this.isPropagationStopped=Um,this}return He(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=rl)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=rl)},persist:function(){},isPersistent:rl}),e}var Wi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ef=un(Wi),wa=He({},Wi,{view:0,detail:0}),V2=un(wa),Fc,Bc,mo,Vu=He({},wa,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:tf,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==mo&&(mo&&t.type==="mousemove"?(Fc=t.screenX-mo.screenX,Bc=t.screenY-mo.screenY):Bc=Fc=0,mo=t),Fc)},movementY:function(t){return"movementY"in t?t.movementY:Bc}}),Fm=un(Vu),U2=He({},Vu,{dataTransfer:0}),F2=un(U2),B2=He({},wa,{relatedTarget:0}),zc=un(B2),z2=He({},Wi,{animationName:0,elapsedTime:0,pseudoElement:0}),$2=un(z2),H2=He({},Wi,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),W2=un(H2),q2=He({},Wi,{data:0}),Bm=un(q2),K2={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},G2={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Q2={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Y2(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=Q2[t])?!!e[t]:!1}function tf(){return Y2}var X2=He({},wa,{key:function(t){if(t.key){var e=K2[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Al(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?G2[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:tf,charCode:function(t){return t.type==="keypress"?Al(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Al(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),J2=un(X2),Z2=He({},Vu,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),zm=un(Z2),ex=He({},wa,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:tf}),tx=un(ex),nx=He({},Wi,{propertyName:0,elapsedTime:0,pseudoElement:0}),rx=un(nx),sx=He({},Vu,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),ix=un(sx),ox=[9,13,27,32],nf=fr&&"CompositionEvent"in window,Do=null;fr&&"documentMode"in document&&(Do=document.documentMode);var ax=fr&&"TextEvent"in window&&!Do,Q0=fr&&(!nf||Do&&8<Do&&11>=Do),$m=" ",Hm=!1;function Y0(t,e){switch(t){case"keyup":return ox.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function X0(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var ai=!1;function lx(t,e){switch(t){case"compositionend":return X0(e);case"keypress":return e.which!==32?null:(Hm=!0,$m);case"textInput":return t=e.data,t===$m&&Hm?null:t;default:return null}}function ux(t,e){if(ai)return t==="compositionend"||!nf&&Y0(t,e)?(t=G0(),Il=Zd=Fr=null,ai=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Q0&&e.locale!=="ko"?null:e.data;default:return null}}var cx={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Wm(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!cx[t.type]:e==="textarea"}function J0(t,e,n,r){R0(r),e=Yl(e,"onChange"),0<e.length&&(n=new ef("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Lo=null,Jo=null;function hx(t){uv(t,0)}function Uu(t){var e=ci(t);if(x0(e))return t}function dx(t,e){if(t==="change")return e}var Z0=!1;if(fr){var $c;if(fr){var Hc="oninput"in document;if(!Hc){var qm=document.createElement("div");qm.setAttribute("oninput","return;"),Hc=typeof qm.oninput=="function"}$c=Hc}else $c=!1;Z0=$c&&(!document.documentMode||9<document.documentMode)}function Km(){Lo&&(Lo.detachEvent("onpropertychange",ev),Jo=Lo=null)}function ev(t){if(t.propertyName==="value"&&Uu(Jo)){var e=[];J0(e,Jo,t,Gd(t)),D0(hx,e)}}function fx(t,e,n){t==="focusin"?(Km(),Lo=e,Jo=n,Lo.attachEvent("onpropertychange",ev)):t==="focusout"&&Km()}function px(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Uu(Jo)}function mx(t,e){if(t==="click")return Uu(e)}function gx(t,e){if(t==="input"||t==="change")return Uu(e)}function yx(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Nn=typeof Object.is=="function"?Object.is:yx;function Zo(t,e){if(Nn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!Eh.call(e,s)||!Nn(t[s],e[s]))return!1}return!0}function Gm(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Qm(t,e){var n=Gm(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Gm(n)}}function tv(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?tv(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function nv(){for(var t=window,e=$l();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=$l(t.document)}return e}function rf(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function vx(t){var e=nv(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&tv(n.ownerDocument.documentElement,n)){if(r!==null&&rf(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=Qm(n,i);var o=Qm(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var _x=fr&&"documentMode"in document&&11>=document.documentMode,li=null,Fh=null,Oo=null,Bh=!1;function Ym(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Bh||li==null||li!==$l(r)||(r=li,"selectionStart"in r&&rf(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Oo&&Zo(Oo,r)||(Oo=r,r=Yl(Fh,"onSelect"),0<r.length&&(e=new ef("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=li)))}function sl(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var ui={animationend:sl("Animation","AnimationEnd"),animationiteration:sl("Animation","AnimationIteration"),animationstart:sl("Animation","AnimationStart"),transitionend:sl("Transition","TransitionEnd")},Wc={},rv={};fr&&(rv=document.createElement("div").style,"AnimationEvent"in window||(delete ui.animationend.animation,delete ui.animationiteration.animation,delete ui.animationstart.animation),"TransitionEvent"in window||delete ui.transitionend.transition);function Fu(t){if(Wc[t])return Wc[t];if(!ui[t])return t;var e=ui[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in rv)return Wc[t]=e[n];return t}var sv=Fu("animationend"),iv=Fu("animationiteration"),ov=Fu("animationstart"),av=Fu("transitionend"),lv=new Map,Xm="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function as(t,e){lv.set(t,e),Ws(e,[t])}for(var qc=0;qc<Xm.length;qc++){var Kc=Xm[qc],wx=Kc.toLowerCase(),Ex=Kc[0].toUpperCase()+Kc.slice(1);as(wx,"on"+Ex)}as(sv,"onAnimationEnd");as(iv,"onAnimationIteration");as(ov,"onAnimationStart");as("dblclick","onDoubleClick");as("focusin","onFocus");as("focusout","onBlur");as(av,"onTransitionEnd");Ri("onMouseEnter",["mouseout","mouseover"]);Ri("onMouseLeave",["mouseout","mouseover"]);Ri("onPointerEnter",["pointerout","pointerover"]);Ri("onPointerLeave",["pointerout","pointerover"]);Ws("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Ws("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Ws("onBeforeInput",["compositionend","keypress","textInput","paste"]);Ws("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Ws("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Ws("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Io="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),xx=new Set("cancel close invalid load scroll toggle".split(" ").concat(Io));function Jm(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,w2(r,e,void 0,t),t.currentTarget=null}function uv(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],u=a.instance,c=a.currentTarget;if(a=a.listener,u!==i&&s.isPropagationStopped())break e;Jm(s,a,c),i=u}else for(o=0;o<r.length;o++){if(a=r[o],u=a.instance,c=a.currentTarget,a=a.listener,u!==i&&s.isPropagationStopped())break e;Jm(s,a,c),i=u}}}if(Wl)throw t=jh,Wl=!1,jh=null,t}function De(t,e){var n=e[qh];n===void 0&&(n=e[qh]=new Set);var r=t+"__bubble";n.has(r)||(cv(e,t,2,!1),n.add(r))}function Gc(t,e,n){var r=0;e&&(r|=4),cv(n,t,r,e)}var il="_reactListening"+Math.random().toString(36).slice(2);function ea(t){if(!t[il]){t[il]=!0,y0.forEach(function(n){n!=="selectionchange"&&(xx.has(n)||Gc(n,!1,t),Gc(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[il]||(e[il]=!0,Gc("selectionchange",!1,e))}}function cv(t,e,n,r){switch(K0(e)){case 1:var s=j2;break;case 4:s=M2;break;default:s=Jd}n=s.bind(null,e,n,t),s=void 0,!Oh||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function Qc(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===s||a.nodeType===8&&a.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var u=o.tag;if((u===3||u===4)&&(u=o.stateNode.containerInfo,u===s||u.nodeType===8&&u.parentNode===s))return;o=o.return}for(;a!==null;){if(o=xs(a),o===null)return;if(u=o.tag,u===5||u===6){r=i=o;continue e}a=a.parentNode}}r=r.return}D0(function(){var c=i,h=Gd(n),f=[];e:{var d=lv.get(t);if(d!==void 0){var v=ef,x=t;switch(t){case"keypress":if(Al(n)===0)break e;case"keydown":case"keyup":v=J2;break;case"focusin":x="focus",v=zc;break;case"focusout":x="blur",v=zc;break;case"beforeblur":case"afterblur":v=zc;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":v=Fm;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":v=F2;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":v=tx;break;case sv:case iv:case ov:v=$2;break;case av:v=rx;break;case"scroll":v=V2;break;case"wheel":v=ix;break;case"copy":case"cut":case"paste":v=W2;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":v=zm}var k=(e&4)!==0,P=!k&&t==="scroll",E=k?d!==null?d+"Capture":null:d;k=[];for(var I=c,C;I!==null;){C=I;var b=C.stateNode;if(C.tag===5&&b!==null&&(C=b,E!==null&&(b=Go(I,E),b!=null&&k.push(ta(I,b,C)))),P)break;I=I.return}0<k.length&&(d=new v(d,x,null,n,h),f.push({event:d,listeners:k}))}}if(!(e&7)){e:{if(d=t==="mouseover"||t==="pointerover",v=t==="mouseout"||t==="pointerout",d&&n!==Dh&&(x=n.relatedTarget||n.fromElement)&&(xs(x)||x[pr]))break e;if((v||d)&&(d=h.window===h?h:(d=h.ownerDocument)?d.defaultView||d.parentWindow:window,v?(x=n.relatedTarget||n.toElement,v=c,x=x?xs(x):null,x!==null&&(P=qs(x),x!==P||x.tag!==5&&x.tag!==6)&&(x=null)):(v=null,x=c),v!==x)){if(k=Fm,b="onMouseLeave",E="onMouseEnter",I="mouse",(t==="pointerout"||t==="pointerover")&&(k=zm,b="onPointerLeave",E="onPointerEnter",I="pointer"),P=v==null?d:ci(v),C=x==null?d:ci(x),d=new k(b,I+"leave",v,n,h),d.target=P,d.relatedTarget=C,b=null,xs(h)===c&&(k=new k(E,I+"enter",x,n,h),k.target=C,k.relatedTarget=P,b=k),P=b,v&&x)t:{for(k=v,E=x,I=0,C=k;C;C=ti(C))I++;for(C=0,b=E;b;b=ti(b))C++;for(;0<I-C;)k=ti(k),I--;for(;0<C-I;)E=ti(E),C--;for(;I--;){if(k===E||E!==null&&k===E.alternate)break t;k=ti(k),E=ti(E)}k=null}else k=null;v!==null&&Zm(f,d,v,k,!1),x!==null&&P!==null&&Zm(f,P,x,k,!0)}}e:{if(d=c?ci(c):window,v=d.nodeName&&d.nodeName.toLowerCase(),v==="select"||v==="input"&&d.type==="file")var j=dx;else if(Wm(d))if(Z0)j=gx;else{j=px;var D=fx}else(v=d.nodeName)&&v.toLowerCase()==="input"&&(d.type==="checkbox"||d.type==="radio")&&(j=mx);if(j&&(j=j(t,c))){J0(f,j,n,h);break e}D&&D(t,d,c),t==="focusout"&&(D=d._wrapperState)&&D.controlled&&d.type==="number"&&Ch(d,"number",d.value)}switch(D=c?ci(c):window,t){case"focusin":(Wm(D)||D.contentEditable==="true")&&(li=D,Fh=c,Oo=null);break;case"focusout":Oo=Fh=li=null;break;case"mousedown":Bh=!0;break;case"contextmenu":case"mouseup":case"dragend":Bh=!1,Ym(f,n,h);break;case"selectionchange":if(_x)break;case"keydown":case"keyup":Ym(f,n,h)}var S;if(nf)e:{switch(t){case"compositionstart":var y="onCompositionStart";break e;case"compositionend":y="onCompositionEnd";break e;case"compositionupdate":y="onCompositionUpdate";break e}y=void 0}else ai?Y0(t,n)&&(y="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(y="onCompositionStart");y&&(Q0&&n.locale!=="ko"&&(ai||y!=="onCompositionStart"?y==="onCompositionEnd"&&ai&&(S=G0()):(Fr=h,Zd="value"in Fr?Fr.value:Fr.textContent,ai=!0)),D=Yl(c,y),0<D.length&&(y=new Bm(y,t,null,n,h),f.push({event:y,listeners:D}),S?y.data=S:(S=X0(n),S!==null&&(y.data=S)))),(S=ax?lx(t,n):ux(t,n))&&(c=Yl(c,"onBeforeInput"),0<c.length&&(h=new Bm("onBeforeInput","beforeinput",null,n,h),f.push({event:h,listeners:c}),h.data=S))}uv(f,e)})}function ta(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Yl(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=Go(t,n),i!=null&&r.unshift(ta(t,i,s)),i=Go(t,e),i!=null&&r.push(ta(t,i,s))),t=t.return}return r}function ti(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Zm(t,e,n,r,s){for(var i=e._reactName,o=[];n!==null&&n!==r;){var a=n,u=a.alternate,c=a.stateNode;if(u!==null&&u===r)break;a.tag===5&&c!==null&&(a=c,s?(u=Go(n,i),u!=null&&o.unshift(ta(n,u,a))):s||(u=Go(n,i),u!=null&&o.push(ta(n,u,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var Tx=/\r\n?/g,Ix=/\u0000|\uFFFD/g;function eg(t){return(typeof t=="string"?t:""+t).replace(Tx,`
`).replace(Ix,"")}function ol(t,e,n){if(e=eg(e),eg(t)!==e&&n)throw Error(Q(425))}function Xl(){}var zh=null,$h=null;function Hh(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Wh=typeof setTimeout=="function"?setTimeout:void 0,Ax=typeof clearTimeout=="function"?clearTimeout:void 0,tg=typeof Promise=="function"?Promise:void 0,Sx=typeof queueMicrotask=="function"?queueMicrotask:typeof tg<"u"?function(t){return tg.resolve(null).then(t).catch(kx)}:Wh;function kx(t){setTimeout(function(){throw t})}function Yc(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),Xo(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);Xo(e)}function Kr(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function ng(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var qi=Math.random().toString(36).slice(2),Bn="__reactFiber$"+qi,na="__reactProps$"+qi,pr="__reactContainer$"+qi,qh="__reactEvents$"+qi,Cx="__reactListeners$"+qi,Rx="__reactHandles$"+qi;function xs(t){var e=t[Bn];if(e)return e;for(var n=t.parentNode;n;){if(e=n[pr]||n[Bn]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=ng(t);t!==null;){if(n=t[Bn])return n;t=ng(t)}return e}t=n,n=t.parentNode}return null}function Ea(t){return t=t[Bn]||t[pr],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function ci(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(Q(33))}function Bu(t){return t[na]||null}var Kh=[],hi=-1;function ls(t){return{current:t}}function Oe(t){0>hi||(t.current=Kh[hi],Kh[hi]=null,hi--)}function be(t,e){hi++,Kh[hi]=t.current,t.current=e}var ns={},Dt=ls(ns),Gt=ls(!1),Ns=ns;function bi(t,e){var n=t.type.contextTypes;if(!n)return ns;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function Qt(t){return t=t.childContextTypes,t!=null}function Jl(){Oe(Gt),Oe(Dt)}function rg(t,e,n){if(Dt.current!==ns)throw Error(Q(168));be(Dt,e),be(Gt,n)}function hv(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(Q(108,f2(t)||"Unknown",s));return He({},n,r)}function Zl(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||ns,Ns=Dt.current,be(Dt,t),be(Gt,Gt.current),!0}function sg(t,e,n){var r=t.stateNode;if(!r)throw Error(Q(169));n?(t=hv(t,e,Ns),r.__reactInternalMemoizedMergedChildContext=t,Oe(Gt),Oe(Dt),be(Dt,t)):Oe(Gt),be(Gt,n)}var rr=null,zu=!1,Xc=!1;function dv(t){rr===null?rr=[t]:rr.push(t)}function bx(t){zu=!0,dv(t)}function us(){if(!Xc&&rr!==null){Xc=!0;var t=0,e=Se;try{var n=rr;for(Se=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}rr=null,zu=!1}catch(s){throw rr!==null&&(rr=rr.slice(t+1)),M0(Qd,us),s}finally{Se=e,Xc=!1}}return null}var di=[],fi=0,eu=null,tu=0,fn=[],pn=0,Ps=null,sr=1,ir="";function _s(t,e){di[fi++]=tu,di[fi++]=eu,eu=t,tu=e}function fv(t,e,n){fn[pn++]=sr,fn[pn++]=ir,fn[pn++]=Ps,Ps=t;var r=sr;t=ir;var s=32-Rn(r)-1;r&=~(1<<s),n+=1;var i=32-Rn(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,sr=1<<32-Rn(e)+s|n<<s|r,ir=i+t}else sr=1<<i|n<<s|r,ir=t}function sf(t){t.return!==null&&(_s(t,1),fv(t,1,0))}function of(t){for(;t===eu;)eu=di[--fi],di[fi]=null,tu=di[--fi],di[fi]=null;for(;t===Ps;)Ps=fn[--pn],fn[pn]=null,ir=fn[--pn],fn[pn]=null,sr=fn[--pn],fn[pn]=null}var on=null,nn=null,Ue=!1,Sn=null;function pv(t,e){var n=mn(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function ig(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,on=t,nn=Kr(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,on=t,nn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Ps!==null?{id:sr,overflow:ir}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=mn(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,on=t,nn=null,!0):!1;default:return!1}}function Gh(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Qh(t){if(Ue){var e=nn;if(e){var n=e;if(!ig(t,e)){if(Gh(t))throw Error(Q(418));e=Kr(n.nextSibling);var r=on;e&&ig(t,e)?pv(r,n):(t.flags=t.flags&-4097|2,Ue=!1,on=t)}}else{if(Gh(t))throw Error(Q(418));t.flags=t.flags&-4097|2,Ue=!1,on=t}}}function og(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;on=t}function al(t){if(t!==on)return!1;if(!Ue)return og(t),Ue=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Hh(t.type,t.memoizedProps)),e&&(e=nn)){if(Gh(t))throw mv(),Error(Q(418));for(;e;)pv(t,e),e=Kr(e.nextSibling)}if(og(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(Q(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){nn=Kr(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}nn=null}}else nn=on?Kr(t.stateNode.nextSibling):null;return!0}function mv(){for(var t=nn;t;)t=Kr(t.nextSibling)}function Ni(){nn=on=null,Ue=!1}function af(t){Sn===null?Sn=[t]:Sn.push(t)}var Nx=xr.ReactCurrentBatchConfig;function go(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(Q(309));var r=n.stateNode}if(!r)throw Error(Q(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var a=s.refs;o===null?delete a[i]:a[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(Q(284));if(!n._owner)throw Error(Q(290,t))}return t}function ll(t,e){throw t=Object.prototype.toString.call(e),Error(Q(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function ag(t){var e=t._init;return e(t._payload)}function gv(t){function e(E,I){if(t){var C=E.deletions;C===null?(E.deletions=[I],E.flags|=16):C.push(I)}}function n(E,I){if(!t)return null;for(;I!==null;)e(E,I),I=I.sibling;return null}function r(E,I){for(E=new Map;I!==null;)I.key!==null?E.set(I.key,I):E.set(I.index,I),I=I.sibling;return E}function s(E,I){return E=Xr(E,I),E.index=0,E.sibling=null,E}function i(E,I,C){return E.index=C,t?(C=E.alternate,C!==null?(C=C.index,C<I?(E.flags|=2,I):C):(E.flags|=2,I)):(E.flags|=1048576,I)}function o(E){return t&&E.alternate===null&&(E.flags|=2),E}function a(E,I,C,b){return I===null||I.tag!==6?(I=sh(C,E.mode,b),I.return=E,I):(I=s(I,C),I.return=E,I)}function u(E,I,C,b){var j=C.type;return j===oi?h(E,I,C.props.children,b,C.key):I!==null&&(I.elementType===j||typeof j=="object"&&j!==null&&j.$$typeof===Nr&&ag(j)===I.type)?(b=s(I,C.props),b.ref=go(E,I,C),b.return=E,b):(b=Pl(C.type,C.key,C.props,null,E.mode,b),b.ref=go(E,I,C),b.return=E,b)}function c(E,I,C,b){return I===null||I.tag!==4||I.stateNode.containerInfo!==C.containerInfo||I.stateNode.implementation!==C.implementation?(I=ih(C,E.mode,b),I.return=E,I):(I=s(I,C.children||[]),I.return=E,I)}function h(E,I,C,b,j){return I===null||I.tag!==7?(I=Cs(C,E.mode,b,j),I.return=E,I):(I=s(I,C),I.return=E,I)}function f(E,I,C){if(typeof I=="string"&&I!==""||typeof I=="number")return I=sh(""+I,E.mode,C),I.return=E,I;if(typeof I=="object"&&I!==null){switch(I.$$typeof){case Xa:return C=Pl(I.type,I.key,I.props,null,E.mode,C),C.ref=go(E,null,I),C.return=E,C;case ii:return I=ih(I,E.mode,C),I.return=E,I;case Nr:var b=I._init;return f(E,b(I._payload),C)}if(xo(I)||co(I))return I=Cs(I,E.mode,C,null),I.return=E,I;ll(E,I)}return null}function d(E,I,C,b){var j=I!==null?I.key:null;if(typeof C=="string"&&C!==""||typeof C=="number")return j!==null?null:a(E,I,""+C,b);if(typeof C=="object"&&C!==null){switch(C.$$typeof){case Xa:return C.key===j?u(E,I,C,b):null;case ii:return C.key===j?c(E,I,C,b):null;case Nr:return j=C._init,d(E,I,j(C._payload),b)}if(xo(C)||co(C))return j!==null?null:h(E,I,C,b,null);ll(E,C)}return null}function v(E,I,C,b,j){if(typeof b=="string"&&b!==""||typeof b=="number")return E=E.get(C)||null,a(I,E,""+b,j);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case Xa:return E=E.get(b.key===null?C:b.key)||null,u(I,E,b,j);case ii:return E=E.get(b.key===null?C:b.key)||null,c(I,E,b,j);case Nr:var D=b._init;return v(E,I,C,D(b._payload),j)}if(xo(b)||co(b))return E=E.get(C)||null,h(I,E,b,j,null);ll(I,b)}return null}function x(E,I,C,b){for(var j=null,D=null,S=I,y=I=0,p=null;S!==null&&y<C.length;y++){S.index>y?(p=S,S=null):p=S.sibling;var w=d(E,S,C[y],b);if(w===null){S===null&&(S=p);break}t&&S&&w.alternate===null&&e(E,S),I=i(w,I,y),D===null?j=w:D.sibling=w,D=w,S=p}if(y===C.length)return n(E,S),Ue&&_s(E,y),j;if(S===null){for(;y<C.length;y++)S=f(E,C[y],b),S!==null&&(I=i(S,I,y),D===null?j=S:D.sibling=S,D=S);return Ue&&_s(E,y),j}for(S=r(E,S);y<C.length;y++)p=v(S,E,y,C[y],b),p!==null&&(t&&p.alternate!==null&&S.delete(p.key===null?y:p.key),I=i(p,I,y),D===null?j=p:D.sibling=p,D=p);return t&&S.forEach(function(A){return e(E,A)}),Ue&&_s(E,y),j}function k(E,I,C,b){var j=co(C);if(typeof j!="function")throw Error(Q(150));if(C=j.call(C),C==null)throw Error(Q(151));for(var D=j=null,S=I,y=I=0,p=null,w=C.next();S!==null&&!w.done;y++,w=C.next()){S.index>y?(p=S,S=null):p=S.sibling;var A=d(E,S,w.value,b);if(A===null){S===null&&(S=p);break}t&&S&&A.alternate===null&&e(E,S),I=i(A,I,y),D===null?j=A:D.sibling=A,D=A,S=p}if(w.done)return n(E,S),Ue&&_s(E,y),j;if(S===null){for(;!w.done;y++,w=C.next())w=f(E,w.value,b),w!==null&&(I=i(w,I,y),D===null?j=w:D.sibling=w,D=w);return Ue&&_s(E,y),j}for(S=r(E,S);!w.done;y++,w=C.next())w=v(S,E,y,w.value,b),w!==null&&(t&&w.alternate!==null&&S.delete(w.key===null?y:w.key),I=i(w,I,y),D===null?j=w:D.sibling=w,D=w);return t&&S.forEach(function(R){return e(E,R)}),Ue&&_s(E,y),j}function P(E,I,C,b){if(typeof C=="object"&&C!==null&&C.type===oi&&C.key===null&&(C=C.props.children),typeof C=="object"&&C!==null){switch(C.$$typeof){case Xa:e:{for(var j=C.key,D=I;D!==null;){if(D.key===j){if(j=C.type,j===oi){if(D.tag===7){n(E,D.sibling),I=s(D,C.props.children),I.return=E,E=I;break e}}else if(D.elementType===j||typeof j=="object"&&j!==null&&j.$$typeof===Nr&&ag(j)===D.type){n(E,D.sibling),I=s(D,C.props),I.ref=go(E,D,C),I.return=E,E=I;break e}n(E,D);break}else e(E,D);D=D.sibling}C.type===oi?(I=Cs(C.props.children,E.mode,b,C.key),I.return=E,E=I):(b=Pl(C.type,C.key,C.props,null,E.mode,b),b.ref=go(E,I,C),b.return=E,E=b)}return o(E);case ii:e:{for(D=C.key;I!==null;){if(I.key===D)if(I.tag===4&&I.stateNode.containerInfo===C.containerInfo&&I.stateNode.implementation===C.implementation){n(E,I.sibling),I=s(I,C.children||[]),I.return=E,E=I;break e}else{n(E,I);break}else e(E,I);I=I.sibling}I=ih(C,E.mode,b),I.return=E,E=I}return o(E);case Nr:return D=C._init,P(E,I,D(C._payload),b)}if(xo(C))return x(E,I,C,b);if(co(C))return k(E,I,C,b);ll(E,C)}return typeof C=="string"&&C!==""||typeof C=="number"?(C=""+C,I!==null&&I.tag===6?(n(E,I.sibling),I=s(I,C),I.return=E,E=I):(n(E,I),I=sh(C,E.mode,b),I.return=E,E=I),o(E)):n(E,I)}return P}var Pi=gv(!0),yv=gv(!1),nu=ls(null),ru=null,pi=null,lf=null;function uf(){lf=pi=ru=null}function cf(t){var e=nu.current;Oe(nu),t._currentValue=e}function Yh(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Ti(t,e){ru=t,lf=pi=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Kt=!0),t.firstContext=null)}function vn(t){var e=t._currentValue;if(lf!==t)if(t={context:t,memoizedValue:e,next:null},pi===null){if(ru===null)throw Error(Q(308));pi=t,ru.dependencies={lanes:0,firstContext:t}}else pi=pi.next=t;return e}var Ts=null;function hf(t){Ts===null?Ts=[t]:Ts.push(t)}function vv(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,hf(e)):(n.next=s.next,s.next=n),e.interleaved=n,mr(t,r)}function mr(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Pr=!1;function df(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function _v(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function cr(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Gr(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,_e&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,mr(t,n)}return s=r.interleaved,s===null?(e.next=e,hf(r)):(e.next=s.next,s.next=e),r.interleaved=e,mr(t,n)}function Sl(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Yd(t,n)}}function lg(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function su(t,e,n,r){var s=t.updateQueue;Pr=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,a=s.shared.pending;if(a!==null){s.shared.pending=null;var u=a,c=u.next;u.next=null,o===null?i=c:o.next=c,o=u;var h=t.alternate;h!==null&&(h=h.updateQueue,a=h.lastBaseUpdate,a!==o&&(a===null?h.firstBaseUpdate=c:a.next=c,h.lastBaseUpdate=u))}if(i!==null){var f=s.baseState;o=0,h=c=u=null,a=i;do{var d=a.lane,v=a.eventTime;if((r&d)===d){h!==null&&(h=h.next={eventTime:v,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var x=t,k=a;switch(d=e,v=n,k.tag){case 1:if(x=k.payload,typeof x=="function"){f=x.call(v,f,d);break e}f=x;break e;case 3:x.flags=x.flags&-65537|128;case 0:if(x=k.payload,d=typeof x=="function"?x.call(v,f,d):x,d==null)break e;f=He({},f,d);break e;case 2:Pr=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,d=s.effects,d===null?s.effects=[a]:d.push(a))}else v={eventTime:v,lane:d,tag:a.tag,payload:a.payload,callback:a.callback,next:null},h===null?(c=h=v,u=f):h=h.next=v,o|=d;if(a=a.next,a===null){if(a=s.shared.pending,a===null)break;d=a,a=d.next,d.next=null,s.lastBaseUpdate=d,s.shared.pending=null}}while(!0);if(h===null&&(u=f),s.baseState=u,s.firstBaseUpdate=c,s.lastBaseUpdate=h,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);Ls|=o,t.lanes=o,t.memoizedState=f}}function ug(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(Q(191,s));s.call(r)}}}var xa={},Wn=ls(xa),ra=ls(xa),sa=ls(xa);function Is(t){if(t===xa)throw Error(Q(174));return t}function ff(t,e){switch(be(sa,e),be(ra,t),be(Wn,xa),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:bh(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=bh(e,t)}Oe(Wn),be(Wn,e)}function Di(){Oe(Wn),Oe(ra),Oe(sa)}function wv(t){Is(sa.current);var e=Is(Wn.current),n=bh(e,t.type);e!==n&&(be(ra,t),be(Wn,n))}function pf(t){ra.current===t&&(Oe(Wn),Oe(ra))}var ze=ls(0);function iu(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Jc=[];function mf(){for(var t=0;t<Jc.length;t++)Jc[t]._workInProgressVersionPrimary=null;Jc.length=0}var kl=xr.ReactCurrentDispatcher,Zc=xr.ReactCurrentBatchConfig,Ds=0,$e=null,ot=null,dt=null,ou=!1,jo=!1,ia=0,Px=0;function St(){throw Error(Q(321))}function gf(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Nn(t[n],e[n]))return!1;return!0}function yf(t,e,n,r,s,i){if(Ds=i,$e=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,kl.current=t===null||t.memoizedState===null?jx:Mx,t=n(r,s),jo){i=0;do{if(jo=!1,ia=0,25<=i)throw Error(Q(301));i+=1,dt=ot=null,e.updateQueue=null,kl.current=Vx,t=n(r,s)}while(jo)}if(kl.current=au,e=ot!==null&&ot.next!==null,Ds=0,dt=ot=$e=null,ou=!1,e)throw Error(Q(300));return t}function vf(){var t=ia!==0;return ia=0,t}function Un(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return dt===null?$e.memoizedState=dt=t:dt=dt.next=t,dt}function _n(){if(ot===null){var t=$e.alternate;t=t!==null?t.memoizedState:null}else t=ot.next;var e=dt===null?$e.memoizedState:dt.next;if(e!==null)dt=e,ot=t;else{if(t===null)throw Error(Q(310));ot=t,t={memoizedState:ot.memoizedState,baseState:ot.baseState,baseQueue:ot.baseQueue,queue:ot.queue,next:null},dt===null?$e.memoizedState=dt=t:dt=dt.next=t}return dt}function oa(t,e){return typeof e=="function"?e(t):e}function eh(t){var e=_n(),n=e.queue;if(n===null)throw Error(Q(311));n.lastRenderedReducer=t;var r=ot,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var a=o=null,u=null,c=i;do{var h=c.lane;if((Ds&h)===h)u!==null&&(u=u.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:t(r,c.action);else{var f={lane:h,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};u===null?(a=u=f,o=r):u=u.next=f,$e.lanes|=h,Ls|=h}c=c.next}while(c!==null&&c!==i);u===null?o=r:u.next=a,Nn(r,e.memoizedState)||(Kt=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=u,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,$e.lanes|=i,Ls|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function th(t){var e=_n(),n=e.queue;if(n===null)throw Error(Q(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);Nn(i,e.memoizedState)||(Kt=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function Ev(){}function xv(t,e){var n=$e,r=_n(),s=e(),i=!Nn(r.memoizedState,s);if(i&&(r.memoizedState=s,Kt=!0),r=r.queue,_f(Av.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||dt!==null&&dt.memoizedState.tag&1){if(n.flags|=2048,aa(9,Iv.bind(null,n,r,s,e),void 0,null),ft===null)throw Error(Q(349));Ds&30||Tv(n,e,s)}return s}function Tv(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=$e.updateQueue,e===null?(e={lastEffect:null,stores:null},$e.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function Iv(t,e,n,r){e.value=n,e.getSnapshot=r,Sv(e)&&kv(t)}function Av(t,e,n){return n(function(){Sv(e)&&kv(t)})}function Sv(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Nn(t,n)}catch{return!0}}function kv(t){var e=mr(t,1);e!==null&&bn(e,t,1,-1)}function cg(t){var e=Un();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:oa,lastRenderedState:t},e.queue=t,t=t.dispatch=Ox.bind(null,$e,t),[e.memoizedState,t]}function aa(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=$e.updateQueue,e===null?(e={lastEffect:null,stores:null},$e.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function Cv(){return _n().memoizedState}function Cl(t,e,n,r){var s=Un();$e.flags|=t,s.memoizedState=aa(1|e,n,void 0,r===void 0?null:r)}function $u(t,e,n,r){var s=_n();r=r===void 0?null:r;var i=void 0;if(ot!==null){var o=ot.memoizedState;if(i=o.destroy,r!==null&&gf(r,o.deps)){s.memoizedState=aa(e,n,i,r);return}}$e.flags|=t,s.memoizedState=aa(1|e,n,i,r)}function hg(t,e){return Cl(8390656,8,t,e)}function _f(t,e){return $u(2048,8,t,e)}function Rv(t,e){return $u(4,2,t,e)}function bv(t,e){return $u(4,4,t,e)}function Nv(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Pv(t,e,n){return n=n!=null?n.concat([t]):null,$u(4,4,Nv.bind(null,e,t),n)}function wf(){}function Dv(t,e){var n=_n();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&gf(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function Lv(t,e){var n=_n();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&gf(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function Ov(t,e,n){return Ds&21?(Nn(n,e)||(n=F0(),$e.lanes|=n,Ls|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Kt=!0),t.memoizedState=n)}function Dx(t,e){var n=Se;Se=n!==0&&4>n?n:4,t(!0);var r=Zc.transition;Zc.transition={};try{t(!1),e()}finally{Se=n,Zc.transition=r}}function jv(){return _n().memoizedState}function Lx(t,e,n){var r=Yr(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Mv(t))Vv(e,n);else if(n=vv(t,e,n,r),n!==null){var s=Ut();bn(n,t,r,s),Uv(n,e,r)}}function Ox(t,e,n){var r=Yr(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Mv(t))Vv(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,a=i(o,n);if(s.hasEagerState=!0,s.eagerState=a,Nn(a,o)){var u=e.interleaved;u===null?(s.next=s,hf(e)):(s.next=u.next,u.next=s),e.interleaved=s;return}}catch{}finally{}n=vv(t,e,s,r),n!==null&&(s=Ut(),bn(n,t,r,s),Uv(n,e,r))}}function Mv(t){var e=t.alternate;return t===$e||e!==null&&e===$e}function Vv(t,e){jo=ou=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function Uv(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Yd(t,n)}}var au={readContext:vn,useCallback:St,useContext:St,useEffect:St,useImperativeHandle:St,useInsertionEffect:St,useLayoutEffect:St,useMemo:St,useReducer:St,useRef:St,useState:St,useDebugValue:St,useDeferredValue:St,useTransition:St,useMutableSource:St,useSyncExternalStore:St,useId:St,unstable_isNewReconciler:!1},jx={readContext:vn,useCallback:function(t,e){return Un().memoizedState=[t,e===void 0?null:e],t},useContext:vn,useEffect:hg,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Cl(4194308,4,Nv.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Cl(4194308,4,t,e)},useInsertionEffect:function(t,e){return Cl(4,2,t,e)},useMemo:function(t,e){var n=Un();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Un();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=Lx.bind(null,$e,t),[r.memoizedState,t]},useRef:function(t){var e=Un();return t={current:t},e.memoizedState=t},useState:cg,useDebugValue:wf,useDeferredValue:function(t){return Un().memoizedState=t},useTransition:function(){var t=cg(!1),e=t[0];return t=Dx.bind(null,t[1]),Un().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=$e,s=Un();if(Ue){if(n===void 0)throw Error(Q(407));n=n()}else{if(n=e(),ft===null)throw Error(Q(349));Ds&30||Tv(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,hg(Av.bind(null,r,i,t),[t]),r.flags|=2048,aa(9,Iv.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=Un(),e=ft.identifierPrefix;if(Ue){var n=ir,r=sr;n=(r&~(1<<32-Rn(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=ia++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=Px++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},Mx={readContext:vn,useCallback:Dv,useContext:vn,useEffect:_f,useImperativeHandle:Pv,useInsertionEffect:Rv,useLayoutEffect:bv,useMemo:Lv,useReducer:eh,useRef:Cv,useState:function(){return eh(oa)},useDebugValue:wf,useDeferredValue:function(t){var e=_n();return Ov(e,ot.memoizedState,t)},useTransition:function(){var t=eh(oa)[0],e=_n().memoizedState;return[t,e]},useMutableSource:Ev,useSyncExternalStore:xv,useId:jv,unstable_isNewReconciler:!1},Vx={readContext:vn,useCallback:Dv,useContext:vn,useEffect:_f,useImperativeHandle:Pv,useInsertionEffect:Rv,useLayoutEffect:bv,useMemo:Lv,useReducer:th,useRef:Cv,useState:function(){return th(oa)},useDebugValue:wf,useDeferredValue:function(t){var e=_n();return ot===null?e.memoizedState=t:Ov(e,ot.memoizedState,t)},useTransition:function(){var t=th(oa)[0],e=_n().memoizedState;return[t,e]},useMutableSource:Ev,useSyncExternalStore:xv,useId:jv,unstable_isNewReconciler:!1};function In(t,e){if(t&&t.defaultProps){e=He({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Xh(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:He({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Hu={isMounted:function(t){return(t=t._reactInternals)?qs(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Ut(),s=Yr(t),i=cr(r,s);i.payload=e,n!=null&&(i.callback=n),e=Gr(t,i,s),e!==null&&(bn(e,t,s,r),Sl(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Ut(),s=Yr(t),i=cr(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=Gr(t,i,s),e!==null&&(bn(e,t,s,r),Sl(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Ut(),r=Yr(t),s=cr(n,r);s.tag=2,e!=null&&(s.callback=e),e=Gr(t,s,r),e!==null&&(bn(e,t,r,n),Sl(e,t,r))}};function dg(t,e,n,r,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!Zo(n,r)||!Zo(s,i):!0}function Fv(t,e,n){var r=!1,s=ns,i=e.contextType;return typeof i=="object"&&i!==null?i=vn(i):(s=Qt(e)?Ns:Dt.current,r=e.contextTypes,i=(r=r!=null)?bi(t,s):ns),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Hu,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function fg(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Hu.enqueueReplaceState(e,e.state,null)}function Jh(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},df(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=vn(i):(i=Qt(e)?Ns:Dt.current,s.context=bi(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(Xh(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&Hu.enqueueReplaceState(s,s.state,null),su(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function Li(t,e){try{var n="",r=e;do n+=d2(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function nh(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Zh(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var Ux=typeof WeakMap=="function"?WeakMap:Map;function Bv(t,e,n){n=cr(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){uu||(uu=!0,ud=r),Zh(t,e)},n}function zv(t,e,n){n=cr(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){Zh(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){Zh(t,e),typeof r!="function"&&(Qr===null?Qr=new Set([this]):Qr.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function pg(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new Ux;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=Zx.bind(null,t,e,n),e.then(t,t))}function mg(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function gg(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=cr(-1,1),e.tag=2,Gr(n,e,1))),n.lanes|=1),t)}var Fx=xr.ReactCurrentOwner,Kt=!1;function Vt(t,e,n,r){e.child=t===null?yv(e,null,n,r):Pi(e,t.child,n,r)}function yg(t,e,n,r,s){n=n.render;var i=e.ref;return Ti(e,s),r=yf(t,e,n,r,i,s),n=vf(),t!==null&&!Kt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,gr(t,e,s)):(Ue&&n&&sf(e),e.flags|=1,Vt(t,e,r,s),e.child)}function vg(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!Cf(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,$v(t,e,i,r,s)):(t=Pl(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:Zo,n(o,r)&&t.ref===e.ref)return gr(t,e,s)}return e.flags|=1,t=Xr(i,r),t.ref=e.ref,t.return=e,e.child=t}function $v(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(Zo(i,r)&&t.ref===e.ref)if(Kt=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(Kt=!0);else return e.lanes=t.lanes,gr(t,e,s)}return ed(t,e,n,r,s)}function Hv(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},be(gi,tn),tn|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,be(gi,tn),tn|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,be(gi,tn),tn|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,be(gi,tn),tn|=r;return Vt(t,e,s,n),e.child}function Wv(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function ed(t,e,n,r,s){var i=Qt(n)?Ns:Dt.current;return i=bi(e,i),Ti(e,s),n=yf(t,e,n,r,i,s),r=vf(),t!==null&&!Kt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,gr(t,e,s)):(Ue&&r&&sf(e),e.flags|=1,Vt(t,e,n,s),e.child)}function _g(t,e,n,r,s){if(Qt(n)){var i=!0;Zl(e)}else i=!1;if(Ti(e,s),e.stateNode===null)Rl(t,e),Fv(e,n,r),Jh(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var u=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=vn(c):(c=Qt(n)?Ns:Dt.current,c=bi(e,c));var h=n.getDerivedStateFromProps,f=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function";f||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||u!==c)&&fg(e,o,r,c),Pr=!1;var d=e.memoizedState;o.state=d,su(e,r,o,s),u=e.memoizedState,a!==r||d!==u||Gt.current||Pr?(typeof h=="function"&&(Xh(e,n,h,r),u=e.memoizedState),(a=Pr||dg(e,n,a,r,d,u,c))?(f||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=u),o.props=r,o.state=u,o.context=c,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,_v(t,e),a=e.memoizedProps,c=e.type===e.elementType?a:In(e.type,a),o.props=c,f=e.pendingProps,d=o.context,u=n.contextType,typeof u=="object"&&u!==null?u=vn(u):(u=Qt(n)?Ns:Dt.current,u=bi(e,u));var v=n.getDerivedStateFromProps;(h=typeof v=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==f||d!==u)&&fg(e,o,r,u),Pr=!1,d=e.memoizedState,o.state=d,su(e,r,o,s);var x=e.memoizedState;a!==f||d!==x||Gt.current||Pr?(typeof v=="function"&&(Xh(e,n,v,r),x=e.memoizedState),(c=Pr||dg(e,n,c,r,d,x,u)||!1)?(h||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,x,u),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,x,u)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&d===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&d===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=x),o.props=r,o.state=x,o.context=u,r=c):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&d===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&d===t.memoizedState||(e.flags|=1024),r=!1)}return td(t,e,n,r,i,s)}function td(t,e,n,r,s,i){Wv(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&sg(e,n,!1),gr(t,e,i);r=e.stateNode,Fx.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=Pi(e,t.child,null,i),e.child=Pi(e,null,a,i)):Vt(t,e,a,i),e.memoizedState=r.state,s&&sg(e,n,!0),e.child}function qv(t){var e=t.stateNode;e.pendingContext?rg(t,e.pendingContext,e.pendingContext!==e.context):e.context&&rg(t,e.context,!1),ff(t,e.containerInfo)}function wg(t,e,n,r,s){return Ni(),af(s),e.flags|=256,Vt(t,e,n,r),e.child}var nd={dehydrated:null,treeContext:null,retryLane:0};function rd(t){return{baseLanes:t,cachePool:null,transitions:null}}function Kv(t,e,n){var r=e.pendingProps,s=ze.current,i=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(s&2)!==0),a?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),be(ze,s&1),t===null)return Qh(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=Ku(o,r,0,null),t=Cs(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=rd(n),e.memoizedState=nd,t):Ef(e,o));if(s=t.memoizedState,s!==null&&(a=s.dehydrated,a!==null))return Bx(t,e,o,r,a,s,n);if(i){i=r.fallback,o=e.mode,s=t.child,a=s.sibling;var u={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=u,e.deletions=null):(r=Xr(s,u),r.subtreeFlags=s.subtreeFlags&14680064),a!==null?i=Xr(a,i):(i=Cs(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o=o===null?rd(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=nd,r}return i=t.child,t=i.sibling,r=Xr(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Ef(t,e){return e=Ku({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function ul(t,e,n,r){return r!==null&&af(r),Pi(e,t.child,null,n),t=Ef(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function Bx(t,e,n,r,s,i,o){if(n)return e.flags&256?(e.flags&=-257,r=nh(Error(Q(422))),ul(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=Ku({mode:"visible",children:r.children},s,0,null),i=Cs(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&Pi(e,t.child,null,o),e.child.memoizedState=rd(o),e.memoizedState=nd,i);if(!(e.mode&1))return ul(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var a=r.dgst;return r=a,i=Error(Q(419)),r=nh(i,r,void 0),ul(t,e,o,r)}if(a=(o&t.childLanes)!==0,Kt||a){if(r=ft,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,mr(t,s),bn(r,t,s,-1))}return kf(),r=nh(Error(Q(421))),ul(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=eT.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,nn=Kr(s.nextSibling),on=e,Ue=!0,Sn=null,t!==null&&(fn[pn++]=sr,fn[pn++]=ir,fn[pn++]=Ps,sr=t.id,ir=t.overflow,Ps=e),e=Ef(e,r.children),e.flags|=4096,e)}function Eg(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Yh(t.return,e,n)}function rh(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function Gv(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(Vt(t,e,r.children,n),r=ze.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Eg(t,n,e);else if(t.tag===19)Eg(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(be(ze,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&iu(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),rh(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&iu(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}rh(e,!0,n,null,i);break;case"together":rh(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Rl(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function gr(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Ls|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(Q(153));if(e.child!==null){for(t=e.child,n=Xr(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Xr(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function zx(t,e,n){switch(e.tag){case 3:qv(e),Ni();break;case 5:wv(e);break;case 1:Qt(e.type)&&Zl(e);break;case 4:ff(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;be(nu,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(be(ze,ze.current&1),e.flags|=128,null):n&e.child.childLanes?Kv(t,e,n):(be(ze,ze.current&1),t=gr(t,e,n),t!==null?t.sibling:null);be(ze,ze.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return Gv(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),be(ze,ze.current),r)break;return null;case 22:case 23:return e.lanes=0,Hv(t,e,n)}return gr(t,e,n)}var Qv,sd,Yv,Xv;Qv=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};sd=function(){};Yv=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,Is(Wn.current);var i=null;switch(n){case"input":s=Sh(t,s),r=Sh(t,r),i=[];break;case"select":s=He({},s,{value:void 0}),r=He({},r,{value:void 0}),i=[];break;case"textarea":s=Rh(t,s),r=Rh(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Xl)}Nh(n,r);var o;n=null;for(c in s)if(!r.hasOwnProperty(c)&&s.hasOwnProperty(c)&&s[c]!=null)if(c==="style"){var a=s[c];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(qo.hasOwnProperty(c)?i||(i=[]):(i=i||[]).push(c,null));for(c in r){var u=r[c];if(a=s!=null?s[c]:void 0,r.hasOwnProperty(c)&&u!==a&&(u!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||u&&u.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in u)u.hasOwnProperty(o)&&a[o]!==u[o]&&(n||(n={}),n[o]=u[o])}else n||(i||(i=[]),i.push(c,n)),n=u;else c==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,a=a?a.__html:void 0,u!=null&&a!==u&&(i=i||[]).push(c,u)):c==="children"?typeof u!="string"&&typeof u!="number"||(i=i||[]).push(c,""+u):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(qo.hasOwnProperty(c)?(u!=null&&c==="onScroll"&&De("scroll",t),i||a===u||(i=[])):(i=i||[]).push(c,u))}n&&(i=i||[]).push("style",n);var c=i;(e.updateQueue=c)&&(e.flags|=4)}};Xv=function(t,e,n,r){n!==r&&(e.flags|=4)};function yo(t,e){if(!Ue)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function kt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function $x(t,e,n){var r=e.pendingProps;switch(of(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return kt(e),null;case 1:return Qt(e.type)&&Jl(),kt(e),null;case 3:return r=e.stateNode,Di(),Oe(Gt),Oe(Dt),mf(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(al(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Sn!==null&&(dd(Sn),Sn=null))),sd(t,e),kt(e),null;case 5:pf(e);var s=Is(sa.current);if(n=e.type,t!==null&&e.stateNode!=null)Yv(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(Q(166));return kt(e),null}if(t=Is(Wn.current),al(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[Bn]=e,r[na]=i,t=(e.mode&1)!==0,n){case"dialog":De("cancel",r),De("close",r);break;case"iframe":case"object":case"embed":De("load",r);break;case"video":case"audio":for(s=0;s<Io.length;s++)De(Io[s],r);break;case"source":De("error",r);break;case"img":case"image":case"link":De("error",r),De("load",r);break;case"details":De("toggle",r);break;case"input":bm(r,i),De("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},De("invalid",r);break;case"textarea":Pm(r,i),De("invalid",r)}Nh(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var a=i[o];o==="children"?typeof a=="string"?r.textContent!==a&&(i.suppressHydrationWarning!==!0&&ol(r.textContent,a,t),s=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(i.suppressHydrationWarning!==!0&&ol(r.textContent,a,t),s=["children",""+a]):qo.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&De("scroll",r)}switch(n){case"input":Ja(r),Nm(r,i,!0);break;case"textarea":Ja(r),Dm(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=Xl)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=A0(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[Bn]=e,t[na]=r,Qv(t,e,!1,!1),e.stateNode=t;e:{switch(o=Ph(n,r),n){case"dialog":De("cancel",t),De("close",t),s=r;break;case"iframe":case"object":case"embed":De("load",t),s=r;break;case"video":case"audio":for(s=0;s<Io.length;s++)De(Io[s],t);s=r;break;case"source":De("error",t),s=r;break;case"img":case"image":case"link":De("error",t),De("load",t),s=r;break;case"details":De("toggle",t),s=r;break;case"input":bm(t,r),s=Sh(t,r),De("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=He({},r,{value:void 0}),De("invalid",t);break;case"textarea":Pm(t,r),s=Rh(t,r),De("invalid",t);break;default:s=r}Nh(n,s),a=s;for(i in a)if(a.hasOwnProperty(i)){var u=a[i];i==="style"?C0(t,u):i==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&S0(t,u)):i==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&Ko(t,u):typeof u=="number"&&Ko(t,""+u):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(qo.hasOwnProperty(i)?u!=null&&i==="onScroll"&&De("scroll",t):u!=null&&Hd(t,i,u,o))}switch(n){case"input":Ja(t),Nm(t,r,!1);break;case"textarea":Ja(t),Dm(t);break;case"option":r.value!=null&&t.setAttribute("value",""+ts(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?_i(t,!!r.multiple,i,!1):r.defaultValue!=null&&_i(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=Xl)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return kt(e),null;case 6:if(t&&e.stateNode!=null)Xv(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(Q(166));if(n=Is(sa.current),Is(Wn.current),al(e)){if(r=e.stateNode,n=e.memoizedProps,r[Bn]=e,(i=r.nodeValue!==n)&&(t=on,t!==null))switch(t.tag){case 3:ol(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&ol(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Bn]=e,e.stateNode=r}return kt(e),null;case 13:if(Oe(ze),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Ue&&nn!==null&&e.mode&1&&!(e.flags&128))mv(),Ni(),e.flags|=98560,i=!1;else if(i=al(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(Q(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(Q(317));i[Bn]=e}else Ni(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;kt(e),i=!1}else Sn!==null&&(dd(Sn),Sn=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||ze.current&1?at===0&&(at=3):kf())),e.updateQueue!==null&&(e.flags|=4),kt(e),null);case 4:return Di(),sd(t,e),t===null&&ea(e.stateNode.containerInfo),kt(e),null;case 10:return cf(e.type._context),kt(e),null;case 17:return Qt(e.type)&&Jl(),kt(e),null;case 19:if(Oe(ze),i=e.memoizedState,i===null)return kt(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)yo(i,!1);else{if(at!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=iu(t),o!==null){for(e.flags|=128,yo(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return be(ze,ze.current&1|2),e.child}t=t.sibling}i.tail!==null&&Je()>Oi&&(e.flags|=128,r=!0,yo(i,!1),e.lanes=4194304)}else{if(!r)if(t=iu(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),yo(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!Ue)return kt(e),null}else 2*Je()-i.renderingStartTime>Oi&&n!==1073741824&&(e.flags|=128,r=!0,yo(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=Je(),e.sibling=null,n=ze.current,be(ze,r?n&1|2:n&1),e):(kt(e),null);case 22:case 23:return Sf(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?tn&1073741824&&(kt(e),e.subtreeFlags&6&&(e.flags|=8192)):kt(e),null;case 24:return null;case 25:return null}throw Error(Q(156,e.tag))}function Hx(t,e){switch(of(e),e.tag){case 1:return Qt(e.type)&&Jl(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Di(),Oe(Gt),Oe(Dt),mf(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return pf(e),null;case 13:if(Oe(ze),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(Q(340));Ni()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Oe(ze),null;case 4:return Di(),null;case 10:return cf(e.type._context),null;case 22:case 23:return Sf(),null;case 24:return null;default:return null}}var cl=!1,Nt=!1,Wx=typeof WeakSet=="function"?WeakSet:Set,ne=null;function mi(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Ke(t,e,r)}else n.current=null}function id(t,e,n){try{n()}catch(r){Ke(t,e,r)}}var xg=!1;function qx(t,e){if(zh=Gl,t=nv(),rf(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,a=-1,u=-1,c=0,h=0,f=t,d=null;t:for(;;){for(var v;f!==n||s!==0&&f.nodeType!==3||(a=o+s),f!==i||r!==0&&f.nodeType!==3||(u=o+r),f.nodeType===3&&(o+=f.nodeValue.length),(v=f.firstChild)!==null;)d=f,f=v;for(;;){if(f===t)break t;if(d===n&&++c===s&&(a=o),d===i&&++h===r&&(u=o),(v=f.nextSibling)!==null)break;f=d,d=f.parentNode}f=v}n=a===-1||u===-1?null:{start:a,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for($h={focusedElem:t,selectionRange:n},Gl=!1,ne=e;ne!==null;)if(e=ne,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,ne=t;else for(;ne!==null;){e=ne;try{var x=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(x!==null){var k=x.memoizedProps,P=x.memoizedState,E=e.stateNode,I=E.getSnapshotBeforeUpdate(e.elementType===e.type?k:In(e.type,k),P);E.__reactInternalSnapshotBeforeUpdate=I}break;case 3:var C=e.stateNode.containerInfo;C.nodeType===1?C.textContent="":C.nodeType===9&&C.documentElement&&C.removeChild(C.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Q(163))}}catch(b){Ke(e,e.return,b)}if(t=e.sibling,t!==null){t.return=e.return,ne=t;break}ne=e.return}return x=xg,xg=!1,x}function Mo(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&id(e,n,i)}s=s.next}while(s!==r)}}function Wu(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function od(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function Jv(t){var e=t.alternate;e!==null&&(t.alternate=null,Jv(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Bn],delete e[na],delete e[qh],delete e[Cx],delete e[Rx])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Zv(t){return t.tag===5||t.tag===3||t.tag===4}function Tg(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Zv(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function ad(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Xl));else if(r!==4&&(t=t.child,t!==null))for(ad(t,e,n),t=t.sibling;t!==null;)ad(t,e,n),t=t.sibling}function ld(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(ld(t,e,n),t=t.sibling;t!==null;)ld(t,e,n),t=t.sibling}var mt=null,An=!1;function Rr(t,e,n){for(n=n.child;n!==null;)e_(t,e,n),n=n.sibling}function e_(t,e,n){if(Hn&&typeof Hn.onCommitFiberUnmount=="function")try{Hn.onCommitFiberUnmount(Mu,n)}catch{}switch(n.tag){case 5:Nt||mi(n,e);case 6:var r=mt,s=An;mt=null,Rr(t,e,n),mt=r,An=s,mt!==null&&(An?(t=mt,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):mt.removeChild(n.stateNode));break;case 18:mt!==null&&(An?(t=mt,n=n.stateNode,t.nodeType===8?Yc(t.parentNode,n):t.nodeType===1&&Yc(t,n),Xo(t)):Yc(mt,n.stateNode));break;case 4:r=mt,s=An,mt=n.stateNode.containerInfo,An=!0,Rr(t,e,n),mt=r,An=s;break;case 0:case 11:case 14:case 15:if(!Nt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&id(n,e,o),s=s.next}while(s!==r)}Rr(t,e,n);break;case 1:if(!Nt&&(mi(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Ke(n,e,a)}Rr(t,e,n);break;case 21:Rr(t,e,n);break;case 22:n.mode&1?(Nt=(r=Nt)||n.memoizedState!==null,Rr(t,e,n),Nt=r):Rr(t,e,n);break;default:Rr(t,e,n)}}function Ig(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new Wx),e.forEach(function(r){var s=tT.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function xn(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:mt=a.stateNode,An=!1;break e;case 3:mt=a.stateNode.containerInfo,An=!0;break e;case 4:mt=a.stateNode.containerInfo,An=!0;break e}a=a.return}if(mt===null)throw Error(Q(160));e_(i,o,s),mt=null,An=!1;var u=s.alternate;u!==null&&(u.return=null),s.return=null}catch(c){Ke(s,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)t_(e,t),e=e.sibling}function t_(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(xn(e,t),Vn(t),r&4){try{Mo(3,t,t.return),Wu(3,t)}catch(k){Ke(t,t.return,k)}try{Mo(5,t,t.return)}catch(k){Ke(t,t.return,k)}}break;case 1:xn(e,t),Vn(t),r&512&&n!==null&&mi(n,n.return);break;case 5:if(xn(e,t),Vn(t),r&512&&n!==null&&mi(n,n.return),t.flags&32){var s=t.stateNode;try{Ko(s,"")}catch(k){Ke(t,t.return,k)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,a=t.type,u=t.updateQueue;if(t.updateQueue=null,u!==null)try{a==="input"&&i.type==="radio"&&i.name!=null&&T0(s,i),Ph(a,o);var c=Ph(a,i);for(o=0;o<u.length;o+=2){var h=u[o],f=u[o+1];h==="style"?C0(s,f):h==="dangerouslySetInnerHTML"?S0(s,f):h==="children"?Ko(s,f):Hd(s,h,f,c)}switch(a){case"input":kh(s,i);break;case"textarea":I0(s,i);break;case"select":var d=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var v=i.value;v!=null?_i(s,!!i.multiple,v,!1):d!==!!i.multiple&&(i.defaultValue!=null?_i(s,!!i.multiple,i.defaultValue,!0):_i(s,!!i.multiple,i.multiple?[]:"",!1))}s[na]=i}catch(k){Ke(t,t.return,k)}}break;case 6:if(xn(e,t),Vn(t),r&4){if(t.stateNode===null)throw Error(Q(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(k){Ke(t,t.return,k)}}break;case 3:if(xn(e,t),Vn(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Xo(e.containerInfo)}catch(k){Ke(t,t.return,k)}break;case 4:xn(e,t),Vn(t);break;case 13:xn(e,t),Vn(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(If=Je())),r&4&&Ig(t);break;case 22:if(h=n!==null&&n.memoizedState!==null,t.mode&1?(Nt=(c=Nt)||h,xn(e,t),Nt=c):xn(e,t),Vn(t),r&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!h&&t.mode&1)for(ne=t,h=t.child;h!==null;){for(f=ne=h;ne!==null;){switch(d=ne,v=d.child,d.tag){case 0:case 11:case 14:case 15:Mo(4,d,d.return);break;case 1:mi(d,d.return);var x=d.stateNode;if(typeof x.componentWillUnmount=="function"){r=d,n=d.return;try{e=r,x.props=e.memoizedProps,x.state=e.memoizedState,x.componentWillUnmount()}catch(k){Ke(r,n,k)}}break;case 5:mi(d,d.return);break;case 22:if(d.memoizedState!==null){Sg(f);continue}}v!==null?(v.return=d,ne=v):Sg(f)}h=h.sibling}e:for(h=null,f=t;;){if(f.tag===5){if(h===null){h=f;try{s=f.stateNode,c?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(a=f.stateNode,u=f.memoizedProps.style,o=u!=null&&u.hasOwnProperty("display")?u.display:null,a.style.display=k0("display",o))}catch(k){Ke(t,t.return,k)}}}else if(f.tag===6){if(h===null)try{f.stateNode.nodeValue=c?"":f.memoizedProps}catch(k){Ke(t,t.return,k)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===t)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===t)break e;for(;f.sibling===null;){if(f.return===null||f.return===t)break e;h===f&&(h=null),f=f.return}h===f&&(h=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:xn(e,t),Vn(t),r&4&&Ig(t);break;case 21:break;default:xn(e,t),Vn(t)}}function Vn(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(Zv(n)){var r=n;break e}n=n.return}throw Error(Q(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(Ko(s,""),r.flags&=-33);var i=Tg(t);ld(t,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,a=Tg(t);ad(t,a,o);break;default:throw Error(Q(161))}}catch(u){Ke(t,t.return,u)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function Kx(t,e,n){ne=t,n_(t)}function n_(t,e,n){for(var r=(t.mode&1)!==0;ne!==null;){var s=ne,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||cl;if(!o){var a=s.alternate,u=a!==null&&a.memoizedState!==null||Nt;a=cl;var c=Nt;if(cl=o,(Nt=u)&&!c)for(ne=s;ne!==null;)o=ne,u=o.child,o.tag===22&&o.memoizedState!==null?kg(s):u!==null?(u.return=o,ne=u):kg(s);for(;i!==null;)ne=i,n_(i),i=i.sibling;ne=s,cl=a,Nt=c}Ag(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,ne=i):Ag(t)}}function Ag(t){for(;ne!==null;){var e=ne;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Nt||Wu(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Nt)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:In(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&ug(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}ug(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var u=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var h=c.memoizedState;if(h!==null){var f=h.dehydrated;f!==null&&Xo(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Q(163))}Nt||e.flags&512&&od(e)}catch(d){Ke(e,e.return,d)}}if(e===t){ne=null;break}if(n=e.sibling,n!==null){n.return=e.return,ne=n;break}ne=e.return}}function Sg(t){for(;ne!==null;){var e=ne;if(e===t){ne=null;break}var n=e.sibling;if(n!==null){n.return=e.return,ne=n;break}ne=e.return}}function kg(t){for(;ne!==null;){var e=ne;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Wu(4,e)}catch(u){Ke(e,n,u)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(u){Ke(e,s,u)}}var i=e.return;try{od(e)}catch(u){Ke(e,i,u)}break;case 5:var o=e.return;try{od(e)}catch(u){Ke(e,o,u)}}}catch(u){Ke(e,e.return,u)}if(e===t){ne=null;break}var a=e.sibling;if(a!==null){a.return=e.return,ne=a;break}ne=e.return}}var Gx=Math.ceil,lu=xr.ReactCurrentDispatcher,xf=xr.ReactCurrentOwner,gn=xr.ReactCurrentBatchConfig,_e=0,ft=null,rt=null,vt=0,tn=0,gi=ls(0),at=0,la=null,Ls=0,qu=0,Tf=0,Vo=null,Ht=null,If=0,Oi=1/0,nr=null,uu=!1,ud=null,Qr=null,hl=!1,Br=null,cu=0,Uo=0,cd=null,bl=-1,Nl=0;function Ut(){return _e&6?Je():bl!==-1?bl:bl=Je()}function Yr(t){return t.mode&1?_e&2&&vt!==0?vt&-vt:Nx.transition!==null?(Nl===0&&(Nl=F0()),Nl):(t=Se,t!==0||(t=window.event,t=t===void 0?16:K0(t.type)),t):1}function bn(t,e,n,r){if(50<Uo)throw Uo=0,cd=null,Error(Q(185));_a(t,n,r),(!(_e&2)||t!==ft)&&(t===ft&&(!(_e&2)&&(qu|=n),at===4&&Lr(t,vt)),Yt(t,r),n===1&&_e===0&&!(e.mode&1)&&(Oi=Je()+500,zu&&us()))}function Yt(t,e){var n=t.callbackNode;N2(t,e);var r=Kl(t,t===ft?vt:0);if(r===0)n!==null&&jm(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&jm(n),e===1)t.tag===0?bx(Cg.bind(null,t)):dv(Cg.bind(null,t)),Sx(function(){!(_e&6)&&us()}),n=null;else{switch(B0(r)){case 1:n=Qd;break;case 4:n=V0;break;case 16:n=ql;break;case 536870912:n=U0;break;default:n=ql}n=c_(n,r_.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function r_(t,e){if(bl=-1,Nl=0,_e&6)throw Error(Q(327));var n=t.callbackNode;if(Ii()&&t.callbackNode!==n)return null;var r=Kl(t,t===ft?vt:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=hu(t,r);else{e=r;var s=_e;_e|=2;var i=i_();(ft!==t||vt!==e)&&(nr=null,Oi=Je()+500,ks(t,e));do try{Xx();break}catch(a){s_(t,a)}while(!0);uf(),lu.current=i,_e=s,rt!==null?e=0:(ft=null,vt=0,e=at)}if(e!==0){if(e===2&&(s=Mh(t),s!==0&&(r=s,e=hd(t,s))),e===1)throw n=la,ks(t,0),Lr(t,r),Yt(t,Je()),n;if(e===6)Lr(t,r);else{if(s=t.current.alternate,!(r&30)&&!Qx(s)&&(e=hu(t,r),e===2&&(i=Mh(t),i!==0&&(r=i,e=hd(t,i))),e===1))throw n=la,ks(t,0),Lr(t,r),Yt(t,Je()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(Q(345));case 2:ws(t,Ht,nr);break;case 3:if(Lr(t,r),(r&130023424)===r&&(e=If+500-Je(),10<e)){if(Kl(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){Ut(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=Wh(ws.bind(null,t,Ht,nr),e);break}ws(t,Ht,nr);break;case 4:if(Lr(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-Rn(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=Je()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Gx(r/1960))-r,10<r){t.timeoutHandle=Wh(ws.bind(null,t,Ht,nr),r);break}ws(t,Ht,nr);break;case 5:ws(t,Ht,nr);break;default:throw Error(Q(329))}}}return Yt(t,Je()),t.callbackNode===n?r_.bind(null,t):null}function hd(t,e){var n=Vo;return t.current.memoizedState.isDehydrated&&(ks(t,e).flags|=256),t=hu(t,e),t!==2&&(e=Ht,Ht=n,e!==null&&dd(e)),t}function dd(t){Ht===null?Ht=t:Ht.push.apply(Ht,t)}function Qx(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!Nn(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Lr(t,e){for(e&=~Tf,e&=~qu,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Rn(e),r=1<<n;t[n]=-1,e&=~r}}function Cg(t){if(_e&6)throw Error(Q(327));Ii();var e=Kl(t,0);if(!(e&1))return Yt(t,Je()),null;var n=hu(t,e);if(t.tag!==0&&n===2){var r=Mh(t);r!==0&&(e=r,n=hd(t,r))}if(n===1)throw n=la,ks(t,0),Lr(t,e),Yt(t,Je()),n;if(n===6)throw Error(Q(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,ws(t,Ht,nr),Yt(t,Je()),null}function Af(t,e){var n=_e;_e|=1;try{return t(e)}finally{_e=n,_e===0&&(Oi=Je()+500,zu&&us())}}function Os(t){Br!==null&&Br.tag===0&&!(_e&6)&&Ii();var e=_e;_e|=1;var n=gn.transition,r=Se;try{if(gn.transition=null,Se=1,t)return t()}finally{Se=r,gn.transition=n,_e=e,!(_e&6)&&us()}}function Sf(){tn=gi.current,Oe(gi)}function ks(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,Ax(n)),rt!==null)for(n=rt.return;n!==null;){var r=n;switch(of(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Jl();break;case 3:Di(),Oe(Gt),Oe(Dt),mf();break;case 5:pf(r);break;case 4:Di();break;case 13:Oe(ze);break;case 19:Oe(ze);break;case 10:cf(r.type._context);break;case 22:case 23:Sf()}n=n.return}if(ft=t,rt=t=Xr(t.current,null),vt=tn=e,at=0,la=null,Tf=qu=Ls=0,Ht=Vo=null,Ts!==null){for(e=0;e<Ts.length;e++)if(n=Ts[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}Ts=null}return t}function s_(t,e){do{var n=rt;try{if(uf(),kl.current=au,ou){for(var r=$e.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}ou=!1}if(Ds=0,dt=ot=$e=null,jo=!1,ia=0,xf.current=null,n===null||n.return===null){at=1,la=e,rt=null;break}e:{var i=t,o=n.return,a=n,u=e;if(e=vt,a.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var c=u,h=a,f=h.tag;if(!(h.mode&1)&&(f===0||f===11||f===15)){var d=h.alternate;d?(h.updateQueue=d.updateQueue,h.memoizedState=d.memoizedState,h.lanes=d.lanes):(h.updateQueue=null,h.memoizedState=null)}var v=mg(o);if(v!==null){v.flags&=-257,gg(v,o,a,i,e),v.mode&1&&pg(i,c,e),e=v,u=c;var x=e.updateQueue;if(x===null){var k=new Set;k.add(u),e.updateQueue=k}else x.add(u);break e}else{if(!(e&1)){pg(i,c,e),kf();break e}u=Error(Q(426))}}else if(Ue&&a.mode&1){var P=mg(o);if(P!==null){!(P.flags&65536)&&(P.flags|=256),gg(P,o,a,i,e),af(Li(u,a));break e}}i=u=Li(u,a),at!==4&&(at=2),Vo===null?Vo=[i]:Vo.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var E=Bv(i,u,e);lg(i,E);break e;case 1:a=u;var I=i.type,C=i.stateNode;if(!(i.flags&128)&&(typeof I.getDerivedStateFromError=="function"||C!==null&&typeof C.componentDidCatch=="function"&&(Qr===null||!Qr.has(C)))){i.flags|=65536,e&=-e,i.lanes|=e;var b=zv(i,a,e);lg(i,b);break e}}i=i.return}while(i!==null)}a_(n)}catch(j){e=j,rt===n&&n!==null&&(rt=n=n.return);continue}break}while(!0)}function i_(){var t=lu.current;return lu.current=au,t===null?au:t}function kf(){(at===0||at===3||at===2)&&(at=4),ft===null||!(Ls&268435455)&&!(qu&268435455)||Lr(ft,vt)}function hu(t,e){var n=_e;_e|=2;var r=i_();(ft!==t||vt!==e)&&(nr=null,ks(t,e));do try{Yx();break}catch(s){s_(t,s)}while(!0);if(uf(),_e=n,lu.current=r,rt!==null)throw Error(Q(261));return ft=null,vt=0,at}function Yx(){for(;rt!==null;)o_(rt)}function Xx(){for(;rt!==null&&!x2();)o_(rt)}function o_(t){var e=u_(t.alternate,t,tn);t.memoizedProps=t.pendingProps,e===null?a_(t):rt=e,xf.current=null}function a_(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=Hx(n,e),n!==null){n.flags&=32767,rt=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{at=6,rt=null;return}}else if(n=$x(n,e,tn),n!==null){rt=n;return}if(e=e.sibling,e!==null){rt=e;return}rt=e=t}while(e!==null);at===0&&(at=5)}function ws(t,e,n){var r=Se,s=gn.transition;try{gn.transition=null,Se=1,Jx(t,e,n,r)}finally{gn.transition=s,Se=r}return null}function Jx(t,e,n,r){do Ii();while(Br!==null);if(_e&6)throw Error(Q(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(Q(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(P2(t,i),t===ft&&(rt=ft=null,vt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||hl||(hl=!0,c_(ql,function(){return Ii(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=gn.transition,gn.transition=null;var o=Se;Se=1;var a=_e;_e|=4,xf.current=null,qx(t,n),t_(n,t),vx($h),Gl=!!zh,$h=zh=null,t.current=n,Kx(n),T2(),_e=a,Se=o,gn.transition=i}else t.current=n;if(hl&&(hl=!1,Br=t,cu=s),i=t.pendingLanes,i===0&&(Qr=null),S2(n.stateNode),Yt(t,Je()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(uu)throw uu=!1,t=ud,ud=null,t;return cu&1&&t.tag!==0&&Ii(),i=t.pendingLanes,i&1?t===cd?Uo++:(Uo=0,cd=t):Uo=0,us(),null}function Ii(){if(Br!==null){var t=B0(cu),e=gn.transition,n=Se;try{if(gn.transition=null,Se=16>t?16:t,Br===null)var r=!1;else{if(t=Br,Br=null,cu=0,_e&6)throw Error(Q(331));var s=_e;for(_e|=4,ne=t.current;ne!==null;){var i=ne,o=i.child;if(ne.flags&16){var a=i.deletions;if(a!==null){for(var u=0;u<a.length;u++){var c=a[u];for(ne=c;ne!==null;){var h=ne;switch(h.tag){case 0:case 11:case 15:Mo(8,h,i)}var f=h.child;if(f!==null)f.return=h,ne=f;else for(;ne!==null;){h=ne;var d=h.sibling,v=h.return;if(Jv(h),h===c){ne=null;break}if(d!==null){d.return=v,ne=d;break}ne=v}}}var x=i.alternate;if(x!==null){var k=x.child;if(k!==null){x.child=null;do{var P=k.sibling;k.sibling=null,k=P}while(k!==null)}}ne=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,ne=o;else e:for(;ne!==null;){if(i=ne,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Mo(9,i,i.return)}var E=i.sibling;if(E!==null){E.return=i.return,ne=E;break e}ne=i.return}}var I=t.current;for(ne=I;ne!==null;){o=ne;var C=o.child;if(o.subtreeFlags&2064&&C!==null)C.return=o,ne=C;else e:for(o=I;ne!==null;){if(a=ne,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Wu(9,a)}}catch(j){Ke(a,a.return,j)}if(a===o){ne=null;break e}var b=a.sibling;if(b!==null){b.return=a.return,ne=b;break e}ne=a.return}}if(_e=s,us(),Hn&&typeof Hn.onPostCommitFiberRoot=="function")try{Hn.onPostCommitFiberRoot(Mu,t)}catch{}r=!0}return r}finally{Se=n,gn.transition=e}}return!1}function Rg(t,e,n){e=Li(n,e),e=Bv(t,e,1),t=Gr(t,e,1),e=Ut(),t!==null&&(_a(t,1,e),Yt(t,e))}function Ke(t,e,n){if(t.tag===3)Rg(t,t,n);else for(;e!==null;){if(e.tag===3){Rg(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Qr===null||!Qr.has(r))){t=Li(n,t),t=zv(e,t,1),e=Gr(e,t,1),t=Ut(),e!==null&&(_a(e,1,t),Yt(e,t));break}}e=e.return}}function Zx(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Ut(),t.pingedLanes|=t.suspendedLanes&n,ft===t&&(vt&n)===n&&(at===4||at===3&&(vt&130023424)===vt&&500>Je()-If?ks(t,0):Tf|=n),Yt(t,e)}function l_(t,e){e===0&&(t.mode&1?(e=tl,tl<<=1,!(tl&130023424)&&(tl=4194304)):e=1);var n=Ut();t=mr(t,e),t!==null&&(_a(t,e,n),Yt(t,n))}function eT(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),l_(t,n)}function tT(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(Q(314))}r!==null&&r.delete(e),l_(t,n)}var u_;u_=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Gt.current)Kt=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Kt=!1,zx(t,e,n);Kt=!!(t.flags&131072)}else Kt=!1,Ue&&e.flags&1048576&&fv(e,tu,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Rl(t,e),t=e.pendingProps;var s=bi(e,Dt.current);Ti(e,n),s=yf(null,e,r,t,s,n);var i=vf();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Qt(r)?(i=!0,Zl(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,df(e),s.updater=Hu,e.stateNode=s,s._reactInternals=e,Jh(e,r,t,n),e=td(null,e,r,!0,i,n)):(e.tag=0,Ue&&i&&sf(e),Vt(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Rl(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=rT(r),t=In(r,t),s){case 0:e=ed(null,e,r,t,n);break e;case 1:e=_g(null,e,r,t,n);break e;case 11:e=yg(null,e,r,t,n);break e;case 14:e=vg(null,e,r,In(r.type,t),n);break e}throw Error(Q(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:In(r,s),ed(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:In(r,s),_g(t,e,r,s,n);case 3:e:{if(qv(e),t===null)throw Error(Q(387));r=e.pendingProps,i=e.memoizedState,s=i.element,_v(t,e),su(e,r,null,n);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=Li(Error(Q(423)),e),e=wg(t,e,r,n,s);break e}else if(r!==s){s=Li(Error(Q(424)),e),e=wg(t,e,r,n,s);break e}else for(nn=Kr(e.stateNode.containerInfo.firstChild),on=e,Ue=!0,Sn=null,n=yv(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Ni(),r===s){e=gr(t,e,n);break e}Vt(t,e,r,n)}e=e.child}return e;case 5:return wv(e),t===null&&Qh(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,Hh(r,s)?o=null:i!==null&&Hh(r,i)&&(e.flags|=32),Wv(t,e),Vt(t,e,o,n),e.child;case 6:return t===null&&Qh(e),null;case 13:return Kv(t,e,n);case 4:return ff(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Pi(e,null,r,n):Vt(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:In(r,s),yg(t,e,r,s,n);case 7:return Vt(t,e,e.pendingProps,n),e.child;case 8:return Vt(t,e,e.pendingProps.children,n),e.child;case 12:return Vt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,be(nu,r._currentValue),r._currentValue=o,i!==null)if(Nn(i.value,o)){if(i.children===s.children&&!Gt.current){e=gr(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var a=i.dependencies;if(a!==null){o=i.child;for(var u=a.firstContext;u!==null;){if(u.context===r){if(i.tag===1){u=cr(-1,n&-n),u.tag=2;var c=i.updateQueue;if(c!==null){c=c.shared;var h=c.pending;h===null?u.next=u:(u.next=h.next,h.next=u),c.pending=u}}i.lanes|=n,u=i.alternate,u!==null&&(u.lanes|=n),Yh(i.return,n,e),a.lanes|=n;break}u=u.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(Q(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),Yh(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}Vt(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,Ti(e,n),s=vn(s),r=r(s),e.flags|=1,Vt(t,e,r,n),e.child;case 14:return r=e.type,s=In(r,e.pendingProps),s=In(r.type,s),vg(t,e,r,s,n);case 15:return $v(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:In(r,s),Rl(t,e),e.tag=1,Qt(r)?(t=!0,Zl(e)):t=!1,Ti(e,n),Fv(e,r,s),Jh(e,r,s,n),td(null,e,r,!0,t,n);case 19:return Gv(t,e,n);case 22:return Hv(t,e,n)}throw Error(Q(156,e.tag))};function c_(t,e){return M0(t,e)}function nT(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function mn(t,e,n,r){return new nT(t,e,n,r)}function Cf(t){return t=t.prototype,!(!t||!t.isReactComponent)}function rT(t){if(typeof t=="function")return Cf(t)?1:0;if(t!=null){if(t=t.$$typeof,t===qd)return 11;if(t===Kd)return 14}return 2}function Xr(t,e){var n=t.alternate;return n===null?(n=mn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Pl(t,e,n,r,s,i){var o=2;if(r=t,typeof t=="function")Cf(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case oi:return Cs(n.children,s,i,e);case Wd:o=8,s|=8;break;case xh:return t=mn(12,n,e,s|2),t.elementType=xh,t.lanes=i,t;case Th:return t=mn(13,n,e,s),t.elementType=Th,t.lanes=i,t;case Ih:return t=mn(19,n,e,s),t.elementType=Ih,t.lanes=i,t;case w0:return Ku(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case v0:o=10;break e;case _0:o=9;break e;case qd:o=11;break e;case Kd:o=14;break e;case Nr:o=16,r=null;break e}throw Error(Q(130,t==null?t:typeof t,""))}return e=mn(o,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function Cs(t,e,n,r){return t=mn(7,t,r,e),t.lanes=n,t}function Ku(t,e,n,r){return t=mn(22,t,r,e),t.elementType=w0,t.lanes=n,t.stateNode={isHidden:!1},t}function sh(t,e,n){return t=mn(6,t,null,e),t.lanes=n,t}function ih(t,e,n){return e=mn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function sT(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Uc(0),this.expirationTimes=Uc(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Uc(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Rf(t,e,n,r,s,i,o,a,u){return t=new sT(t,e,n,a,u),e===1?(e=1,i===!0&&(e|=8)):e=0,i=mn(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},df(i),t}function iT(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ii,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function h_(t){if(!t)return ns;t=t._reactInternals;e:{if(qs(t)!==t||t.tag!==1)throw Error(Q(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Qt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(Q(171))}if(t.tag===1){var n=t.type;if(Qt(n))return hv(t,n,e)}return e}function d_(t,e,n,r,s,i,o,a,u){return t=Rf(n,r,!0,t,s,i,o,a,u),t.context=h_(null),n=t.current,r=Ut(),s=Yr(n),i=cr(r,s),i.callback=e??null,Gr(n,i,s),t.current.lanes=s,_a(t,s,r),Yt(t,r),t}function Gu(t,e,n,r){var s=e.current,i=Ut(),o=Yr(s);return n=h_(n),e.context===null?e.context=n:e.pendingContext=n,e=cr(i,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Gr(s,e,o),t!==null&&(bn(t,s,o,i),Sl(t,s,o)),o}function du(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function bg(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function bf(t,e){bg(t,e),(t=t.alternate)&&bg(t,e)}function oT(){return null}var f_=typeof reportError=="function"?reportError:function(t){console.error(t)};function Nf(t){this._internalRoot=t}Qu.prototype.render=Nf.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(Q(409));Gu(t,e,null,null)};Qu.prototype.unmount=Nf.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Os(function(){Gu(null,t,null,null)}),e[pr]=null}};function Qu(t){this._internalRoot=t}Qu.prototype.unstable_scheduleHydration=function(t){if(t){var e=H0();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Dr.length&&e!==0&&e<Dr[n].priority;n++);Dr.splice(n,0,t),n===0&&q0(t)}};function Pf(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Yu(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Ng(){}function aT(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var c=du(o);i.call(c)}}var o=d_(e,r,t,0,null,!1,!1,"",Ng);return t._reactRootContainer=o,t[pr]=o.current,ea(t.nodeType===8?t.parentNode:t),Os(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var a=r;r=function(){var c=du(u);a.call(c)}}var u=Rf(t,0,!1,null,null,!1,!1,"",Ng);return t._reactRootContainer=u,t[pr]=u.current,ea(t.nodeType===8?t.parentNode:t),Os(function(){Gu(e,u,n,r)}),u}function Xu(t,e,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var a=s;s=function(){var u=du(o);a.call(u)}}Gu(e,o,t,s)}else o=aT(n,e,t,s,r);return du(o)}z0=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=To(e.pendingLanes);n!==0&&(Yd(e,n|1),Yt(e,Je()),!(_e&6)&&(Oi=Je()+500,us()))}break;case 13:Os(function(){var r=mr(t,1);if(r!==null){var s=Ut();bn(r,t,1,s)}}),bf(t,1)}};Xd=function(t){if(t.tag===13){var e=mr(t,134217728);if(e!==null){var n=Ut();bn(e,t,134217728,n)}bf(t,134217728)}};$0=function(t){if(t.tag===13){var e=Yr(t),n=mr(t,e);if(n!==null){var r=Ut();bn(n,t,e,r)}bf(t,e)}};H0=function(){return Se};W0=function(t,e){var n=Se;try{return Se=t,e()}finally{Se=n}};Lh=function(t,e,n){switch(e){case"input":if(kh(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=Bu(r);if(!s)throw Error(Q(90));x0(r),kh(r,s)}}}break;case"textarea":I0(t,n);break;case"select":e=n.value,e!=null&&_i(t,!!n.multiple,e,!1)}};N0=Af;P0=Os;var lT={usingClientEntryPoint:!1,Events:[Ea,ci,Bu,R0,b0,Af]},vo={findFiberByHostInstance:xs,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},uT={bundleType:vo.bundleType,version:vo.version,rendererPackageName:vo.rendererPackageName,rendererConfig:vo.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:xr.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=O0(t),t===null?null:t.stateNode},findFiberByHostInstance:vo.findFiberByHostInstance||oT,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var dl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!dl.isDisabled&&dl.supportsFiber)try{Mu=dl.inject(uT),Hn=dl}catch{}}ln.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=lT;ln.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Pf(e))throw Error(Q(200));return iT(t,e,null,n)};ln.createRoot=function(t,e){if(!Pf(t))throw Error(Q(299));var n=!1,r="",s=f_;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=Rf(t,1,!1,null,null,n,!1,r,s),t[pr]=e.current,ea(t.nodeType===8?t.parentNode:t),new Nf(e)};ln.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(Q(188)):(t=Object.keys(t).join(","),Error(Q(268,t)));return t=O0(e),t=t===null?null:t.stateNode,t};ln.flushSync=function(t){return Os(t)};ln.hydrate=function(t,e,n){if(!Yu(e))throw Error(Q(200));return Xu(null,t,e,!0,n)};ln.hydrateRoot=function(t,e,n){if(!Pf(t))throw Error(Q(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=f_;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=d_(e,null,t,1,n??null,s,!1,i,o),t[pr]=e.current,ea(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new Qu(e)};ln.render=function(t,e,n){if(!Yu(e))throw Error(Q(200));return Xu(null,t,e,!1,n)};ln.unmountComponentAtNode=function(t){if(!Yu(t))throw Error(Q(40));return t._reactRootContainer?(Os(function(){Xu(null,null,t,!1,function(){t._reactRootContainer=null,t[pr]=null})}),!0):!1};ln.unstable_batchedUpdates=Af;ln.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Yu(n))throw Error(Q(200));if(t==null||t._reactInternals===void 0)throw Error(Q(38));return Xu(t,e,n,!1,r)};ln.version="18.3.1-next-f1338f8080-20240426";function p_(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(p_)}catch(t){console.error(t)}}p_(),p0.exports=ln;var cT=p0.exports,Pg=cT;wh.createRoot=Pg.createRoot,wh.hydrateRoot=Pg.hydrateRoot;var Dg={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m_=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},hT=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],o=t[n++],a=t[n++],u=((s&7)<<18|(i&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{const i=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},g_={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,a=o?t[s+1]:0,u=s+2<t.length,c=u?t[s+2]:0,h=i>>2,f=(i&3)<<4|a>>4;let d=(a&15)<<2|c>>6,v=c&63;u||(v=64,o||(d=64)),r.push(n[h],n[f],n[d],n[v])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(m_(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):hT(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],a=s<t.length?n[t.charAt(s)]:0;++s;const c=s<t.length?n[t.charAt(s)]:64;++s;const f=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||a==null||c==null||f==null)throw new dT;const d=i<<2|a>>4;if(r.push(d),c!==64){const v=a<<4&240|c>>2;if(r.push(v),f!==64){const x=c<<6&192|f;r.push(x)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class dT extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const fT=function(t){const e=m_(t);return g_.encodeByteArray(e,!0)},fu=function(t){return fT(t).replace(/\./g,"")},y_=function(t){try{return g_.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pT(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mT=()=>pT().__FIREBASE_DEFAULTS__,gT=()=>{if(typeof process>"u"||typeof Dg>"u")return;const t=Dg.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},yT=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&y_(t[1]);return e&&JSON.parse(e)},Ju=()=>{try{return mT()||gT()||yT()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},v_=t=>{var e,n;return(n=(e=Ju())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},__=t=>{const e=v_(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},w_=()=>{var t;return(t=Ju())===null||t===void 0?void 0:t.config},E_=t=>{var e;return(e=Ju())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vT{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function x_(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},t);return[fu(JSON.stringify(n)),fu(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function _T(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Lt())}function wT(){var t;const e=(t=Ju())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function ET(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function xT(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function TT(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function IT(){const t=Lt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function AT(){return!wT()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function ST(){try{return typeof indexedDB=="object"}catch{return!1}}function kT(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)===null||i===void 0?void 0:i.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CT="FirebaseError";class Zn extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=CT,Object.setPrototypeOf(this,Zn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ta.prototype.create)}}class Ta{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?RT(i,r):"Error",a=`${this.serviceName}: ${o} (${s}).`;return new Zn(s,a,r)}}function RT(t,e){return t.replace(bT,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const bT=/\{\$([^}]+)}/g;function NT(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function pu(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],o=e[s];if(Lg(i)&&Lg(o)){if(!pu(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function Lg(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ia(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Ao(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[s,i]=r.split("=");e[decodeURIComponent(s)]=decodeURIComponent(i)}}),e}function So(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function PT(t,e){const n=new DT(t,e);return n.subscribe.bind(n)}class DT{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");LT(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=oh),s.error===void 0&&(s.error=oh),s.complete===void 0&&(s.complete=oh);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function LT(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function oh(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Me(t){return t&&t._delegate?t._delegate:t}class rs{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Es="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OT{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new vT;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(MT(e))try{this.getOrInitializeService({instanceIdentifier:Es})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=Es){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Es){return this.instances.has(e)}getOptions(e=Es){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(i);r===a&&o.resolve(s)}return s}onInit(e,n){var r;const s=this.normalizeInstanceIdentifier(n),i=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;i.add(e),this.onInitCallbacks.set(s,i);const o=this.instances.get(s);return o&&e(o,s),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:jT(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Es){return this.component?this.component.multipleInstances?e:Es:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function jT(t){return t===Es?void 0:t}function MT(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VT{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new OT(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ye;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(ye||(ye={}));const UT={debug:ye.DEBUG,verbose:ye.VERBOSE,info:ye.INFO,warn:ye.WARN,error:ye.ERROR,silent:ye.SILENT},FT=ye.INFO,BT={[ye.DEBUG]:"log",[ye.VERBOSE]:"log",[ye.INFO]:"info",[ye.WARN]:"warn",[ye.ERROR]:"error"},zT=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=BT[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Df{constructor(e){this.name=e,this._logLevel=FT,this._logHandler=zT,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ye))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?UT[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ye.DEBUG,...e),this._logHandler(this,ye.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ye.VERBOSE,...e),this._logHandler(this,ye.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ye.INFO,...e),this._logHandler(this,ye.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ye.WARN,...e),this._logHandler(this,ye.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ye.ERROR,...e),this._logHandler(this,ye.ERROR,...e)}}const $T=(t,e)=>e.some(n=>t instanceof n);let Og,jg;function HT(){return Og||(Og=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function WT(){return jg||(jg=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const T_=new WeakMap,fd=new WeakMap,I_=new WeakMap,ah=new WeakMap,Lf=new WeakMap;function qT(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(Jr(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&T_.set(n,t)}).catch(()=>{}),Lf.set(e,t),e}function KT(t){if(fd.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});fd.set(t,e)}let pd={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return fd.get(t);if(e==="objectStoreNames")return t.objectStoreNames||I_.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Jr(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function GT(t){pd=t(pd)}function QT(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(lh(this),e,...n);return I_.set(r,e.sort?e.sort():[e]),Jr(r)}:WT().includes(t)?function(...e){return t.apply(lh(this),e),Jr(T_.get(this))}:function(...e){return Jr(t.apply(lh(this),e))}}function YT(t){return typeof t=="function"?QT(t):(t instanceof IDBTransaction&&KT(t),$T(t,HT())?new Proxy(t,pd):t)}function Jr(t){if(t instanceof IDBRequest)return qT(t);if(ah.has(t))return ah.get(t);const e=YT(t);return e!==t&&(ah.set(t,e),Lf.set(e,t)),e}const lh=t=>Lf.get(t);function XT(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),a=Jr(o);return r&&o.addEventListener("upgradeneeded",u=>{r(Jr(o.result),u.oldVersion,u.newVersion,Jr(o.transaction),u)}),n&&o.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),a.then(u=>{i&&u.addEventListener("close",()=>i()),s&&u.addEventListener("versionchange",c=>s(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}const JT=["get","getKey","getAll","getAllKeys","count"],ZT=["put","add","delete","clear"],uh=new Map;function Mg(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(uh.get(e))return uh.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=ZT.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||JT.includes(n)))return;const i=async function(o,...a){const u=this.transaction(o,s?"readwrite":"readonly");let c=u.store;return r&&(c=c.index(a.shift())),(await Promise.all([c[n](...a),s&&u.done]))[0]};return uh.set(e,i),i}GT(t=>({...t,get:(e,n,r)=>Mg(e,n)||t.get(e,n,r),has:(e,n)=>!!Mg(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eI{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(tI(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function tI(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const md="@firebase/app",Vg="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yr=new Df("@firebase/app"),nI="@firebase/app-compat",rI="@firebase/analytics-compat",sI="@firebase/analytics",iI="@firebase/app-check-compat",oI="@firebase/app-check",aI="@firebase/auth",lI="@firebase/auth-compat",uI="@firebase/database",cI="@firebase/data-connect",hI="@firebase/database-compat",dI="@firebase/functions",fI="@firebase/functions-compat",pI="@firebase/installations",mI="@firebase/installations-compat",gI="@firebase/messaging",yI="@firebase/messaging-compat",vI="@firebase/performance",_I="@firebase/performance-compat",wI="@firebase/remote-config",EI="@firebase/remote-config-compat",xI="@firebase/storage",TI="@firebase/storage-compat",II="@firebase/firestore",AI="@firebase/vertexai-preview",SI="@firebase/firestore-compat",kI="firebase",CI="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gd="[DEFAULT]",RI={[md]:"fire-core",[nI]:"fire-core-compat",[sI]:"fire-analytics",[rI]:"fire-analytics-compat",[oI]:"fire-app-check",[iI]:"fire-app-check-compat",[aI]:"fire-auth",[lI]:"fire-auth-compat",[uI]:"fire-rtdb",[cI]:"fire-data-connect",[hI]:"fire-rtdb-compat",[dI]:"fire-fn",[fI]:"fire-fn-compat",[pI]:"fire-iid",[mI]:"fire-iid-compat",[gI]:"fire-fcm",[yI]:"fire-fcm-compat",[vI]:"fire-perf",[_I]:"fire-perf-compat",[wI]:"fire-rc",[EI]:"fire-rc-compat",[xI]:"fire-gcs",[TI]:"fire-gcs-compat",[II]:"fire-fst",[SI]:"fire-fst-compat",[AI]:"fire-vertex","fire-js":"fire-js",[kI]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mu=new Map,bI=new Map,yd=new Map;function Ug(t,e){try{t.container.addComponent(e)}catch(n){yr.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function js(t){const e=t.name;if(yd.has(e))return yr.debug(`There were multiple attempts to register component ${e}.`),!1;yd.set(e,t);for(const n of mu.values())Ug(n,t);for(const n of bI.values())Ug(n,t);return!0}function Zu(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function zn(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NI={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Zr=new Ta("app","Firebase",NI);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PI{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new rs("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Zr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ks=CI;function A_(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:gd,automaticDataCollectionEnabled:!1},e),s=r.name;if(typeof s!="string"||!s)throw Zr.create("bad-app-name",{appName:String(s)});if(n||(n=w_()),!n)throw Zr.create("no-options");const i=mu.get(s);if(i){if(pu(n,i.options)&&pu(r,i.config))return i;throw Zr.create("duplicate-app",{appName:s})}const o=new VT(s);for(const u of yd.values())o.addComponent(u);const a=new PI(n,r,o);return mu.set(s,a),a}function Of(t=gd){const e=mu.get(t);if(!e&&t===gd&&w_())return A_();if(!e)throw Zr.create("no-app",{appName:t});return e}function qn(t,e,n){var r;let s=(r=RI[t])!==null&&r!==void 0?r:t;n&&(s+=`-${n}`);const i=s.match(/\s|\//),o=e.match(/\s|\//);if(i||o){const a=[`Unable to register library "${s}" with version "${e}":`];i&&a.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),yr.warn(a.join(" "));return}js(new rs(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DI="firebase-heartbeat-database",LI=1,ua="firebase-heartbeat-store";let ch=null;function S_(){return ch||(ch=XT(DI,LI,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(ua)}catch(n){console.warn(n)}}}}).catch(t=>{throw Zr.create("idb-open",{originalErrorMessage:t.message})})),ch}async function OI(t){try{const n=(await S_()).transaction(ua),r=await n.objectStore(ua).get(k_(t));return await n.done,r}catch(e){if(e instanceof Zn)yr.warn(e.message);else{const n=Zr.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});yr.warn(n.message)}}}async function Fg(t,e){try{const r=(await S_()).transaction(ua,"readwrite");await r.objectStore(ua).put(e,k_(t)),await r.done}catch(n){if(n instanceof Zn)yr.warn(n.message);else{const r=Zr.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});yr.warn(r.message)}}}function k_(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jI=1024,MI=30*24*60*60*1e3;class VI{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new FI(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=Bg();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i)?void 0:(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const a=new Date(o.date).valueOf();return Date.now()-a<=MI}),this._storage.overwrite(this._heartbeatsCache))}catch(r){yr.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Bg(),{heartbeatsToSend:r,unsentEntries:s}=UI(this._heartbeatsCache.heartbeats),i=fu(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return yr.warn(n),""}}}function Bg(){return new Date().toISOString().substring(0,10)}function UI(t,e=jI){const n=[];let r=t.slice();for(const s of t){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),zg(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),zg(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class FI{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return ST()?kT().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await OI(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return Fg(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return Fg(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function zg(t){return fu(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BI(t){js(new rs("platform-logger",e=>new eI(e),"PRIVATE")),js(new rs("heartbeat",e=>new VI(e),"PRIVATE")),qn(md,Vg,t),qn(md,Vg,"esm2017"),qn("fire-js","")}BI("");var zI="firebase",$I="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */qn(zI,$I,"app");function jf(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function C_(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const HI=C_,R_=new Ta("auth","Firebase",C_());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gu=new Df("@firebase/auth");function WI(t,...e){gu.logLevel<=ye.WARN&&gu.warn(`Auth (${Ks}): ${t}`,...e)}function Dl(t,...e){gu.logLevel<=ye.ERROR&&gu.error(`Auth (${Ks}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pn(t,...e){throw Mf(t,...e)}function Kn(t,...e){return Mf(t,...e)}function b_(t,e,n){const r=Object.assign(Object.assign({},HI()),{[e]:n});return new Ta("auth","Firebase",r).create(e,{appName:t.name})}function hr(t){return b_(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Mf(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return R_.create(t,...e)}function le(t,e,...n){if(!t)throw Mf(e,...n)}function or(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Dl(e),new Error(e)}function vr(t,e){t||or(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vd(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function qI(){return $g()==="http:"||$g()==="https:"}function $g(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KI(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(qI()||xT()||"connection"in navigator)?navigator.onLine:!0}function GI(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Aa{constructor(e,n){this.shortDelay=e,this.longDelay=n,vr(n>e,"Short delay should be less than long delay!"),this.isMobile=_T()||TT()}get(){return KI()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vf(t,e){vr(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N_{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;or("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;or("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;or("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QI={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YI=new Aa(3e4,6e4);function Tr(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function On(t,e,n,r,s={}){return P_(t,s,async()=>{let i={},o={};r&&(e==="GET"?o=r:i={body:JSON.stringify(r)});const a=Ia(Object.assign({key:t.config.apiKey},o)).slice(1),u=await t._getAdditionalHeaders();u["Content-Type"]="application/json",t.languageCode&&(u["X-Firebase-Locale"]=t.languageCode);const c=Object.assign({method:e,headers:u},i);return ET()||(c.referrerPolicy="no-referrer"),N_.fetch()(D_(t,t.config.apiHost,n,a),c)})}async function P_(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},QI),e);try{const s=new JI(t),i=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw fl(t,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const a=i.ok?o.errorMessage:o.error.message,[u,c]=a.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw fl(t,"credential-already-in-use",o);if(u==="EMAIL_EXISTS")throw fl(t,"email-already-in-use",o);if(u==="USER_DISABLED")throw fl(t,"user-disabled",o);const h=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw b_(t,h,c);Pn(t,h)}}catch(s){if(s instanceof Zn)throw s;Pn(t,"network-request-failed",{message:String(s)})}}async function Sa(t,e,n,r,s={}){const i=await On(t,e,n,r,s);return"mfaPendingCredential"in i&&Pn(t,"multi-factor-auth-required",{_serverResponse:i}),i}function D_(t,e,n,r){const s=`${e}${n}?${r}`;return t.config.emulator?Vf(t.config,s):`${t.config.apiScheme}://${s}`}function XI(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class JI{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Kn(this.auth,"network-request-failed")),YI.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function fl(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=Kn(t,e,r);return s.customData._tokenResponse=n,s}function Hg(t){return t!==void 0&&t.enterprise!==void 0}class ZI{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return XI(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}async function eA(t,e){return On(t,"GET","/v2/recaptchaConfig",Tr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tA(t,e){return On(t,"POST","/v1/accounts:delete",e)}async function L_(t,e){return On(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fo(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function nA(t,e=!1){const n=Me(t),r=await n.getIdToken(e),s=Uf(r);le(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,o=i==null?void 0:i.sign_in_provider;return{claims:s,token:r,authTime:Fo(hh(s.auth_time)),issuedAtTime:Fo(hh(s.iat)),expirationTime:Fo(hh(s.exp)),signInProvider:o||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function hh(t){return Number(t)*1e3}function Uf(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Dl("JWT malformed, contained fewer than 3 sections"),null;try{const s=y_(n);return s?JSON.parse(s):(Dl("Failed to decode base64 JWT payload"),null)}catch(s){return Dl("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function Wg(t){const e=Uf(t);return le(e,"internal-error"),le(typeof e.exp<"u","internal-error"),le(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ms(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Zn&&rA(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function rA({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sA{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const s=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _d{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Fo(this.lastLoginAt),this.creationTime=Fo(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yu(t){var e;const n=t.auth,r=await t.getIdToken(),s=await Ms(t,L_(n,{idToken:r}));le(s==null?void 0:s.users.length,n,"internal-error");const i=s.users[0];t._notifyReloadListener(i);const o=!((e=i.providerUserInfo)===null||e===void 0)&&e.length?O_(i.providerUserInfo):[],a=oA(t.providerData,o),u=t.isAnonymous,c=!(t.email&&i.passwordHash)&&!(a!=null&&a.length),h=u?c:!1,f={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:a,metadata:new _d(i.createdAt,i.lastLoginAt),isAnonymous:h};Object.assign(t,f)}async function iA(t){const e=Me(t);await yu(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function oA(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function O_(t){return t.map(e=>{var{providerId:n}=e,r=jf(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function aA(t,e){const n=await P_(t,{},async()=>{const r=Ia({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=t.config,o=D_(t,s,"/v1/token",`key=${i}`),a=await t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",N_.fetch()(o,{method:"POST",headers:a,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function lA(t,e){return On(t,"POST","/v2/accounts:revokeToken",Tr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ai{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){le(e.idToken,"internal-error"),le(typeof e.idToken<"u","internal-error"),le(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Wg(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){le(e.length!==0,"internal-error");const n=Wg(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(le(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:i}=await aA(e,n);this.updateTokensAndExpiration(r,s,Number(i))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:i}=n,o=new Ai;return r&&(le(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),s&&(le(typeof s=="string","internal-error",{appName:e}),o.accessToken=s),i&&(le(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Ai,this.toJSON())}_performRefresh(){return or("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function br(t,e){le(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class ar{constructor(e){var{uid:n,auth:r,stsTokenManager:s}=e,i=jf(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new sA(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new _d(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const n=await Ms(this,this.stsTokenManager.getToken(this.auth,e));return le(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return nA(this,e)}reload(){return iA(this)}_assign(e){this!==e&&(le(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new ar(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){le(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await yu(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(zn(this.auth.app))return Promise.reject(hr(this.auth));const e=await this.getIdToken();return await Ms(this,tA(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,s,i,o,a,u,c,h;const f=(r=n.displayName)!==null&&r!==void 0?r:void 0,d=(s=n.email)!==null&&s!==void 0?s:void 0,v=(i=n.phoneNumber)!==null&&i!==void 0?i:void 0,x=(o=n.photoURL)!==null&&o!==void 0?o:void 0,k=(a=n.tenantId)!==null&&a!==void 0?a:void 0,P=(u=n._redirectEventId)!==null&&u!==void 0?u:void 0,E=(c=n.createdAt)!==null&&c!==void 0?c:void 0,I=(h=n.lastLoginAt)!==null&&h!==void 0?h:void 0,{uid:C,emailVerified:b,isAnonymous:j,providerData:D,stsTokenManager:S}=n;le(C&&S,e,"internal-error");const y=Ai.fromJSON(this.name,S);le(typeof C=="string",e,"internal-error"),br(f,e.name),br(d,e.name),le(typeof b=="boolean",e,"internal-error"),le(typeof j=="boolean",e,"internal-error"),br(v,e.name),br(x,e.name),br(k,e.name),br(P,e.name),br(E,e.name),br(I,e.name);const p=new ar({uid:C,auth:e,email:d,emailVerified:b,displayName:f,isAnonymous:j,photoURL:x,phoneNumber:v,tenantId:k,stsTokenManager:y,createdAt:E,lastLoginAt:I});return D&&Array.isArray(D)&&(p.providerData=D.map(w=>Object.assign({},w))),P&&(p._redirectEventId=P),p}static async _fromIdTokenResponse(e,n,r=!1){const s=new Ai;s.updateFromServerResponse(n);const i=new ar({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await yu(i),i}static async _fromGetAccountInfoResponse(e,n,r){const s=n.users[0];le(s.localId!==void 0,"internal-error");const i=s.providerUserInfo!==void 0?O_(s.providerUserInfo):[],o=!(s.email&&s.passwordHash)&&!(i!=null&&i.length),a=new Ai;a.updateFromIdToken(r);const u=new ar({uid:s.localId,auth:e,stsTokenManager:a,isAnonymous:o}),c={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:i,metadata:new _d(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(i!=null&&i.length)};return Object.assign(u,c),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qg=new Map;function lr(t){vr(t instanceof Function,"Expected a class definition");let e=qg.get(t);return e?(vr(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,qg.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j_{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}j_.type="NONE";const Kg=j_;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ll(t,e,n){return`firebase:${t}:${e}:${n}`}class Si{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:i}=this.auth;this.fullUserKey=Ll(this.userKey,s.apiKey,i),this.fullPersistenceKey=Ll("persistence",s.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?ar._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Si(lr(Kg),e,r);const s=(await Promise.all(n.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let i=s[0]||lr(Kg);const o=Ll(r,e.config.apiKey,e.name);let a=null;for(const c of n)try{const h=await c._get(o);if(h){const f=ar._fromJSON(e,h);c!==i&&(a=f),i=c;break}}catch{}const u=s.filter(c=>c._shouldAllowMigration);return!i._shouldAllowMigration||!u.length?new Si(i,e,r):(i=u[0],a&&await i._set(o,a.toJSON()),await Promise.all(n.map(async c=>{if(c!==i)try{await c._remove(o)}catch{}})),new Si(i,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gg(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(F_(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(M_(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(z_(e))return"Blackberry";if($_(e))return"Webos";if(V_(e))return"Safari";if((e.includes("chrome/")||U_(e))&&!e.includes("edge/"))return"Chrome";if(B_(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function M_(t=Lt()){return/firefox\//i.test(t)}function V_(t=Lt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function U_(t=Lt()){return/crios\//i.test(t)}function F_(t=Lt()){return/iemobile/i.test(t)}function B_(t=Lt()){return/android/i.test(t)}function z_(t=Lt()){return/blackberry/i.test(t)}function $_(t=Lt()){return/webos/i.test(t)}function Ff(t=Lt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function uA(t=Lt()){var e;return Ff(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function cA(){return IT()&&document.documentMode===10}function H_(t=Lt()){return Ff(t)||B_(t)||$_(t)||z_(t)||/windows phone/i.test(t)||F_(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W_(t,e=[]){let n;switch(t){case"Browser":n=Gg(Lt());break;case"Worker":n=`${Gg(Lt())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Ks}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hA{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=i=>new Promise((o,a)=>{try{const u=e(i);o(u)}catch(u){a(u)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dA(t,e={}){return On(t,"GET","/v2/passwordPolicy",Tr(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fA=6;class pA{constructor(e){var n,r,s,i;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:fA,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(i=e.forceUpgradeOnSignin)!==null&&i!==void 0?i:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,s,i,o,a;const u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,u),this.validatePasswordCharacterOptions(e,u),u.isValid&&(u.isValid=(n=u.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),u.isValid&&(u.isValid=(r=u.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(s=u.containsLowercaseLetter)!==null&&s!==void 0?s:!0),u.isValid&&(u.isValid=(i=u.containsUppercaseLetter)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(o=u.containsNumericCharacter)!==null&&o!==void 0?o:!0),u.isValid&&(u.isValid=(a=u.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),u}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mA{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Qg(this),this.idTokenSubscription=new Qg(this),this.beforeStateQueue=new hA(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=R_,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=lr(n)),this._initializationPromise=this.queue(async()=>{var r,s;if(!this._deleted&&(this.persistenceManager=await Si.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await L_(this,{idToken:e}),r=await ar._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(zn(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let s=r,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=s==null?void 0:s._redirectEventId,u=await this.tryRedirectSignIn(e);(!o||o===a)&&(u!=null&&u.user)&&(s=u.user,i=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(s)}catch(o){s=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return le(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await yu(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=GI()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(zn(this.app))return Promise.reject(hr(this));const n=e?Me(e):null;return n&&le(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&le(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return zn(this.app)?Promise.reject(hr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return zn(this.app)?Promise.reject(hr(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(lr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await dA(this),n=new pA(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Ta("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await lA(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&lr(e)||this._popupRedirectResolver;le(n,this,"argument-error"),this.redirectPersistenceManager=await Si.create(this,[lr(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(le(a,this,"internal-error"),a.then(()=>{o||i(this.currentUser)}),typeof n=="function"){const u=e.addObserver(n,r,s);return()=>{o=!0,u()}}else{const u=e.addObserver(n);return()=>{o=!0,u()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return le(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=W_(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const s=await this._getAppCheckToken();return s&&(n["X-Firebase-AppCheck"]=s),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&WI(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function cs(t){return Me(t)}class Qg{constructor(e){this.auth=e,this.observer=null,this.addObserver=PT(n=>this.observer=n)}get next(){return le(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ec={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function gA(t){ec=t}function q_(t){return ec.loadJS(t)}function yA(){return ec.recaptchaEnterpriseScript}function vA(){return ec.gapiScript}function _A(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const wA="recaptcha-enterprise",EA="NO_RECAPTCHA";class xA{constructor(e){this.type=wA,this.auth=cs(e)}async verify(e="verify",n=!1){async function r(i){if(!n){if(i.tenantId==null&&i._agentRecaptchaConfig!=null)return i._agentRecaptchaConfig.siteKey;if(i.tenantId!=null&&i._tenantRecaptchaConfigs[i.tenantId]!==void 0)return i._tenantRecaptchaConfigs[i.tenantId].siteKey}return new Promise(async(o,a)=>{eA(i,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(u=>{if(u.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{const c=new ZI(u);return i.tenantId==null?i._agentRecaptchaConfig=c:i._tenantRecaptchaConfigs[i.tenantId]=c,o(c.siteKey)}}).catch(u=>{a(u)})})}function s(i,o,a){const u=window.grecaptcha;Hg(u)?u.enterprise.ready(()=>{u.enterprise.execute(i,{action:e}).then(c=>{o(c)}).catch(()=>{o(EA)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((i,o)=>{r(this.auth).then(a=>{if(!n&&Hg(window.grecaptcha))s(a,i,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let u=yA();u.length!==0&&(u+=a),q_(u).then(()=>{s(a,i,o)}).catch(c=>{o(c)})}}).catch(a=>{o(a)})})}}async function Yg(t,e,n,r=!1){const s=new xA(t);let i;try{i=await s.verify(n)}catch{i=await s.verify(n,!0)}const o=Object.assign({},e);return r?Object.assign(o,{captchaResp:i}):Object.assign(o,{captchaResponse:i}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function vu(t,e,n,r){var s;if(!((s=t._getRecaptchaConfig())===null||s===void 0)&&s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const i=await Yg(t,e,n,n==="getOobCode");return r(t,i)}else return r(t,e).catch(async i=>{if(i.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const o=await Yg(t,e,n,n==="getOobCode");return r(t,o)}else return Promise.reject(i)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TA(t,e){const n=Zu(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),i=n.getOptions();if(pu(i,e??{}))return s;Pn(s,"already-initialized")}return n.initialize({options:e})}function IA(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(lr);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function AA(t,e,n){const r=cs(t);le(r._canInitEmulator,r,"emulator-config-failed"),le(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!1,i=K_(e),{host:o,port:a}=SA(e),u=a===null?"":`:${a}`;r.config.emulator={url:`${i}//${o}${u}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})}),kA()}function K_(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function SA(t){const e=K_(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const i=s[1];return{host:i,port:Xg(r.substr(i.length+1))}}else{const[i,o]=r.split(":");return{host:i,port:Xg(o)}}}function Xg(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function kA(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bf{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return or("not implemented")}_getIdTokenResponse(e){return or("not implemented")}_linkToIdToken(e,n){return or("not implemented")}_getReauthenticationResolver(e){return or("not implemented")}}async function CA(t,e){return On(t,"POST","/v1/accounts:update",e)}async function RA(t,e){return On(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bA(t,e){return Sa(t,"POST","/v1/accounts:signInWithPassword",Tr(t,e))}async function NA(t,e){return On(t,"POST","/v1/accounts:sendOobCode",Tr(t,e))}async function PA(t,e){return NA(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function DA(t,e){return Sa(t,"POST","/v1/accounts:signInWithEmailLink",Tr(t,e))}async function LA(t,e){return Sa(t,"POST","/v1/accounts:signInWithEmailLink",Tr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ca extends Bf{constructor(e,n,r,s=null){super("password",r),this._email=e,this._password=n,this._tenantId=s}static _fromEmailAndPassword(e,n){return new ca(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new ca(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return vu(e,n,"signInWithPassword",bA);case"emailLink":return DA(e,{email:this._email,oobCode:this._password});default:Pn(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return vu(e,r,"signUpPassword",RA);case"emailLink":return LA(e,{idToken:n,email:this._email,oobCode:this._password});default:Pn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ki(t,e){return Sa(t,"POST","/v1/accounts:signInWithIdp",Tr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OA="http://localhost";class Vs extends Bf{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Vs(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Pn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s}=n,i=jf(n,["providerId","signInMethod"]);if(!r||!s)return null;const o=new Vs(r,s);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return ki(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,ki(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,ki(e,n)}buildRequest(){const e={requestUri:OA,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Ia(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jA(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function MA(t){const e=Ao(So(t)).link,n=e?Ao(So(e)).deep_link_id:null,r=Ao(So(t)).deep_link_id;return(r?Ao(So(r)).link:null)||r||n||e||t}class zf{constructor(e){var n,r,s,i,o,a;const u=Ao(So(e)),c=(n=u.apiKey)!==null&&n!==void 0?n:null,h=(r=u.oobCode)!==null&&r!==void 0?r:null,f=jA((s=u.mode)!==null&&s!==void 0?s:null);le(c&&h&&f,"argument-error"),this.apiKey=c,this.operation=f,this.code=h,this.continueUrl=(i=u.continueUrl)!==null&&i!==void 0?i:null,this.languageCode=(o=u.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(a=u.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){const n=MA(e);try{return new zf(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ki{constructor(){this.providerId=Ki.PROVIDER_ID}static credential(e,n){return ca._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=zf.parseLink(n);return le(r,"argument-error"),ca._fromEmailAndCode(e,r.code,r.tenantId)}}Ki.PROVIDER_ID="password";Ki.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Ki.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G_{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ka extends G_{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Or extends ka{constructor(){super("facebook.com")}static credential(e){return Vs._fromParams({providerId:Or.PROVIDER_ID,signInMethod:Or.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Or.credentialFromTaggedObject(e)}static credentialFromError(e){return Or.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Or.credential(e.oauthAccessToken)}catch{return null}}}Or.FACEBOOK_SIGN_IN_METHOD="facebook.com";Or.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jr extends ka{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Vs._fromParams({providerId:jr.PROVIDER_ID,signInMethod:jr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return jr.credentialFromTaggedObject(e)}static credentialFromError(e){return jr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return jr.credential(n,r)}catch{return null}}}jr.GOOGLE_SIGN_IN_METHOD="google.com";jr.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mr extends ka{constructor(){super("github.com")}static credential(e){return Vs._fromParams({providerId:Mr.PROVIDER_ID,signInMethod:Mr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Mr.credentialFromTaggedObject(e)}static credentialFromError(e){return Mr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Mr.credential(e.oauthAccessToken)}catch{return null}}}Mr.GITHUB_SIGN_IN_METHOD="github.com";Mr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vr extends ka{constructor(){super("twitter.com")}static credential(e,n){return Vs._fromParams({providerId:Vr.PROVIDER_ID,signInMethod:Vr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Vr.credentialFromTaggedObject(e)}static credentialFromError(e){return Vr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return Vr.credential(n,r)}catch{return null}}}Vr.TWITTER_SIGN_IN_METHOD="twitter.com";Vr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function VA(t,e){return Sa(t,"POST","/v1/accounts:signUp",Tr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Us{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const i=await ar._fromIdTokenResponse(e,r,s),o=Jg(r);return new Us({user:i,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=Jg(r);return new Us({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function Jg(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _u extends Zn{constructor(e,n,r,s){var i;super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,_u.prototype),this.customData={appName:e.name,tenantId:(i=e.tenantId)!==null&&i!==void 0?i:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new _u(e,n,r,s)}}function Q_(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?_u._fromErrorAndOperation(t,i,e,r):i})}async function UA(t,e,n=!1){const r=await Ms(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Us._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function FA(t,e,n=!1){const{auth:r}=t;if(zn(r.app))return Promise.reject(hr(r));const s="reauthenticate";try{const i=await Ms(t,Q_(r,s,e,t),n);le(i.idToken,r,"internal-error");const o=Uf(i.idToken);le(o,r,"internal-error");const{sub:a}=o;return le(t.uid===a,r,"user-mismatch"),Us._forOperation(t,s,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&Pn(r,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Y_(t,e,n=!1){if(zn(t.app))return Promise.reject(hr(t));const r="signIn",s=await Q_(t,r,e),i=await Us._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(i.user),i}async function BA(t,e){return Y_(cs(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function X_(t){const e=cs(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function zA(t,e,n){const r=cs(t);await vu(r,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",PA)}async function $A(t,e,n){if(zn(t.app))return Promise.reject(hr(t));const r=cs(t),o=await vu(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",VA).catch(u=>{throw u.code==="auth/password-does-not-meet-requirements"&&X_(t),u}),a=await Us._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(a.user),a}function wd(t,e,n){return zn(t.app)?Promise.reject(hr(t)):BA(Me(t),Ki.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&X_(t),r})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function HA(t,e){return On(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $f(t,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const r=Me(t),i={idToken:await r.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},o=await Ms(r,HA(r.auth,i));r.displayName=o.displayName||null,r.photoURL=o.photoUrl||null;const a=r.providerData.find(({providerId:u})=>u==="password");a&&(a.displayName=r.displayName,a.photoURL=r.photoURL),await r._updateTokensIfNecessary(o)}function WA(t,e){return qA(Me(t),null,e)}async function qA(t,e,n){const{auth:r}=t,i={idToken:await t.getIdToken(),returnSecureToken:!0};n&&(i.password=n);const o=await Ms(t,CA(r,i));await t._updateTokensIfNecessary(o,!0)}function KA(t,e,n,r){return Me(t).onIdTokenChanged(e,n,r)}function GA(t,e,n){return Me(t).beforeAuthStateChanged(e,n)}function QA(t,e,n,r){return Me(t).onAuthStateChanged(e,n,r)}function YA(t){return Me(t).signOut()}async function XA(t){return Me(t).delete()}const wu="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J_{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(wu,"1"),this.storage.removeItem(wu),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JA=1e3,ZA=10;class Z_ extends J_{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=H_(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,u)=>{this.notifyListeners(o,u)});return}const r=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},i=this.storage.getItem(r);cA()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,ZA):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},JA)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}Z_.type="LOCAL";const eS=Z_;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ew extends J_{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}ew.type="SESSION";const tw=ew;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tS(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tc{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new tc(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:i}=n.data,o=this.handlersMap[s];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const a=Array.from(o).map(async c=>c(n.origin,i)),u=await tS(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:u})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}tc.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hf(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nS{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let i,o;return new Promise((a,u)=>{const c=Hf("",20);s.port1.start();const h=setTimeout(()=>{u(new Error("unsupported_event"))},r);o={messageChannel:s,onMessage(f){const d=f;if(d.data.eventId===c)switch(d.data.status){case"ack":clearTimeout(h),i=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),a(d.data.response);break;default:clearTimeout(h),clearTimeout(i),u(new Error("invalid_response"));break}}},this.handlers.add(o),s.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:c,data:n},[s.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gn(){return window}function rS(t){Gn().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nw(){return typeof Gn().WorkerGlobalScope<"u"&&typeof Gn().importScripts=="function"}async function sS(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function iS(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function oS(){return nw()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rw="firebaseLocalStorageDb",aS=1,Eu="firebaseLocalStorage",sw="fbase_key";class Ca{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function nc(t,e){return t.transaction([Eu],e?"readwrite":"readonly").objectStore(Eu)}function lS(){const t=indexedDB.deleteDatabase(rw);return new Ca(t).toPromise()}function Ed(){const t=indexedDB.open(rw,aS);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Eu,{keyPath:sw})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Eu)?e(r):(r.close(),await lS(),e(await Ed()))})})}async function Zg(t,e,n){const r=nc(t,!0).put({[sw]:e,value:n});return new Ca(r).toPromise()}async function uS(t,e){const n=nc(t,!1).get(e),r=await new Ca(n).toPromise();return r===void 0?null:r.value}function ey(t,e){const n=nc(t,!0).delete(e);return new Ca(n).toPromise()}const cS=800,hS=3;class iw{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Ed(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>hS)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return nw()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=tc._getInstance(oS()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await sS(),!this.activeServiceWorker)return;this.sender=new nS(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||iS()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Ed();return await Zg(e,wu,"1"),await ey(e,wu),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>Zg(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>uS(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>ey(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const i=nc(s,!1).getAll();return new Ca(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:i}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(i)&&(this.notifyListeners(s,i),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),cS)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}iw.type="LOCAL";const dS=iw;new Aa(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fS(t,e){return e?lr(e):(le(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wf extends Bf{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return ki(e,this._buildIdpRequest())}_linkToIdToken(e,n){return ki(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return ki(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function pS(t){return Y_(t.auth,new Wf(t),t.bypassAuthState)}function mS(t){const{auth:e,user:n}=t;return le(n,e,"internal-error"),FA(n,new Wf(t),t.bypassAuthState)}async function gS(t){const{auth:e,user:n}=t;return le(n,e,"internal-error"),UA(n,new Wf(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ow{constructor(e,n,r,s,i=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:i,error:o,type:a}=e;if(o){this.reject(o);return}const u={auth:this.auth,requestUri:n,sessionId:r,tenantId:i||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(u))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return pS;case"linkViaPopup":case"linkViaRedirect":return gS;case"reauthViaPopup":case"reauthViaRedirect":return mS;default:Pn(this.auth,"internal-error")}}resolve(e){vr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){vr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yS=new Aa(2e3,1e4);class yi extends ow{constructor(e,n,r,s,i){super(e,n,s,i),this.provider=r,this.authWindow=null,this.pollId=null,yi.currentPopupAction&&yi.currentPopupAction.cancel(),yi.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return le(e,this.auth,"internal-error"),e}async onExecution(){vr(this.filter.length===1,"Popup operations only handle one event");const e=Hf();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Kn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Kn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,yi.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Kn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,yS.get())};e()}}yi.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vS="pendingRedirect",Ol=new Map;class _S extends ow{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Ol.get(this.auth._key());if(!e){try{const r=await wS(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Ol.set(this.auth._key(),e)}return this.bypassAuthState||Ol.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function wS(t,e){const n=TS(e),r=xS(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}function ES(t,e){Ol.set(t._key(),e)}function xS(t){return lr(t._redirectPersistence)}function TS(t){return Ll(vS,t.config.apiKey,t.name)}async function IS(t,e,n=!1){if(zn(t.app))return Promise.reject(hr(t));const r=cs(t),s=fS(r,e),o=await new _S(r,s,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AS=10*60*1e3;class SS{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!kS(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!aw(e)){const s=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(Kn(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=AS&&this.cachedEventUids.clear(),this.cachedEventUids.has(ty(e))}saveEventToCache(e){this.cachedEventUids.add(ty(e)),this.lastProcessedEventTime=Date.now()}}function ty(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function aw({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function kS(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return aw(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function CS(t,e={}){return On(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RS=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,bS=/^https?/;async function NS(t){if(t.config.emulator)return;const{authorizedDomains:e}=await CS(t);for(const n of e)try{if(PS(n))return}catch{}Pn(t,"unauthorized-domain")}function PS(t){const e=vd(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!bS.test(n))return!1;if(RS.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DS=new Aa(3e4,6e4);function ny(){const t=Gn().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function LS(t){return new Promise((e,n)=>{var r,s,i;function o(){ny(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{ny(),n(Kn(t,"network-request-failed"))},timeout:DS.get()})}if(!((s=(r=Gn().gapi)===null||r===void 0?void 0:r.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((i=Gn().gapi)===null||i===void 0)&&i.load)o();else{const a=_A("iframefcb");return Gn()[a]=()=>{gapi.load?o():n(Kn(t,"network-request-failed"))},q_(`${vA()}?onload=${a}`).catch(u=>n(u))}}).catch(e=>{throw jl=null,e})}let jl=null;function OS(t){return jl=jl||LS(t),jl}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jS=new Aa(5e3,15e3),MS="__/auth/iframe",VS="emulator/auth/iframe",US={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},FS=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function BS(t){const e=t.config;le(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Vf(e,VS):`https://${t.config.authDomain}/${MS}`,r={apiKey:e.apiKey,appName:t.name,v:Ks},s=FS.get(t.config.apiHost);s&&(r.eid=s);const i=t._getFrameworks();return i.length&&(r.fw=i.join(",")),`${n}?${Ia(r).slice(1)}`}async function zS(t){const e=await OS(t),n=Gn().gapi;return le(n,t,"internal-error"),e.open({where:document.body,url:BS(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:US,dontclear:!0},r=>new Promise(async(s,i)=>{await r.restyle({setHideOnLeave:!1});const o=Kn(t,"network-request-failed"),a=Gn().setTimeout(()=>{i(o)},jS.get());function u(){Gn().clearTimeout(a),s(r)}r.ping(u).then(u,()=>{i(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $S={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},HS=500,WS=600,qS="_blank",KS="http://localhost";class ry{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function GS(t,e,n,r=HS,s=WS){const i=Math.max((window.screen.availHeight-s)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const u=Object.assign(Object.assign({},$S),{width:r.toString(),height:s.toString(),top:i,left:o}),c=Lt().toLowerCase();n&&(a=U_(c)?qS:n),M_(c)&&(e=e||KS,u.scrollbars="yes");const h=Object.entries(u).reduce((d,[v,x])=>`${d}${v}=${x},`,"");if(uA(c)&&a!=="_self")return QS(e||"",a),new ry(null);const f=window.open(e||"",a,h);le(f,t,"popup-blocked");try{f.focus()}catch{}return new ry(f)}function QS(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YS="__/auth/handler",XS="emulator/auth/handler",JS=encodeURIComponent("fac");async function sy(t,e,n,r,s,i){le(t.config.authDomain,t,"auth-domain-config-required"),le(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Ks,eventId:s};if(e instanceof G_){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",NT(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[h,f]of Object.entries({}))o[h]=f}if(e instanceof ka){const h=e.getScopes().filter(f=>f!=="");h.length>0&&(o.scopes=h.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const h of Object.keys(a))a[h]===void 0&&delete a[h];const u=await t._getAppCheckToken(),c=u?`#${JS}=${encodeURIComponent(u)}`:"";return`${ZS(t)}?${Ia(a).slice(1)}${c}`}function ZS({config:t}){return t.emulator?Vf(t,XS):`https://${t.authDomain}/${YS}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dh="webStorageSupport";class ek{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=tw,this._completeRedirectFn=IS,this._overrideRedirectResult=ES}async _openPopup(e,n,r,s){var i;vr((i=this.eventManagers[e._key()])===null||i===void 0?void 0:i.manager,"_initialize() not called before _openPopup()");const o=await sy(e,n,r,vd(),s);return GS(e,o,Hf())}async _openRedirect(e,n,r,s){await this._originValidation(e);const i=await sy(e,n,r,vd(),s);return rS(i),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:i}=this.eventManagers[n];return s?Promise.resolve(s):(vr(i,"If manager is not set, promise should be"),i)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await zS(e),r=new SS(e);return n.register("authEvent",s=>(le(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(dh,{type:dh},s=>{var i;const o=(i=s==null?void 0:s[0])===null||i===void 0?void 0:i[dh];o!==void 0&&n(!!o),Pn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=NS(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return H_()||V_()||Ff()}}const tk=ek;var iy="@firebase/auth",oy="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nk{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){le(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rk(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function sk(t){js(new rs("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;le(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const u={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:W_(t)},c=new mA(r,s,i,u);return IA(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),js(new rs("auth-internal",e=>{const n=cs(e.getProvider("auth").getImmediate());return(r=>new nk(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),qn(iy,oy,rk(t)),qn(iy,oy,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ik=5*60,ok=E_("authIdTokenMaxAge")||ik;let ay=null;const ak=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>ok)return;const s=n==null?void 0:n.token;ay!==s&&(ay=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function lk(t=Of()){const e=Zu(t,"auth");if(e.isInitialized())return e.getImmediate();const n=TA(t,{popupRedirectResolver:tk,persistence:[dS,eS,tw]}),r=E_("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(r,location.origin);if(location.origin===i.origin){const o=ak(i.toString());GA(n,o,()=>o(n.currentUser)),KA(n,a=>o(a))}}const s=v_("auth");return s&&AA(n,`http://${s}`),n}function uk(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}gA({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const i=Kn("internal-error");i.customData=s,n(i)},r.type="text/javascript",r.charset="UTF-8",uk().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});sk("Browser");var ly=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Rs,lw;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(S,y){function p(){}p.prototype=y.prototype,S.D=y.prototype,S.prototype=new p,S.prototype.constructor=S,S.C=function(w,A,R){for(var T=Array(arguments.length-2),M=2;M<arguments.length;M++)T[M-2]=arguments[M];return y.prototype[A].apply(w,T)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(S,y,p){p||(p=0);var w=Array(16);if(typeof y=="string")for(var A=0;16>A;++A)w[A]=y.charCodeAt(p++)|y.charCodeAt(p++)<<8|y.charCodeAt(p++)<<16|y.charCodeAt(p++)<<24;else for(A=0;16>A;++A)w[A]=y[p++]|y[p++]<<8|y[p++]<<16|y[p++]<<24;y=S.g[0],p=S.g[1],A=S.g[2];var R=S.g[3],T=y+(R^p&(A^R))+w[0]+3614090360&4294967295;y=p+(T<<7&4294967295|T>>>25),T=R+(A^y&(p^A))+w[1]+3905402710&4294967295,R=y+(T<<12&4294967295|T>>>20),T=A+(p^R&(y^p))+w[2]+606105819&4294967295,A=R+(T<<17&4294967295|T>>>15),T=p+(y^A&(R^y))+w[3]+3250441966&4294967295,p=A+(T<<22&4294967295|T>>>10),T=y+(R^p&(A^R))+w[4]+4118548399&4294967295,y=p+(T<<7&4294967295|T>>>25),T=R+(A^y&(p^A))+w[5]+1200080426&4294967295,R=y+(T<<12&4294967295|T>>>20),T=A+(p^R&(y^p))+w[6]+2821735955&4294967295,A=R+(T<<17&4294967295|T>>>15),T=p+(y^A&(R^y))+w[7]+4249261313&4294967295,p=A+(T<<22&4294967295|T>>>10),T=y+(R^p&(A^R))+w[8]+1770035416&4294967295,y=p+(T<<7&4294967295|T>>>25),T=R+(A^y&(p^A))+w[9]+2336552879&4294967295,R=y+(T<<12&4294967295|T>>>20),T=A+(p^R&(y^p))+w[10]+4294925233&4294967295,A=R+(T<<17&4294967295|T>>>15),T=p+(y^A&(R^y))+w[11]+2304563134&4294967295,p=A+(T<<22&4294967295|T>>>10),T=y+(R^p&(A^R))+w[12]+1804603682&4294967295,y=p+(T<<7&4294967295|T>>>25),T=R+(A^y&(p^A))+w[13]+4254626195&4294967295,R=y+(T<<12&4294967295|T>>>20),T=A+(p^R&(y^p))+w[14]+2792965006&4294967295,A=R+(T<<17&4294967295|T>>>15),T=p+(y^A&(R^y))+w[15]+1236535329&4294967295,p=A+(T<<22&4294967295|T>>>10),T=y+(A^R&(p^A))+w[1]+4129170786&4294967295,y=p+(T<<5&4294967295|T>>>27),T=R+(p^A&(y^p))+w[6]+3225465664&4294967295,R=y+(T<<9&4294967295|T>>>23),T=A+(y^p&(R^y))+w[11]+643717713&4294967295,A=R+(T<<14&4294967295|T>>>18),T=p+(R^y&(A^R))+w[0]+3921069994&4294967295,p=A+(T<<20&4294967295|T>>>12),T=y+(A^R&(p^A))+w[5]+3593408605&4294967295,y=p+(T<<5&4294967295|T>>>27),T=R+(p^A&(y^p))+w[10]+38016083&4294967295,R=y+(T<<9&4294967295|T>>>23),T=A+(y^p&(R^y))+w[15]+3634488961&4294967295,A=R+(T<<14&4294967295|T>>>18),T=p+(R^y&(A^R))+w[4]+3889429448&4294967295,p=A+(T<<20&4294967295|T>>>12),T=y+(A^R&(p^A))+w[9]+568446438&4294967295,y=p+(T<<5&4294967295|T>>>27),T=R+(p^A&(y^p))+w[14]+3275163606&4294967295,R=y+(T<<9&4294967295|T>>>23),T=A+(y^p&(R^y))+w[3]+4107603335&4294967295,A=R+(T<<14&4294967295|T>>>18),T=p+(R^y&(A^R))+w[8]+1163531501&4294967295,p=A+(T<<20&4294967295|T>>>12),T=y+(A^R&(p^A))+w[13]+2850285829&4294967295,y=p+(T<<5&4294967295|T>>>27),T=R+(p^A&(y^p))+w[2]+4243563512&4294967295,R=y+(T<<9&4294967295|T>>>23),T=A+(y^p&(R^y))+w[7]+1735328473&4294967295,A=R+(T<<14&4294967295|T>>>18),T=p+(R^y&(A^R))+w[12]+2368359562&4294967295,p=A+(T<<20&4294967295|T>>>12),T=y+(p^A^R)+w[5]+4294588738&4294967295,y=p+(T<<4&4294967295|T>>>28),T=R+(y^p^A)+w[8]+2272392833&4294967295,R=y+(T<<11&4294967295|T>>>21),T=A+(R^y^p)+w[11]+1839030562&4294967295,A=R+(T<<16&4294967295|T>>>16),T=p+(A^R^y)+w[14]+4259657740&4294967295,p=A+(T<<23&4294967295|T>>>9),T=y+(p^A^R)+w[1]+2763975236&4294967295,y=p+(T<<4&4294967295|T>>>28),T=R+(y^p^A)+w[4]+1272893353&4294967295,R=y+(T<<11&4294967295|T>>>21),T=A+(R^y^p)+w[7]+4139469664&4294967295,A=R+(T<<16&4294967295|T>>>16),T=p+(A^R^y)+w[10]+3200236656&4294967295,p=A+(T<<23&4294967295|T>>>9),T=y+(p^A^R)+w[13]+681279174&4294967295,y=p+(T<<4&4294967295|T>>>28),T=R+(y^p^A)+w[0]+3936430074&4294967295,R=y+(T<<11&4294967295|T>>>21),T=A+(R^y^p)+w[3]+3572445317&4294967295,A=R+(T<<16&4294967295|T>>>16),T=p+(A^R^y)+w[6]+76029189&4294967295,p=A+(T<<23&4294967295|T>>>9),T=y+(p^A^R)+w[9]+3654602809&4294967295,y=p+(T<<4&4294967295|T>>>28),T=R+(y^p^A)+w[12]+3873151461&4294967295,R=y+(T<<11&4294967295|T>>>21),T=A+(R^y^p)+w[15]+530742520&4294967295,A=R+(T<<16&4294967295|T>>>16),T=p+(A^R^y)+w[2]+3299628645&4294967295,p=A+(T<<23&4294967295|T>>>9),T=y+(A^(p|~R))+w[0]+4096336452&4294967295,y=p+(T<<6&4294967295|T>>>26),T=R+(p^(y|~A))+w[7]+1126891415&4294967295,R=y+(T<<10&4294967295|T>>>22),T=A+(y^(R|~p))+w[14]+2878612391&4294967295,A=R+(T<<15&4294967295|T>>>17),T=p+(R^(A|~y))+w[5]+4237533241&4294967295,p=A+(T<<21&4294967295|T>>>11),T=y+(A^(p|~R))+w[12]+1700485571&4294967295,y=p+(T<<6&4294967295|T>>>26),T=R+(p^(y|~A))+w[3]+2399980690&4294967295,R=y+(T<<10&4294967295|T>>>22),T=A+(y^(R|~p))+w[10]+4293915773&4294967295,A=R+(T<<15&4294967295|T>>>17),T=p+(R^(A|~y))+w[1]+2240044497&4294967295,p=A+(T<<21&4294967295|T>>>11),T=y+(A^(p|~R))+w[8]+1873313359&4294967295,y=p+(T<<6&4294967295|T>>>26),T=R+(p^(y|~A))+w[15]+4264355552&4294967295,R=y+(T<<10&4294967295|T>>>22),T=A+(y^(R|~p))+w[6]+2734768916&4294967295,A=R+(T<<15&4294967295|T>>>17),T=p+(R^(A|~y))+w[13]+1309151649&4294967295,p=A+(T<<21&4294967295|T>>>11),T=y+(A^(p|~R))+w[4]+4149444226&4294967295,y=p+(T<<6&4294967295|T>>>26),T=R+(p^(y|~A))+w[11]+3174756917&4294967295,R=y+(T<<10&4294967295|T>>>22),T=A+(y^(R|~p))+w[2]+718787259&4294967295,A=R+(T<<15&4294967295|T>>>17),T=p+(R^(A|~y))+w[9]+3951481745&4294967295,S.g[0]=S.g[0]+y&4294967295,S.g[1]=S.g[1]+(A+(T<<21&4294967295|T>>>11))&4294967295,S.g[2]=S.g[2]+A&4294967295,S.g[3]=S.g[3]+R&4294967295}r.prototype.u=function(S,y){y===void 0&&(y=S.length);for(var p=y-this.blockSize,w=this.B,A=this.h,R=0;R<y;){if(A==0)for(;R<=p;)s(this,S,R),R+=this.blockSize;if(typeof S=="string"){for(;R<y;)if(w[A++]=S.charCodeAt(R++),A==this.blockSize){s(this,w),A=0;break}}else for(;R<y;)if(w[A++]=S[R++],A==this.blockSize){s(this,w),A=0;break}}this.h=A,this.o+=y},r.prototype.v=function(){var S=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);S[0]=128;for(var y=1;y<S.length-8;++y)S[y]=0;var p=8*this.o;for(y=S.length-8;y<S.length;++y)S[y]=p&255,p/=256;for(this.u(S),S=Array(16),y=p=0;4>y;++y)for(var w=0;32>w;w+=8)S[p++]=this.g[y]>>>w&255;return S};function i(S,y){var p=a;return Object.prototype.hasOwnProperty.call(p,S)?p[S]:p[S]=y(S)}function o(S,y){this.h=y;for(var p=[],w=!0,A=S.length-1;0<=A;A--){var R=S[A]|0;w&&R==y||(p[A]=R,w=!1)}this.g=p}var a={};function u(S){return-128<=S&&128>S?i(S,function(y){return new o([y|0],0>y?-1:0)}):new o([S|0],0>S?-1:0)}function c(S){if(isNaN(S)||!isFinite(S))return f;if(0>S)return P(c(-S));for(var y=[],p=1,w=0;S>=p;w++)y[w]=S/p|0,p*=4294967296;return new o(y,0)}function h(S,y){if(S.length==0)throw Error("number format error: empty string");if(y=y||10,2>y||36<y)throw Error("radix out of range: "+y);if(S.charAt(0)=="-")return P(h(S.substring(1),y));if(0<=S.indexOf("-"))throw Error('number format error: interior "-" character');for(var p=c(Math.pow(y,8)),w=f,A=0;A<S.length;A+=8){var R=Math.min(8,S.length-A),T=parseInt(S.substring(A,A+R),y);8>R?(R=c(Math.pow(y,R)),w=w.j(R).add(c(T))):(w=w.j(p),w=w.add(c(T)))}return w}var f=u(0),d=u(1),v=u(16777216);t=o.prototype,t.m=function(){if(k(this))return-P(this).m();for(var S=0,y=1,p=0;p<this.g.length;p++){var w=this.i(p);S+=(0<=w?w:4294967296+w)*y,y*=4294967296}return S},t.toString=function(S){if(S=S||10,2>S||36<S)throw Error("radix out of range: "+S);if(x(this))return"0";if(k(this))return"-"+P(this).toString(S);for(var y=c(Math.pow(S,6)),p=this,w="";;){var A=b(p,y).g;p=E(p,A.j(y));var R=((0<p.g.length?p.g[0]:p.h)>>>0).toString(S);if(p=A,x(p))return R+w;for(;6>R.length;)R="0"+R;w=R+w}},t.i=function(S){return 0>S?0:S<this.g.length?this.g[S]:this.h};function x(S){if(S.h!=0)return!1;for(var y=0;y<S.g.length;y++)if(S.g[y]!=0)return!1;return!0}function k(S){return S.h==-1}t.l=function(S){return S=E(this,S),k(S)?-1:x(S)?0:1};function P(S){for(var y=S.g.length,p=[],w=0;w<y;w++)p[w]=~S.g[w];return new o(p,~S.h).add(d)}t.abs=function(){return k(this)?P(this):this},t.add=function(S){for(var y=Math.max(this.g.length,S.g.length),p=[],w=0,A=0;A<=y;A++){var R=w+(this.i(A)&65535)+(S.i(A)&65535),T=(R>>>16)+(this.i(A)>>>16)+(S.i(A)>>>16);w=T>>>16,R&=65535,T&=65535,p[A]=T<<16|R}return new o(p,p[p.length-1]&-2147483648?-1:0)};function E(S,y){return S.add(P(y))}t.j=function(S){if(x(this)||x(S))return f;if(k(this))return k(S)?P(this).j(P(S)):P(P(this).j(S));if(k(S))return P(this.j(P(S)));if(0>this.l(v)&&0>S.l(v))return c(this.m()*S.m());for(var y=this.g.length+S.g.length,p=[],w=0;w<2*y;w++)p[w]=0;for(w=0;w<this.g.length;w++)for(var A=0;A<S.g.length;A++){var R=this.i(w)>>>16,T=this.i(w)&65535,M=S.i(A)>>>16,z=S.i(A)&65535;p[2*w+2*A]+=T*z,I(p,2*w+2*A),p[2*w+2*A+1]+=R*z,I(p,2*w+2*A+1),p[2*w+2*A+1]+=T*M,I(p,2*w+2*A+1),p[2*w+2*A+2]+=R*M,I(p,2*w+2*A+2)}for(w=0;w<y;w++)p[w]=p[2*w+1]<<16|p[2*w];for(w=y;w<2*y;w++)p[w]=0;return new o(p,0)};function I(S,y){for(;(S[y]&65535)!=S[y];)S[y+1]+=S[y]>>>16,S[y]&=65535,y++}function C(S,y){this.g=S,this.h=y}function b(S,y){if(x(y))throw Error("division by zero");if(x(S))return new C(f,f);if(k(S))return y=b(P(S),y),new C(P(y.g),P(y.h));if(k(y))return y=b(S,P(y)),new C(P(y.g),y.h);if(30<S.g.length){if(k(S)||k(y))throw Error("slowDivide_ only works with positive integers.");for(var p=d,w=y;0>=w.l(S);)p=j(p),w=j(w);var A=D(p,1),R=D(w,1);for(w=D(w,2),p=D(p,2);!x(w);){var T=R.add(w);0>=T.l(S)&&(A=A.add(p),R=T),w=D(w,1),p=D(p,1)}return y=E(S,A.j(y)),new C(A,y)}for(A=f;0<=S.l(y);){for(p=Math.max(1,Math.floor(S.m()/y.m())),w=Math.ceil(Math.log(p)/Math.LN2),w=48>=w?1:Math.pow(2,w-48),R=c(p),T=R.j(y);k(T)||0<T.l(S);)p-=w,R=c(p),T=R.j(y);x(R)&&(R=d),A=A.add(R),S=E(S,T)}return new C(A,S)}t.A=function(S){return b(this,S).h},t.and=function(S){for(var y=Math.max(this.g.length,S.g.length),p=[],w=0;w<y;w++)p[w]=this.i(w)&S.i(w);return new o(p,this.h&S.h)},t.or=function(S){for(var y=Math.max(this.g.length,S.g.length),p=[],w=0;w<y;w++)p[w]=this.i(w)|S.i(w);return new o(p,this.h|S.h)},t.xor=function(S){for(var y=Math.max(this.g.length,S.g.length),p=[],w=0;w<y;w++)p[w]=this.i(w)^S.i(w);return new o(p,this.h^S.h)};function j(S){for(var y=S.g.length+1,p=[],w=0;w<y;w++)p[w]=S.i(w)<<1|S.i(w-1)>>>31;return new o(p,S.h)}function D(S,y){var p=y>>5;y%=32;for(var w=S.g.length-p,A=[],R=0;R<w;R++)A[R]=0<y?S.i(R+p)>>>y|S.i(R+p+1)<<32-y:S.i(R+p);return new o(A,S.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,lw=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=c,o.fromString=h,Rs=o}).apply(typeof ly<"u"?ly:typeof self<"u"?self:typeof window<"u"?window:{});var pl=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var uw,ko,cw,Ml,xd,hw,dw,fw;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(l,m,_){return l==Array.prototype||l==Object.prototype||(l[m]=_.value),l};function n(l){l=[typeof globalThis=="object"&&globalThis,l,typeof window=="object"&&window,typeof self=="object"&&self,typeof pl=="object"&&pl];for(var m=0;m<l.length;++m){var _=l[m];if(_&&_.Math==Math)return _}throw Error("Cannot find global object")}var r=n(this);function s(l,m){if(m)e:{var _=r;l=l.split(".");for(var N=0;N<l.length-1;N++){var $=l[N];if(!($ in _))break e;_=_[$]}l=l[l.length-1],N=_[l],m=m(N),m!=N&&m!=null&&e(_,l,{configurable:!0,writable:!0,value:m})}}function i(l,m){l instanceof String&&(l+="");var _=0,N=!1,$={next:function(){if(!N&&_<l.length){var W=_++;return{value:m(W,l[W]),done:!1}}return N=!0,{done:!0,value:void 0}}};return $[Symbol.iterator]=function(){return $},$}s("Array.prototype.values",function(l){return l||function(){return i(this,function(m,_){return _})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function u(l){var m=typeof l;return m=m!="object"?m:l?Array.isArray(l)?"array":m:"null",m=="array"||m=="object"&&typeof l.length=="number"}function c(l){var m=typeof l;return m=="object"&&l!=null||m=="function"}function h(l,m,_){return l.call.apply(l.bind,arguments)}function f(l,m,_){if(!l)throw Error();if(2<arguments.length){var N=Array.prototype.slice.call(arguments,2);return function(){var $=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply($,N),l.apply(m,$)}}return function(){return l.apply(m,arguments)}}function d(l,m,_){return d=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:f,d.apply(null,arguments)}function v(l,m){var _=Array.prototype.slice.call(arguments,1);return function(){var N=_.slice();return N.push.apply(N,arguments),l.apply(this,N)}}function x(l,m){function _(){}_.prototype=m.prototype,l.aa=m.prototype,l.prototype=new _,l.prototype.constructor=l,l.Qb=function(N,$,W){for(var Z=Array(arguments.length-2),Ce=2;Ce<arguments.length;Ce++)Z[Ce-2]=arguments[Ce];return m.prototype[$].apply(N,Z)}}function k(l){const m=l.length;if(0<m){const _=Array(m);for(let N=0;N<m;N++)_[N]=l[N];return _}return[]}function P(l,m){for(let _=1;_<arguments.length;_++){const N=arguments[_];if(u(N)){const $=l.length||0,W=N.length||0;l.length=$+W;for(let Z=0;Z<W;Z++)l[$+Z]=N[Z]}else l.push(N)}}class E{constructor(m,_){this.i=m,this.j=_,this.h=0,this.g=null}get(){let m;return 0<this.h?(this.h--,m=this.g,this.g=m.next,m.next=null):m=this.i(),m}}function I(l){return/^[\s\xa0]*$/.test(l)}function C(){var l=a.navigator;return l&&(l=l.userAgent)?l:""}function b(l){return b[" "](l),l}b[" "]=function(){};var j=C().indexOf("Gecko")!=-1&&!(C().toLowerCase().indexOf("webkit")!=-1&&C().indexOf("Edge")==-1)&&!(C().indexOf("Trident")!=-1||C().indexOf("MSIE")!=-1)&&C().indexOf("Edge")==-1;function D(l,m,_){for(const N in l)m.call(_,l[N],N,l)}function S(l,m){for(const _ in l)m.call(void 0,l[_],_,l)}function y(l){const m={};for(const _ in l)m[_]=l[_];return m}const p="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function w(l,m){let _,N;for(let $=1;$<arguments.length;$++){N=arguments[$];for(_ in N)l[_]=N[_];for(let W=0;W<p.length;W++)_=p[W],Object.prototype.hasOwnProperty.call(N,_)&&(l[_]=N[_])}}function A(l){var m=1;l=l.split(":");const _=[];for(;0<m&&l.length;)_.push(l.shift()),m--;return l.length&&_.push(l.join(":")),_}function R(l){a.setTimeout(()=>{throw l},0)}function T(){var l=V;let m=null;return l.g&&(m=l.g,l.g=l.g.next,l.g||(l.h=null),m.next=null),m}class M{constructor(){this.h=this.g=null}add(m,_){const N=z.get();N.set(m,_),this.h?this.h.next=N:this.g=N,this.h=N}}var z=new E(()=>new O,l=>l.reset());class O{constructor(){this.next=this.g=this.h=null}set(m,_){this.h=m,this.g=_,this.next=null}reset(){this.next=this.g=this.h=null}}let L,U=!1,V=new M,H=()=>{const l=a.Promise.resolve(void 0);L=()=>{l.then(J)}};var J=()=>{for(var l;l=T();){try{l.h.call(l.g)}catch(_){R(_)}var m=z;m.j(l),100>m.h&&(m.h++,l.next=m.g,m.g=l)}U=!1};function K(){this.s=this.s,this.C=this.C}K.prototype.s=!1,K.prototype.ma=function(){this.s||(this.s=!0,this.N())},K.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Y(l,m){this.type=l,this.g=this.target=m,this.defaultPrevented=!1}Y.prototype.h=function(){this.defaultPrevented=!0};var F=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var l=!1,m=Object.defineProperty({},"passive",{get:function(){l=!0}});try{const _=()=>{};a.addEventListener("test",_,m),a.removeEventListener("test",_,m)}catch{}return l}();function B(l,m){if(Y.call(this,l?l.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,l){var _=this.type=l.type,N=l.changedTouches&&l.changedTouches.length?l.changedTouches[0]:null;if(this.target=l.target||l.srcElement,this.g=m,m=l.relatedTarget){if(j){e:{try{b(m.nodeName);var $=!0;break e}catch{}$=!1}$||(m=null)}}else _=="mouseover"?m=l.fromElement:_=="mouseout"&&(m=l.toElement);this.relatedTarget=m,N?(this.clientX=N.clientX!==void 0?N.clientX:N.pageX,this.clientY=N.clientY!==void 0?N.clientY:N.pageY,this.screenX=N.screenX||0,this.screenY=N.screenY||0):(this.clientX=l.clientX!==void 0?l.clientX:l.pageX,this.clientY=l.clientY!==void 0?l.clientY:l.pageY,this.screenX=l.screenX||0,this.screenY=l.screenY||0),this.button=l.button,this.key=l.key||"",this.ctrlKey=l.ctrlKey,this.altKey=l.altKey,this.shiftKey=l.shiftKey,this.metaKey=l.metaKey,this.pointerId=l.pointerId||0,this.pointerType=typeof l.pointerType=="string"?l.pointerType:ee[l.pointerType]||"",this.state=l.state,this.i=l,l.defaultPrevented&&B.aa.h.call(this)}}x(B,Y);var ee={2:"touch",3:"pen",4:"mouse"};B.prototype.h=function(){B.aa.h.call(this);var l=this.i;l.preventDefault?l.preventDefault():l.returnValue=!1};var ae="closure_listenable_"+(1e6*Math.random()|0),ie=0;function oe(l,m,_,N,$){this.listener=l,this.proxy=null,this.src=m,this.type=_,this.capture=!!N,this.ha=$,this.key=++ie,this.da=this.fa=!1}function de(l){l.da=!0,l.listener=null,l.proxy=null,l.src=null,l.ha=null}function ge(l){this.src=l,this.g={},this.h=0}ge.prototype.add=function(l,m,_,N,$){var W=l.toString();l=this.g[W],l||(l=this.g[W]=[],this.h++);var Z=xt(l,m,N,$);return-1<Z?(m=l[Z],_||(m.fa=!1)):(m=new oe(m,this.src,W,!!N,$),m.fa=_,l.push(m)),m};function pe(l,m){var _=m.type;if(_ in l.g){var N=l.g[_],$=Array.prototype.indexOf.call(N,m,void 0),W;(W=0<=$)&&Array.prototype.splice.call(N,$,1),W&&(de(m),l.g[_].length==0&&(delete l.g[_],l.h--))}}function xt(l,m,_,N){for(var $=0;$<l.length;++$){var W=l[$];if(!W.da&&W.listener==m&&W.capture==!!_&&W.ha==N)return $}return-1}var Ze="closure_lm_"+(1e6*Math.random()|0),xe={};function Fe(l,m,_,N,$){if(Array.isArray(m)){for(var W=0;W<m.length;W++)Fe(l,m[W],_,N,$);return null}return _=Tt(_),l&&l[ae]?l.K(m,_,c(N)?!!N.capture:!1,$):Te(l,m,_,!1,N,$)}function Te(l,m,_,N,$,W){if(!m)throw Error("Invalid event type");var Z=c($)?!!$.capture:!!$,Ce=Ve(l);if(Ce||(l[Ze]=Ce=new ge(l)),_=Ce.add(m,_,N,Z,W),_.proxy)return _;if(N=Ie(),_.proxy=N,N.src=l,N.listener=_,l.addEventListener)F||($=Z),$===void 0&&($=!1),l.addEventListener(m.toString(),N,$);else if(l.attachEvent)l.attachEvent(Be(m.toString()),N);else if(l.addListener&&l.removeListener)l.addListener(N);else throw Error("addEventListener and attachEvent are unavailable.");return _}function Ie(){function l(_){return m.call(l.src,l.listener,_)}const m=Ot;return l}function et(l,m,_,N,$){if(Array.isArray(m))for(var W=0;W<m.length;W++)et(l,m[W],_,N,$);else N=c(N)?!!N.capture:!!N,_=Tt(_),l&&l[ae]?(l=l.i,m=String(m).toString(),m in l.g&&(W=l.g[m],_=xt(W,_,N,$),-1<_&&(de(W[_]),Array.prototype.splice.call(W,_,1),W.length==0&&(delete l.g[m],l.h--)))):l&&(l=Ve(l))&&(m=l.g[m.toString()],l=-1,m&&(l=xt(m,_,N,$)),(_=-1<l?m[l]:null)&&it(_))}function it(l){if(typeof l!="number"&&l&&!l.da){var m=l.src;if(m&&m[ae])pe(m.i,l);else{var _=l.type,N=l.proxy;m.removeEventListener?m.removeEventListener(_,N,l.capture):m.detachEvent?m.detachEvent(Be(_),N):m.addListener&&m.removeListener&&m.removeListener(N),(_=Ve(m))?(pe(_,l),_.h==0&&(_.src=null,m[Ze]=null)):de(l)}}}function Be(l){return l in xe?xe[l]:xe[l]="on"+l}function Ot(l,m){if(l.da)l=!0;else{m=new B(m,this);var _=l.listener,N=l.ha||l.src;l.fa&&it(l),l=_.call(N,m)}return l}function Ve(l){return l=l[Ze],l instanceof ge?l:null}var Ae="__closure_events_fn_"+(1e9*Math.random()>>>0);function Tt(l){return typeof l=="function"?l:(l[Ae]||(l[Ae]=function(m){return l.handleEvent(m)}),l[Ae])}function Ne(){K.call(this),this.i=new ge(this),this.M=this,this.F=null}x(Ne,K),Ne.prototype[ae]=!0,Ne.prototype.removeEventListener=function(l,m,_,N){et(this,l,m,_,N)};function tt(l,m){var _,N=l.F;if(N)for(_=[];N;N=N.F)_.push(N);if(l=l.M,N=m.type||m,typeof m=="string")m=new Y(m,l);else if(m instanceof Y)m.target=m.target||l;else{var $=m;m=new Y(N,l),w(m,$)}if($=!0,_)for(var W=_.length-1;0<=W;W--){var Z=m.g=_[W];$=Ye(Z,N,!0,m)&&$}if(Z=m.g=l,$=Ye(Z,N,!0,m)&&$,$=Ye(Z,N,!1,m)&&$,_)for(W=0;W<_.length;W++)Z=m.g=_[W],$=Ye(Z,N,!1,m)&&$}Ne.prototype.N=function(){if(Ne.aa.N.call(this),this.i){var l=this.i,m;for(m in l.g){for(var _=l.g[m],N=0;N<_.length;N++)de(_[N]);delete l.g[m],l.h--}}this.F=null},Ne.prototype.K=function(l,m,_,N){return this.i.add(String(l),m,!1,_,N)},Ne.prototype.L=function(l,m,_,N){return this.i.add(String(l),m,!0,_,N)};function Ye(l,m,_,N){if(m=l.i.g[String(m)],!m)return!0;m=m.concat();for(var $=!0,W=0;W<m.length;++W){var Z=m[W];if(Z&&!Z.da&&Z.capture==_){var Ce=Z.listener,pt=Z.ha||Z.src;Z.fa&&pe(l.i,Z),$=Ce.call(pt,N)!==!1&&$}}return $&&!N.defaultPrevented}function jn(l,m,_){if(typeof l=="function")_&&(l=d(l,_));else if(l&&typeof l.handleEvent=="function")l=d(l.handleEvent,l);else throw Error("Invalid listener argument");return 2147483647<Number(m)?-1:a.setTimeout(l,m||0)}function ut(l){l.g=jn(()=>{l.g=null,l.i&&(l.i=!1,ut(l))},l.l);const m=l.h;l.h=null,l.m.apply(null,m)}class Xt extends K{constructor(m,_){super(),this.m=m,this.l=_,this.h=null,this.i=!1,this.g=null}j(m){this.h=arguments,this.g?this.i=!0:ut(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ct(l){K.call(this),this.h=l,this.g={}}x(ct,K);var cn=[];function Jt(l){D(l.g,function(m,_){this.g.hasOwnProperty(_)&&it(m)},l),l.g={}}ct.prototype.N=function(){ct.aa.N.call(this),Jt(this)},ct.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var wn=a.JSON.stringify,Ji=a.JSON.parse,Ec=class{stringify(l){return a.JSON.stringify(l,void 0)}parse(l){return a.JSON.parse(l,void 0)}};function fs(){}fs.prototype.h=null;function Zi(l){return l.h||(l.h=l.i())}function Ir(){}var ps={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function hn(){Y.call(this,"d")}x(hn,Y);function dn(){Y.call(this,"c")}x(dn,Y);var $t={},Ar=null;function ms(){return Ar=Ar||new Ne}$t.La="serverreachability";function Mn(l){Y.call(this,$t.La,l)}x(Mn,Y);function Zt(l){const m=ms();tt(m,new Mn(m))}$t.STAT_EVENT="statevent";function Mp(l,m){Y.call(this,$t.STAT_EVENT,l),this.stat=m}x(Mp,Y);function jt(l){const m=ms();tt(m,new Mp(m,l))}$t.Ma="timingevent";function Vp(l,m){Y.call(this,$t.Ma,l),this.size=m}x(Vp,Y);function eo(l,m){if(typeof l!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){l()},m)}function to(){this.g=!0}to.prototype.xa=function(){this.g=!1};function pE(l,m,_,N,$,W){l.info(function(){if(l.g)if(W)for(var Z="",Ce=W.split("&"),pt=0;pt<Ce.length;pt++){var we=Ce[pt].split("=");if(1<we.length){var It=we[0];we=we[1];var At=It.split("_");Z=2<=At.length&&At[1]=="type"?Z+(It+"="+we+"&"):Z+(It+"=redacted&")}}else Z=null;else Z=W;return"XMLHTTP REQ ("+N+") [attempt "+$+"]: "+m+`
`+_+`
`+Z})}function mE(l,m,_,N,$,W,Z){l.info(function(){return"XMLHTTP RESP ("+N+") [ attempt "+$+"]: "+m+`
`+_+`
`+W+" "+Z})}function Xs(l,m,_,N){l.info(function(){return"XMLHTTP TEXT ("+m+"): "+yE(l,_)+(N?" "+N:"")})}function gE(l,m){l.info(function(){return"TIMEOUT: "+m})}to.prototype.info=function(){};function yE(l,m){if(!l.g)return m;if(!m)return null;try{var _=JSON.parse(m);if(_){for(l=0;l<_.length;l++)if(Array.isArray(_[l])){var N=_[l];if(!(2>N.length)){var $=N[1];if(Array.isArray($)&&!(1>$.length)){var W=$[0];if(W!="noop"&&W!="stop"&&W!="close")for(var Z=1;Z<$.length;Z++)$[Z]=""}}}}return wn(_)}catch{return m}}var ja={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Up={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},xc;function Ma(){}x(Ma,fs),Ma.prototype.g=function(){return new XMLHttpRequest},Ma.prototype.i=function(){return{}},xc=new Ma;function Sr(l,m,_,N){this.j=l,this.i=m,this.l=_,this.R=N||1,this.U=new ct(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Fp}function Fp(){this.i=null,this.g="",this.h=!1}var Bp={},Tc={};function Ic(l,m,_){l.L=1,l.v=Ba(er(m)),l.m=_,l.P=!0,zp(l,null)}function zp(l,m){l.F=Date.now(),Va(l),l.A=er(l.v);var _=l.A,N=l.R;Array.isArray(N)||(N=[String(N)]),nm(_.i,"t",N),l.C=0,_=l.j.J,l.h=new Fp,l.g=wm(l.j,_?m:null,!l.m),0<l.O&&(l.M=new Xt(d(l.Y,l,l.g),l.O)),m=l.U,_=l.g,N=l.ca;var $="readystatechange";Array.isArray($)||($&&(cn[0]=$.toString()),$=cn);for(var W=0;W<$.length;W++){var Z=Fe(_,$[W],N||m.handleEvent,!1,m.h||m);if(!Z)break;m.g[Z.key]=Z}m=l.H?y(l.H):{},l.m?(l.u||(l.u="POST"),m["Content-Type"]="application/x-www-form-urlencoded",l.g.ea(l.A,l.u,l.m,m)):(l.u="GET",l.g.ea(l.A,l.u,null,m)),Zt(),pE(l.i,l.u,l.A,l.l,l.R,l.m)}Sr.prototype.ca=function(l){l=l.target;const m=this.M;m&&tr(l)==3?m.j():this.Y(l)},Sr.prototype.Y=function(l){try{if(l==this.g)e:{const At=tr(this.g);var m=this.g.Ba();const ei=this.g.Z();if(!(3>At)&&(At!=3||this.g&&(this.h.h||this.g.oa()||um(this.g)))){this.J||At!=4||m==7||(m==8||0>=ei?Zt(3):Zt(2)),Ac(this);var _=this.g.Z();this.X=_;t:if($p(this)){var N=um(this.g);l="";var $=N.length,W=tr(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){gs(this),no(this);var Z="";break t}this.h.i=new a.TextDecoder}for(m=0;m<$;m++)this.h.h=!0,l+=this.h.i.decode(N[m],{stream:!(W&&m==$-1)});N.length=0,this.h.g+=l,this.C=0,Z=this.h.g}else Z=this.g.oa();if(this.o=_==200,mE(this.i,this.u,this.A,this.l,this.R,At,_),this.o){if(this.T&&!this.K){t:{if(this.g){var Ce,pt=this.g;if((Ce=pt.g?pt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!I(Ce)){var we=Ce;break t}}we=null}if(_=we)Xs(this.i,this.l,_,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Sc(this,_);else{this.o=!1,this.s=3,jt(12),gs(this),no(this);break e}}if(this.P){_=!0;let En;for(;!this.J&&this.C<Z.length;)if(En=vE(this,Z),En==Tc){At==4&&(this.s=4,jt(14),_=!1),Xs(this.i,this.l,null,"[Incomplete Response]");break}else if(En==Bp){this.s=4,jt(15),Xs(this.i,this.l,Z,"[Invalid Chunk]"),_=!1;break}else Xs(this.i,this.l,En,null),Sc(this,En);if($p(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),At!=4||Z.length!=0||this.h.h||(this.s=1,jt(16),_=!1),this.o=this.o&&_,!_)Xs(this.i,this.l,Z,"[Invalid Chunked Response]"),gs(this),no(this);else if(0<Z.length&&!this.W){this.W=!0;var It=this.j;It.g==this&&It.ba&&!It.M&&(It.j.info("Great, no buffering proxy detected. Bytes received: "+Z.length),Pc(It),It.M=!0,jt(11))}}else Xs(this.i,this.l,Z,null),Sc(this,Z);At==4&&gs(this),this.o&&!this.J&&(At==4?gm(this.j,this):(this.o=!1,Va(this)))}else OE(this.g),_==400&&0<Z.indexOf("Unknown SID")?(this.s=3,jt(12)):(this.s=0,jt(13)),gs(this),no(this)}}}catch{}finally{}};function $p(l){return l.g?l.u=="GET"&&l.L!=2&&l.j.Ca:!1}function vE(l,m){var _=l.C,N=m.indexOf(`
`,_);return N==-1?Tc:(_=Number(m.substring(_,N)),isNaN(_)?Bp:(N+=1,N+_>m.length?Tc:(m=m.slice(N,N+_),l.C=N+_,m)))}Sr.prototype.cancel=function(){this.J=!0,gs(this)};function Va(l){l.S=Date.now()+l.I,Hp(l,l.I)}function Hp(l,m){if(l.B!=null)throw Error("WatchDog timer not null");l.B=eo(d(l.ba,l),m)}function Ac(l){l.B&&(a.clearTimeout(l.B),l.B=null)}Sr.prototype.ba=function(){this.B=null;const l=Date.now();0<=l-this.S?(gE(this.i,this.A),this.L!=2&&(Zt(),jt(17)),gs(this),this.s=2,no(this)):Hp(this,this.S-l)};function no(l){l.j.G==0||l.J||gm(l.j,l)}function gs(l){Ac(l);var m=l.M;m&&typeof m.ma=="function"&&m.ma(),l.M=null,Jt(l.U),l.g&&(m=l.g,l.g=null,m.abort(),m.ma())}function Sc(l,m){try{var _=l.j;if(_.G!=0&&(_.g==l||kc(_.h,l))){if(!l.K&&kc(_.h,l)&&_.G==3){try{var N=_.Da.g.parse(m)}catch{N=null}if(Array.isArray(N)&&N.length==3){var $=N;if($[0]==0){e:if(!_.u){if(_.g)if(_.g.F+3e3<l.F)Ka(_),Wa(_);else break e;Nc(_),jt(18)}}else _.za=$[1],0<_.za-_.T&&37500>$[2]&&_.F&&_.v==0&&!_.C&&(_.C=eo(d(_.Za,_),6e3));if(1>=Kp(_.h)&&_.ca){try{_.ca()}catch{}_.ca=void 0}}else vs(_,11)}else if((l.K||_.g==l)&&Ka(_),!I(m))for($=_.Da.g.parse(m),m=0;m<$.length;m++){let we=$[m];if(_.T=we[0],we=we[1],_.G==2)if(we[0]=="c"){_.K=we[1],_.ia=we[2];const It=we[3];It!=null&&(_.la=It,_.j.info("VER="+_.la));const At=we[4];At!=null&&(_.Aa=At,_.j.info("SVER="+_.Aa));const ei=we[5];ei!=null&&typeof ei=="number"&&0<ei&&(N=1.5*ei,_.L=N,_.j.info("backChannelRequestTimeoutMs_="+N)),N=_;const En=l.g;if(En){const Qa=En.g?En.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Qa){var W=N.h;W.g||Qa.indexOf("spdy")==-1&&Qa.indexOf("quic")==-1&&Qa.indexOf("h2")==-1||(W.j=W.l,W.g=new Set,W.h&&(Cc(W,W.h),W.h=null))}if(N.D){const Dc=En.g?En.g.getResponseHeader("X-HTTP-Session-Id"):null;Dc&&(N.ya=Dc,Pe(N.I,N.D,Dc))}}_.G=3,_.l&&_.l.ua(),_.ba&&(_.R=Date.now()-l.F,_.j.info("Handshake RTT: "+_.R+"ms")),N=_;var Z=l;if(N.qa=_m(N,N.J?N.ia:null,N.W),Z.K){Gp(N.h,Z);var Ce=Z,pt=N.L;pt&&(Ce.I=pt),Ce.B&&(Ac(Ce),Va(Ce)),N.g=Z}else pm(N);0<_.i.length&&qa(_)}else we[0]!="stop"&&we[0]!="close"||vs(_,7);else _.G==3&&(we[0]=="stop"||we[0]=="close"?we[0]=="stop"?vs(_,7):bc(_):we[0]!="noop"&&_.l&&_.l.ta(we),_.v=0)}}Zt(4)}catch{}}var _E=class{constructor(l,m){this.g=l,this.map=m}};function Wp(l){this.l=l||10,a.PerformanceNavigationTiming?(l=a.performance.getEntriesByType("navigation"),l=0<l.length&&(l[0].nextHopProtocol=="hq"||l[0].nextHopProtocol=="h2")):l=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=l?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function qp(l){return l.h?!0:l.g?l.g.size>=l.j:!1}function Kp(l){return l.h?1:l.g?l.g.size:0}function kc(l,m){return l.h?l.h==m:l.g?l.g.has(m):!1}function Cc(l,m){l.g?l.g.add(m):l.h=m}function Gp(l,m){l.h&&l.h==m?l.h=null:l.g&&l.g.has(m)&&l.g.delete(m)}Wp.prototype.cancel=function(){if(this.i=Qp(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const l of this.g.values())l.cancel();this.g.clear()}};function Qp(l){if(l.h!=null)return l.i.concat(l.h.D);if(l.g!=null&&l.g.size!==0){let m=l.i;for(const _ of l.g.values())m=m.concat(_.D);return m}return k(l.i)}function wE(l){if(l.V&&typeof l.V=="function")return l.V();if(typeof Map<"u"&&l instanceof Map||typeof Set<"u"&&l instanceof Set)return Array.from(l.values());if(typeof l=="string")return l.split("");if(u(l)){for(var m=[],_=l.length,N=0;N<_;N++)m.push(l[N]);return m}m=[],_=0;for(N in l)m[_++]=l[N];return m}function EE(l){if(l.na&&typeof l.na=="function")return l.na();if(!l.V||typeof l.V!="function"){if(typeof Map<"u"&&l instanceof Map)return Array.from(l.keys());if(!(typeof Set<"u"&&l instanceof Set)){if(u(l)||typeof l=="string"){var m=[];l=l.length;for(var _=0;_<l;_++)m.push(_);return m}m=[],_=0;for(const N in l)m[_++]=N;return m}}}function Yp(l,m){if(l.forEach&&typeof l.forEach=="function")l.forEach(m,void 0);else if(u(l)||typeof l=="string")Array.prototype.forEach.call(l,m,void 0);else for(var _=EE(l),N=wE(l),$=N.length,W=0;W<$;W++)m.call(void 0,N[W],_&&_[W],l)}var Xp=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function xE(l,m){if(l){l=l.split("&");for(var _=0;_<l.length;_++){var N=l[_].indexOf("="),$=null;if(0<=N){var W=l[_].substring(0,N);$=l[_].substring(N+1)}else W=l[_];m(W,$?decodeURIComponent($.replace(/\+/g," ")):"")}}}function ys(l){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,l instanceof ys){this.h=l.h,Ua(this,l.j),this.o=l.o,this.g=l.g,Fa(this,l.s),this.l=l.l;var m=l.i,_=new io;_.i=m.i,m.g&&(_.g=new Map(m.g),_.h=m.h),Jp(this,_),this.m=l.m}else l&&(m=String(l).match(Xp))?(this.h=!1,Ua(this,m[1]||"",!0),this.o=ro(m[2]||""),this.g=ro(m[3]||"",!0),Fa(this,m[4]),this.l=ro(m[5]||"",!0),Jp(this,m[6]||"",!0),this.m=ro(m[7]||"")):(this.h=!1,this.i=new io(null,this.h))}ys.prototype.toString=function(){var l=[],m=this.j;m&&l.push(so(m,Zp,!0),":");var _=this.g;return(_||m=="file")&&(l.push("//"),(m=this.o)&&l.push(so(m,Zp,!0),"@"),l.push(encodeURIComponent(String(_)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),_=this.s,_!=null&&l.push(":",String(_))),(_=this.l)&&(this.g&&_.charAt(0)!="/"&&l.push("/"),l.push(so(_,_.charAt(0)=="/"?AE:IE,!0))),(_=this.i.toString())&&l.push("?",_),(_=this.m)&&l.push("#",so(_,kE)),l.join("")};function er(l){return new ys(l)}function Ua(l,m,_){l.j=_?ro(m,!0):m,l.j&&(l.j=l.j.replace(/:$/,""))}function Fa(l,m){if(m){if(m=Number(m),isNaN(m)||0>m)throw Error("Bad port number "+m);l.s=m}else l.s=null}function Jp(l,m,_){m instanceof io?(l.i=m,CE(l.i,l.h)):(_||(m=so(m,SE)),l.i=new io(m,l.h))}function Pe(l,m,_){l.i.set(m,_)}function Ba(l){return Pe(l,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),l}function ro(l,m){return l?m?decodeURI(l.replace(/%25/g,"%2525")):decodeURIComponent(l):""}function so(l,m,_){return typeof l=="string"?(l=encodeURI(l).replace(m,TE),_&&(l=l.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),l):null}function TE(l){return l=l.charCodeAt(0),"%"+(l>>4&15).toString(16)+(l&15).toString(16)}var Zp=/[#\/\?@]/g,IE=/[#\?:]/g,AE=/[#\?]/g,SE=/[#\?@]/g,kE=/#/g;function io(l,m){this.h=this.g=null,this.i=l||null,this.j=!!m}function kr(l){l.g||(l.g=new Map,l.h=0,l.i&&xE(l.i,function(m,_){l.add(decodeURIComponent(m.replace(/\+/g," ")),_)}))}t=io.prototype,t.add=function(l,m){kr(this),this.i=null,l=Js(this,l);var _=this.g.get(l);return _||this.g.set(l,_=[]),_.push(m),this.h+=1,this};function em(l,m){kr(l),m=Js(l,m),l.g.has(m)&&(l.i=null,l.h-=l.g.get(m).length,l.g.delete(m))}function tm(l,m){return kr(l),m=Js(l,m),l.g.has(m)}t.forEach=function(l,m){kr(this),this.g.forEach(function(_,N){_.forEach(function($){l.call(m,$,N,this)},this)},this)},t.na=function(){kr(this);const l=Array.from(this.g.values()),m=Array.from(this.g.keys()),_=[];for(let N=0;N<m.length;N++){const $=l[N];for(let W=0;W<$.length;W++)_.push(m[N])}return _},t.V=function(l){kr(this);let m=[];if(typeof l=="string")tm(this,l)&&(m=m.concat(this.g.get(Js(this,l))));else{l=Array.from(this.g.values());for(let _=0;_<l.length;_++)m=m.concat(l[_])}return m},t.set=function(l,m){return kr(this),this.i=null,l=Js(this,l),tm(this,l)&&(this.h-=this.g.get(l).length),this.g.set(l,[m]),this.h+=1,this},t.get=function(l,m){return l?(l=this.V(l),0<l.length?String(l[0]):m):m};function nm(l,m,_){em(l,m),0<_.length&&(l.i=null,l.g.set(Js(l,m),k(_)),l.h+=_.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const l=[],m=Array.from(this.g.keys());for(var _=0;_<m.length;_++){var N=m[_];const W=encodeURIComponent(String(N)),Z=this.V(N);for(N=0;N<Z.length;N++){var $=W;Z[N]!==""&&($+="="+encodeURIComponent(String(Z[N]))),l.push($)}}return this.i=l.join("&")};function Js(l,m){return m=String(m),l.j&&(m=m.toLowerCase()),m}function CE(l,m){m&&!l.j&&(kr(l),l.i=null,l.g.forEach(function(_,N){var $=N.toLowerCase();N!=$&&(em(this,N),nm(this,$,_))},l)),l.j=m}function RE(l,m){const _=new to;if(a.Image){const N=new Image;N.onload=v(Cr,_,"TestLoadImage: loaded",!0,m,N),N.onerror=v(Cr,_,"TestLoadImage: error",!1,m,N),N.onabort=v(Cr,_,"TestLoadImage: abort",!1,m,N),N.ontimeout=v(Cr,_,"TestLoadImage: timeout",!1,m,N),a.setTimeout(function(){N.ontimeout&&N.ontimeout()},1e4),N.src=l}else m(!1)}function bE(l,m){const _=new to,N=new AbortController,$=setTimeout(()=>{N.abort(),Cr(_,"TestPingServer: timeout",!1,m)},1e4);fetch(l,{signal:N.signal}).then(W=>{clearTimeout($),W.ok?Cr(_,"TestPingServer: ok",!0,m):Cr(_,"TestPingServer: server error",!1,m)}).catch(()=>{clearTimeout($),Cr(_,"TestPingServer: error",!1,m)})}function Cr(l,m,_,N,$){try{$&&($.onload=null,$.onerror=null,$.onabort=null,$.ontimeout=null),N(_)}catch{}}function NE(){this.g=new Ec}function PE(l,m,_){const N=_||"";try{Yp(l,function($,W){let Z=$;c($)&&(Z=wn($)),m.push(N+W+"="+encodeURIComponent(Z))})}catch($){throw m.push(N+"type="+encodeURIComponent("_badmap")),$}}function za(l){this.l=l.Ub||null,this.j=l.eb||!1}x(za,fs),za.prototype.g=function(){return new $a(this.l,this.j)},za.prototype.i=function(l){return function(){return l}}({});function $a(l,m){Ne.call(this),this.D=l,this.o=m,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}x($a,Ne),t=$a.prototype,t.open=function(l,m){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=l,this.A=m,this.readyState=1,ao(this)},t.send=function(l){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const m={headers:this.u,method:this.B,credentials:this.m,cache:void 0};l&&(m.body=l),(this.D||a).fetch(new Request(this.A,m)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,oo(this)),this.readyState=0},t.Sa=function(l){if(this.g&&(this.l=l,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=l.headers,this.readyState=2,ao(this)),this.g&&(this.readyState=3,ao(this),this.g)))if(this.responseType==="arraybuffer")l.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in l){if(this.j=l.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;rm(this)}else l.text().then(this.Ra.bind(this),this.ga.bind(this))};function rm(l){l.j.read().then(l.Pa.bind(l)).catch(l.ga.bind(l))}t.Pa=function(l){if(this.g){if(this.o&&l.value)this.response.push(l.value);else if(!this.o){var m=l.value?l.value:new Uint8Array(0);(m=this.v.decode(m,{stream:!l.done}))&&(this.response=this.responseText+=m)}l.done?oo(this):ao(this),this.readyState==3&&rm(this)}},t.Ra=function(l){this.g&&(this.response=this.responseText=l,oo(this))},t.Qa=function(l){this.g&&(this.response=l,oo(this))},t.ga=function(){this.g&&oo(this)};function oo(l){l.readyState=4,l.l=null,l.j=null,l.v=null,ao(l)}t.setRequestHeader=function(l,m){this.u.append(l,m)},t.getResponseHeader=function(l){return this.h&&this.h.get(l.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const l=[],m=this.h.entries();for(var _=m.next();!_.done;)_=_.value,l.push(_[0]+": "+_[1]),_=m.next();return l.join(`\r
`)};function ao(l){l.onreadystatechange&&l.onreadystatechange.call(l)}Object.defineProperty($a.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(l){this.m=l?"include":"same-origin"}});function sm(l){let m="";return D(l,function(_,N){m+=N,m+=":",m+=_,m+=`\r
`}),m}function Rc(l,m,_){e:{for(N in _){var N=!1;break e}N=!0}N||(_=sm(_),typeof l=="string"?_!=null&&encodeURIComponent(String(_)):Pe(l,m,_))}function qe(l){Ne.call(this),this.headers=new Map,this.o=l||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}x(qe,Ne);var DE=/^https?$/i,LE=["POST","PUT"];t=qe.prototype,t.Ha=function(l){this.J=l},t.ea=function(l,m,_,N){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+l);m=m?m.toUpperCase():"GET",this.D=l,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():xc.g(),this.v=this.o?Zi(this.o):Zi(xc),this.g.onreadystatechange=d(this.Ea,this);try{this.B=!0,this.g.open(m,String(l),!0),this.B=!1}catch(W){im(this,W);return}if(l=_||"",_=new Map(this.headers),N)if(Object.getPrototypeOf(N)===Object.prototype)for(var $ in N)_.set($,N[$]);else if(typeof N.keys=="function"&&typeof N.get=="function")for(const W of N.keys())_.set(W,N.get(W));else throw Error("Unknown input type for opt_headers: "+String(N));N=Array.from(_.keys()).find(W=>W.toLowerCase()=="content-type"),$=a.FormData&&l instanceof a.FormData,!(0<=Array.prototype.indexOf.call(LE,m,void 0))||N||$||_.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[W,Z]of _)this.g.setRequestHeader(W,Z);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{lm(this),this.u=!0,this.g.send(l),this.u=!1}catch(W){im(this,W)}};function im(l,m){l.h=!1,l.g&&(l.j=!0,l.g.abort(),l.j=!1),l.l=m,l.m=5,om(l),Ha(l)}function om(l){l.A||(l.A=!0,tt(l,"complete"),tt(l,"error"))}t.abort=function(l){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=l||7,tt(this,"complete"),tt(this,"abort"),Ha(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ha(this,!0)),qe.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?am(this):this.bb())},t.bb=function(){am(this)};function am(l){if(l.h&&typeof o<"u"&&(!l.v[1]||tr(l)!=4||l.Z()!=2)){if(l.u&&tr(l)==4)jn(l.Ea,0,l);else if(tt(l,"readystatechange"),tr(l)==4){l.h=!1;try{const Z=l.Z();e:switch(Z){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var m=!0;break e;default:m=!1}var _;if(!(_=m)){var N;if(N=Z===0){var $=String(l.D).match(Xp)[1]||null;!$&&a.self&&a.self.location&&($=a.self.location.protocol.slice(0,-1)),N=!DE.test($?$.toLowerCase():"")}_=N}if(_)tt(l,"complete"),tt(l,"success");else{l.m=6;try{var W=2<tr(l)?l.g.statusText:""}catch{W=""}l.l=W+" ["+l.Z()+"]",om(l)}}finally{Ha(l)}}}}function Ha(l,m){if(l.g){lm(l);const _=l.g,N=l.v[0]?()=>{}:null;l.g=null,l.v=null,m||tt(l,"ready");try{_.onreadystatechange=N}catch{}}}function lm(l){l.I&&(a.clearTimeout(l.I),l.I=null)}t.isActive=function(){return!!this.g};function tr(l){return l.g?l.g.readyState:0}t.Z=function(){try{return 2<tr(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(l){if(this.g){var m=this.g.responseText;return l&&m.indexOf(l)==0&&(m=m.substring(l.length)),Ji(m)}};function um(l){try{if(!l.g)return null;if("response"in l.g)return l.g.response;switch(l.H){case"":case"text":return l.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in l.g)return l.g.mozResponseArrayBuffer}return null}catch{return null}}function OE(l){const m={};l=(l.g&&2<=tr(l)&&l.g.getAllResponseHeaders()||"").split(`\r
`);for(let N=0;N<l.length;N++){if(I(l[N]))continue;var _=A(l[N]);const $=_[0];if(_=_[1],typeof _!="string")continue;_=_.trim();const W=m[$]||[];m[$]=W,W.push(_)}S(m,function(N){return N.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function lo(l,m,_){return _&&_.internalChannelParams&&_.internalChannelParams[l]||m}function cm(l){this.Aa=0,this.i=[],this.j=new to,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=lo("failFast",!1,l),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=lo("baseRetryDelayMs",5e3,l),this.cb=lo("retryDelaySeedMs",1e4,l),this.Wa=lo("forwardChannelMaxRetries",2,l),this.wa=lo("forwardChannelRequestTimeoutMs",2e4,l),this.pa=l&&l.xmlHttpFactory||void 0,this.Xa=l&&l.Tb||void 0,this.Ca=l&&l.useFetchStreams||!1,this.L=void 0,this.J=l&&l.supportsCrossDomainXhr||!1,this.K="",this.h=new Wp(l&&l.concurrentRequestLimit),this.Da=new NE,this.P=l&&l.fastHandshake||!1,this.O=l&&l.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=l&&l.Rb||!1,l&&l.xa&&this.j.xa(),l&&l.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&l&&l.detectBufferingProxy||!1,this.ja=void 0,l&&l.longPollingTimeout&&0<l.longPollingTimeout&&(this.ja=l.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=cm.prototype,t.la=8,t.G=1,t.connect=function(l,m,_,N){jt(0),this.W=l,this.H=m||{},_&&N!==void 0&&(this.H.OSID=_,this.H.OAID=N),this.F=this.X,this.I=_m(this,null,this.W),qa(this)};function bc(l){if(hm(l),l.G==3){var m=l.U++,_=er(l.I);if(Pe(_,"SID",l.K),Pe(_,"RID",m),Pe(_,"TYPE","terminate"),uo(l,_),m=new Sr(l,l.j,m),m.L=2,m.v=Ba(er(_)),_=!1,a.navigator&&a.navigator.sendBeacon)try{_=a.navigator.sendBeacon(m.v.toString(),"")}catch{}!_&&a.Image&&(new Image().src=m.v,_=!0),_||(m.g=wm(m.j,null),m.g.ea(m.v)),m.F=Date.now(),Va(m)}vm(l)}function Wa(l){l.g&&(Pc(l),l.g.cancel(),l.g=null)}function hm(l){Wa(l),l.u&&(a.clearTimeout(l.u),l.u=null),Ka(l),l.h.cancel(),l.s&&(typeof l.s=="number"&&a.clearTimeout(l.s),l.s=null)}function qa(l){if(!qp(l.h)&&!l.s){l.s=!0;var m=l.Ga;L||H(),U||(L(),U=!0),V.add(m,l),l.B=0}}function jE(l,m){return Kp(l.h)>=l.h.j-(l.s?1:0)?!1:l.s?(l.i=m.D.concat(l.i),!0):l.G==1||l.G==2||l.B>=(l.Va?0:l.Wa)?!1:(l.s=eo(d(l.Ga,l,m),ym(l,l.B)),l.B++,!0)}t.Ga=function(l){if(this.s)if(this.s=null,this.G==1){if(!l){this.U=Math.floor(1e5*Math.random()),l=this.U++;const $=new Sr(this,this.j,l);let W=this.o;if(this.S&&(W?(W=y(W),w(W,this.S)):W=this.S),this.m!==null||this.O||($.H=W,W=null),this.P)e:{for(var m=0,_=0;_<this.i.length;_++){t:{var N=this.i[_];if("__data__"in N.map&&(N=N.map.__data__,typeof N=="string")){N=N.length;break t}N=void 0}if(N===void 0)break;if(m+=N,4096<m){m=_;break e}if(m===4096||_===this.i.length-1){m=_+1;break e}}m=1e3}else m=1e3;m=fm(this,$,m),_=er(this.I),Pe(_,"RID",l),Pe(_,"CVER",22),this.D&&Pe(_,"X-HTTP-Session-Id",this.D),uo(this,_),W&&(this.O?m="headers="+encodeURIComponent(String(sm(W)))+"&"+m:this.m&&Rc(_,this.m,W)),Cc(this.h,$),this.Ua&&Pe(_,"TYPE","init"),this.P?(Pe(_,"$req",m),Pe(_,"SID","null"),$.T=!0,Ic($,_,null)):Ic($,_,m),this.G=2}}else this.G==3&&(l?dm(this,l):this.i.length==0||qp(this.h)||dm(this))};function dm(l,m){var _;m?_=m.l:_=l.U++;const N=er(l.I);Pe(N,"SID",l.K),Pe(N,"RID",_),Pe(N,"AID",l.T),uo(l,N),l.m&&l.o&&Rc(N,l.m,l.o),_=new Sr(l,l.j,_,l.B+1),l.m===null&&(_.H=l.o),m&&(l.i=m.D.concat(l.i)),m=fm(l,_,1e3),_.I=Math.round(.5*l.wa)+Math.round(.5*l.wa*Math.random()),Cc(l.h,_),Ic(_,N,m)}function uo(l,m){l.H&&D(l.H,function(_,N){Pe(m,N,_)}),l.l&&Yp({},function(_,N){Pe(m,N,_)})}function fm(l,m,_){_=Math.min(l.i.length,_);var N=l.l?d(l.l.Na,l.l,l):null;e:{var $=l.i;let W=-1;for(;;){const Z=["count="+_];W==-1?0<_?(W=$[0].g,Z.push("ofs="+W)):W=0:Z.push("ofs="+W);let Ce=!0;for(let pt=0;pt<_;pt++){let we=$[pt].g;const It=$[pt].map;if(we-=W,0>we)W=Math.max(0,$[pt].g-100),Ce=!1;else try{PE(It,Z,"req"+we+"_")}catch{N&&N(It)}}if(Ce){N=Z.join("&");break e}}}return l=l.i.splice(0,_),m.D=l,N}function pm(l){if(!l.g&&!l.u){l.Y=1;var m=l.Fa;L||H(),U||(L(),U=!0),V.add(m,l),l.v=0}}function Nc(l){return l.g||l.u||3<=l.v?!1:(l.Y++,l.u=eo(d(l.Fa,l),ym(l,l.v)),l.v++,!0)}t.Fa=function(){if(this.u=null,mm(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var l=2*this.R;this.j.info("BP detection timer enabled: "+l),this.A=eo(d(this.ab,this),l)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,jt(10),Wa(this),mm(this))};function Pc(l){l.A!=null&&(a.clearTimeout(l.A),l.A=null)}function mm(l){l.g=new Sr(l,l.j,"rpc",l.Y),l.m===null&&(l.g.H=l.o),l.g.O=0;var m=er(l.qa);Pe(m,"RID","rpc"),Pe(m,"SID",l.K),Pe(m,"AID",l.T),Pe(m,"CI",l.F?"0":"1"),!l.F&&l.ja&&Pe(m,"TO",l.ja),Pe(m,"TYPE","xmlhttp"),uo(l,m),l.m&&l.o&&Rc(m,l.m,l.o),l.L&&(l.g.I=l.L);var _=l.g;l=l.ia,_.L=1,_.v=Ba(er(m)),_.m=null,_.P=!0,zp(_,l)}t.Za=function(){this.C!=null&&(this.C=null,Wa(this),Nc(this),jt(19))};function Ka(l){l.C!=null&&(a.clearTimeout(l.C),l.C=null)}function gm(l,m){var _=null;if(l.g==m){Ka(l),Pc(l),l.g=null;var N=2}else if(kc(l.h,m))_=m.D,Gp(l.h,m),N=1;else return;if(l.G!=0){if(m.o)if(N==1){_=m.m?m.m.length:0,m=Date.now()-m.F;var $=l.B;N=ms(),tt(N,new Vp(N,_)),qa(l)}else pm(l);else if($=m.s,$==3||$==0&&0<m.X||!(N==1&&jE(l,m)||N==2&&Nc(l)))switch(_&&0<_.length&&(m=l.h,m.i=m.i.concat(_)),$){case 1:vs(l,5);break;case 4:vs(l,10);break;case 3:vs(l,6);break;default:vs(l,2)}}}function ym(l,m){let _=l.Ta+Math.floor(Math.random()*l.cb);return l.isActive()||(_*=2),_*m}function vs(l,m){if(l.j.info("Error code "+m),m==2){var _=d(l.fb,l),N=l.Xa;const $=!N;N=new ys(N||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Ua(N,"https"),Ba(N),$?RE(N.toString(),_):bE(N.toString(),_)}else jt(2);l.G=0,l.l&&l.l.sa(m),vm(l),hm(l)}t.fb=function(l){l?(this.j.info("Successfully pinged google.com"),jt(2)):(this.j.info("Failed to ping google.com"),jt(1))};function vm(l){if(l.G=0,l.ka=[],l.l){const m=Qp(l.h);(m.length!=0||l.i.length!=0)&&(P(l.ka,m),P(l.ka,l.i),l.h.i.length=0,k(l.i),l.i.length=0),l.l.ra()}}function _m(l,m,_){var N=_ instanceof ys?er(_):new ys(_);if(N.g!="")m&&(N.g=m+"."+N.g),Fa(N,N.s);else{var $=a.location;N=$.protocol,m=m?m+"."+$.hostname:$.hostname,$=+$.port;var W=new ys(null);N&&Ua(W,N),m&&(W.g=m),$&&Fa(W,$),_&&(W.l=_),N=W}return _=l.D,m=l.ya,_&&m&&Pe(N,_,m),Pe(N,"VER",l.la),uo(l,N),N}function wm(l,m,_){if(m&&!l.J)throw Error("Can't create secondary domain capable XhrIo object.");return m=l.Ca&&!l.pa?new qe(new za({eb:_})):new qe(l.pa),m.Ha(l.J),m}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Em(){}t=Em.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Ga(){}Ga.prototype.g=function(l,m){return new en(l,m)};function en(l,m){Ne.call(this),this.g=new cm(m),this.l=l,this.h=m&&m.messageUrlParams||null,l=m&&m.messageHeaders||null,m&&m.clientProtocolHeaderRequired&&(l?l["X-Client-Protocol"]="webchannel":l={"X-Client-Protocol":"webchannel"}),this.g.o=l,l=m&&m.initMessageHeaders||null,m&&m.messageContentType&&(l?l["X-WebChannel-Content-Type"]=m.messageContentType:l={"X-WebChannel-Content-Type":m.messageContentType}),m&&m.va&&(l?l["X-WebChannel-Client-Profile"]=m.va:l={"X-WebChannel-Client-Profile":m.va}),this.g.S=l,(l=m&&m.Sb)&&!I(l)&&(this.g.m=l),this.v=m&&m.supportsCrossDomainXhr||!1,this.u=m&&m.sendRawJson||!1,(m=m&&m.httpSessionIdParam)&&!I(m)&&(this.g.D=m,l=this.h,l!==null&&m in l&&(l=this.h,m in l&&delete l[m])),this.j=new Zs(this)}x(en,Ne),en.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},en.prototype.close=function(){bc(this.g)},en.prototype.o=function(l){var m=this.g;if(typeof l=="string"){var _={};_.__data__=l,l=_}else this.u&&(_={},_.__data__=wn(l),l=_);m.i.push(new _E(m.Ya++,l)),m.G==3&&qa(m)},en.prototype.N=function(){this.g.l=null,delete this.j,bc(this.g),delete this.g,en.aa.N.call(this)};function xm(l){hn.call(this),l.__headers__&&(this.headers=l.__headers__,this.statusCode=l.__status__,delete l.__headers__,delete l.__status__);var m=l.__sm__;if(m){e:{for(const _ in m){l=_;break e}l=void 0}(this.i=l)&&(l=this.i,m=m!==null&&l in m?m[l]:void 0),this.data=m}else this.data=l}x(xm,hn);function Tm(){dn.call(this),this.status=1}x(Tm,dn);function Zs(l){this.g=l}x(Zs,Em),Zs.prototype.ua=function(){tt(this.g,"a")},Zs.prototype.ta=function(l){tt(this.g,new xm(l))},Zs.prototype.sa=function(l){tt(this.g,new Tm)},Zs.prototype.ra=function(){tt(this.g,"b")},Ga.prototype.createWebChannel=Ga.prototype.g,en.prototype.send=en.prototype.o,en.prototype.open=en.prototype.m,en.prototype.close=en.prototype.close,fw=function(){return new Ga},dw=function(){return ms()},hw=$t,xd={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},ja.NO_ERROR=0,ja.TIMEOUT=8,ja.HTTP_ERROR=6,Ml=ja,Up.COMPLETE="complete",cw=Up,Ir.EventType=ps,ps.OPEN="a",ps.CLOSE="b",ps.ERROR="c",ps.MESSAGE="d",Ne.prototype.listen=Ne.prototype.K,ko=Ir,qe.prototype.listenOnce=qe.prototype.L,qe.prototype.getLastError=qe.prototype.Ka,qe.prototype.getLastErrorCode=qe.prototype.Ba,qe.prototype.getStatus=qe.prototype.Z,qe.prototype.getResponseJson=qe.prototype.Oa,qe.prototype.getResponseText=qe.prototype.oa,qe.prototype.send=qe.prototype.ea,qe.prototype.setWithCredentials=qe.prototype.Ha,uw=qe}).apply(typeof pl<"u"?pl:typeof self<"u"?self:typeof window<"u"?window:{});const uy="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}bt.UNAUTHENTICATED=new bt(null),bt.GOOGLE_CREDENTIALS=new bt("google-credentials-uid"),bt.FIRST_PARTY=new bt("first-party-uid"),bt.MOCK_USER=new bt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Gi="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fs=new Df("@firebase/firestore");function _o(){return Fs.logLevel}function re(t,...e){if(Fs.logLevel<=ye.DEBUG){const n=e.map(qf);Fs.debug(`Firestore (${Gi}): ${t}`,...n)}}function _r(t,...e){if(Fs.logLevel<=ye.ERROR){const n=e.map(qf);Fs.error(`Firestore (${Gi}): ${t}`,...n)}}function ji(t,...e){if(Fs.logLevel<=ye.WARN){const n=e.map(qf);Fs.warn(`Firestore (${Gi}): ${t}`,...n)}}function qf(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ue(t="Unexpected state"){const e=`FIRESTORE (${Gi}) INTERNAL ASSERTION FAILED: `+t;throw _r(e),new Error(e)}function ke(t,e){t||ue()}function he(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class te extends Zn{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dr{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pw{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class ck{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(bt.UNAUTHENTICATED))}shutdown(){}}class hk{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class dk{constructor(e){this.t=e,this.currentUser=bt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){ke(this.o===void 0);let r=this.i;const s=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve();let i=new dr;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new dr,e.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const u=i;e.enqueueRetryable(async()=>{await u.promise,await s(this.currentUser)})},a=u=>{re("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(u=>a(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?a(u):(re("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new dr)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(re("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ke(typeof r.accessToken=="string"),new pw(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return ke(e===null||typeof e=="string"),new bt(e)}}class fk{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=bt.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class pk{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new fk(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(bt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class mk{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class gk{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){ke(this.o===void 0);const r=i=>{i.error!=null&&re("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.R;return this.R=i.token,re("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{re("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.A.getImmediate({optional:!0});i?s(i):re("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(ke(typeof n.token=="string"),this.R=n.token,new mk(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yk(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mw{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const s=yk(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%e.length))}return r}}function Ee(t,e){return t<e?-1:t>e?1:0}function Mi(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class je{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new te(q.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new te(q.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new te(q.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new te(q.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return je.fromMillis(Date.now())}static fromDate(e){return je.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new je(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Ee(this.nanoseconds,e.nanoseconds):Ee(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ce{constructor(e){this.timestamp=e}static fromTimestamp(e){return new ce(e)}static min(){return new ce(new je(0,0))}static max(){return new ce(new je(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ha{constructor(e,n,r){n===void 0?n=0:n>e.length&&ue(),r===void 0?r=e.length-n:r>e.length-n&&ue(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return ha.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof ha?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=e.get(s),o=n.get(s);if(i<o)return-1;if(i>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class Le extends ha{construct(e,n,r){return new Le(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new te(q.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new Le(n)}static emptyPath(){return new Le([])}}const vk=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class yt extends ha{construct(e,n,r){return new yt(e,n,r)}static isValidIdentifier(e){return vk.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),yt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new yt(["__name__"])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new te(q.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;s<e.length;){const a=e[s];if(a==="\\"){if(s+1===e.length)throw new te(q.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[s+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new te(q.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,s+=2}else a==="`"?(o=!o,s++):a!=="."||o?(r+=a,s++):(i(),s++)}if(i(),o)throw new te(q.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new yt(n)}static emptyPath(){return new yt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class se{constructor(e){this.path=e}static fromPath(e){return new se(Le.fromString(e))}static fromName(e){return new se(Le.fromString(e).popFirst(5))}static empty(){return new se(Le.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Le.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Le.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new se(new Le(e.slice()))}}function _k(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=ce.fromTimestamp(r===1e9?new je(n+1,0):new je(n,r));return new ss(s,se.empty(),e)}function wk(t){return new ss(t.readTime,t.key,-1)}class ss{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new ss(ce.min(),se.empty(),-1)}static max(){return new ss(ce.max(),se.empty(),-1)}}function Ek(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=se.comparator(t.documentKey,e.documentKey),n!==0?n:Ee(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xk="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Tk{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ra(t){if(t.code!==q.FAILED_PRECONDITION||t.message!==xk)throw t;re("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&ue(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new G((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof G?n:G.resolve(n)}catch(n){return G.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):G.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):G.reject(n)}static resolve(e){return new G((n,r)=>{n(e)})}static reject(e){return new G((n,r)=>{r(e)})}static waitFor(e){return new G((n,r)=>{let s=0,i=0,o=!1;e.forEach(a=>{++s,a.next(()=>{++i,o&&i===s&&n()},u=>r(u))}),o=!0,i===s&&n()})}static or(e){let n=G.resolve(!1);for(const r of e)n=n.next(s=>s?G.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(e,n){return new G((r,s)=>{const i=e.length,o=new Array(i);let a=0;for(let u=0;u<i;u++){const c=u;n(e[c]).next(h=>{o[c]=h,++a,a===i&&r(o)},h=>s(h))}})}static doWhile(e,n){return new G((r,s)=>{const i=()=>{e()===!0?n().next(()=>{i()},s):r()};i()})}}function Ik(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function ba(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kf{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}Kf.oe=-1;function rc(t){return t==null}function xu(t){return t===0&&1/t==-1/0}function Ak(t){return typeof t=="number"&&Number.isInteger(t)&&!xu(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cy(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Gs(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function gw(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class We{constructor(e,n){this.comparator=e,this.root=n||gt.EMPTY}insert(e,n){return new We(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,gt.BLACK,null,null))}remove(e){return new We(this.comparator,this.root.remove(e,this.comparator).copy(null,null,gt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new ml(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new ml(this.root,e,this.comparator,!1)}getReverseIterator(){return new ml(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new ml(this.root,e,this.comparator,!0)}}class ml{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class gt{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??gt.RED,this.left=s??gt.EMPTY,this.right=i??gt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new gt(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return gt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return gt.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,gt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,gt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ue();const e=this.left.check();if(e!==this.right.check())throw ue();return e+(this.isRed()?0:1)}}gt.EMPTY=null,gt.RED=!0,gt.BLACK=!1;gt.EMPTY=new class{constructor(){this.size=0}get key(){throw ue()}get value(){throw ue()}get color(){throw ue()}get left(){throw ue()}get right(){throw ue()}copy(e,n,r,s,i){return this}insert(e,n,r){return new gt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _t{constructor(e){this.comparator=e,this.data=new We(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new hy(this.data.getIterator())}getIteratorFrom(e){return new hy(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof _t)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new _t(this.comparator);return n.data=e,n}}class hy{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rn{constructor(e){this.fields=e,e.sort(yt.comparator)}static empty(){return new rn([])}unionWith(e){let n=new _t(yt.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new rn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Mi(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yw extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Et{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new yw("Invalid base64 string: "+i):i}}(e);return new Et(n)}static fromUint8Array(e){const n=function(s){let i="";for(let o=0;o<s.length;++o)i+=String.fromCharCode(s[o]);return i}(e);return new Et(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ee(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Et.EMPTY_BYTE_STRING=new Et("");const Sk=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function is(t){if(ke(!!t),typeof t=="string"){let e=0;const n=Sk.exec(t);if(ke(!!n),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Xe(t.seconds),nanos:Xe(t.nanos)}}function Xe(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Bs(t){return typeof t=="string"?Et.fromBase64String(t):Et.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gf(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function Qf(t){const e=t.mapValue.fields.__previous_value__;return Gf(e)?Qf(e):e}function da(t){const e=is(t.mapValue.fields.__local_write_time__.timestampValue);return new je(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kk{constructor(e,n,r,s,i,o,a,u,c){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=u,this.useFetchStreams=c}}class fa{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new fa("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof fa&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gl={mapValue:{}};function zs(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Gf(t)?4:Rk(t)?9007199254740991:Ck(t)?10:11:ue()}function Jn(t,e){if(t===e)return!0;const n=zs(t);if(n!==zs(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return da(t).isEqual(da(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const o=is(s.timestampValue),a=is(i.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,i){return Bs(s.bytesValue).isEqual(Bs(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,i){return Xe(s.geoPointValue.latitude)===Xe(i.geoPointValue.latitude)&&Xe(s.geoPointValue.longitude)===Xe(i.geoPointValue.longitude)}(t,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return Xe(s.integerValue)===Xe(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const o=Xe(s.doubleValue),a=Xe(i.doubleValue);return o===a?xu(o)===xu(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return Mi(t.arrayValue.values||[],e.arrayValue.values||[],Jn);case 10:case 11:return function(s,i){const o=s.mapValue.fields||{},a=i.mapValue.fields||{};if(cy(o)!==cy(a))return!1;for(const u in o)if(o.hasOwnProperty(u)&&(a[u]===void 0||!Jn(o[u],a[u])))return!1;return!0}(t,e);default:return ue()}}function pa(t,e){return(t.values||[]).find(n=>Jn(n,e))!==void 0}function Vi(t,e){if(t===e)return 0;const n=zs(t),r=zs(e);if(n!==r)return Ee(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Ee(t.booleanValue,e.booleanValue);case 2:return function(i,o){const a=Xe(i.integerValue||i.doubleValue),u=Xe(o.integerValue||o.doubleValue);return a<u?-1:a>u?1:a===u?0:isNaN(a)?isNaN(u)?0:-1:1}(t,e);case 3:return dy(t.timestampValue,e.timestampValue);case 4:return dy(da(t),da(e));case 5:return Ee(t.stringValue,e.stringValue);case 6:return function(i,o){const a=Bs(i),u=Bs(o);return a.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(i,o){const a=i.split("/"),u=o.split("/");for(let c=0;c<a.length&&c<u.length;c++){const h=Ee(a[c],u[c]);if(h!==0)return h}return Ee(a.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,o){const a=Ee(Xe(i.latitude),Xe(o.latitude));return a!==0?a:Ee(Xe(i.longitude),Xe(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return fy(t.arrayValue,e.arrayValue);case 10:return function(i,o){var a,u,c,h;const f=i.fields||{},d=o.fields||{},v=(a=f.value)===null||a===void 0?void 0:a.arrayValue,x=(u=d.value)===null||u===void 0?void 0:u.arrayValue,k=Ee(((c=v==null?void 0:v.values)===null||c===void 0?void 0:c.length)||0,((h=x==null?void 0:x.values)===null||h===void 0?void 0:h.length)||0);return k!==0?k:fy(v,x)}(t.mapValue,e.mapValue);case 11:return function(i,o){if(i===gl.mapValue&&o===gl.mapValue)return 0;if(i===gl.mapValue)return 1;if(o===gl.mapValue)return-1;const a=i.fields||{},u=Object.keys(a),c=o.fields||{},h=Object.keys(c);u.sort(),h.sort();for(let f=0;f<u.length&&f<h.length;++f){const d=Ee(u[f],h[f]);if(d!==0)return d;const v=Vi(a[u[f]],c[h[f]]);if(v!==0)return v}return Ee(u.length,h.length)}(t.mapValue,e.mapValue);default:throw ue()}}function dy(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Ee(t,e);const n=is(t),r=is(e),s=Ee(n.seconds,r.seconds);return s!==0?s:Ee(n.nanos,r.nanos)}function fy(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const i=Vi(n[s],r[s]);if(i)return i}return Ee(n.length,r.length)}function Ui(t){return Td(t)}function Td(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=is(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Bs(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return se.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=Td(i);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const o of r)i?i=!1:s+=",",s+=`${o}:${Td(n.fields[o])}`;return s+"}"}(t.mapValue):ue()}function py(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Id(t){return!!t&&"integerValue"in t}function Yf(t){return!!t&&"arrayValue"in t}function my(t){return!!t&&"nullValue"in t}function gy(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Vl(t){return!!t&&"mapValue"in t}function Ck(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function Bo(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Gs(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Bo(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Bo(t.arrayValue.values[n]);return e}return Object.assign({},t)}function Rk(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qt{constructor(e){this.value=e}static empty(){return new qt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Vl(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Bo(n)}setAll(e){let n=yt.emptyPath(),r={},s=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const u=this.getFieldsMap(n);this.applyChanges(u,r,s),r={},s=[],n=a.popLast()}o?r[a.lastSegment()]=Bo(o):s.push(a.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());Vl(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Jn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];Vl(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){Gs(n,(s,i)=>e[s]=i);for(const s of r)delete e[s]}clone(){return new qt(Bo(this.value))}}function vw(t){const e=[];return Gs(t.fields,(n,r)=>{const s=new yt([n]);if(Vl(r)){const i=vw(r.mapValue).fields;if(i.length===0)e.push(s);else for(const o of i)e.push(s.child(o))}else e.push(s)}),new rn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pt{constructor(e,n,r,s,i,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=o,this.documentState=a}static newInvalidDocument(e){return new Pt(e,0,ce.min(),ce.min(),ce.min(),qt.empty(),0)}static newFoundDocument(e,n,r,s){return new Pt(e,1,n,ce.min(),r,s,0)}static newNoDocument(e,n){return new Pt(e,2,n,ce.min(),ce.min(),qt.empty(),0)}static newUnknownDocument(e,n){return new Pt(e,3,n,ce.min(),ce.min(),qt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(ce.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=qt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=qt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ce.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Pt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Pt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tu{constructor(e,n){this.position=e,this.inclusive=n}}function yy(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],o=t.position[s];if(i.field.isKeyField()?r=se.comparator(se.fromName(o.referenceValue),n.key):r=Vi(o,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function vy(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Jn(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ma{constructor(e,n="asc"){this.field=e,this.dir=n}}function bk(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _w{}class st extends _w{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new Pk(e,n,r):n==="array-contains"?new Ok(e,r):n==="in"?new jk(e,r):n==="not-in"?new Mk(e,r):n==="array-contains-any"?new Vk(e,r):new st(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new Dk(e,r):new Lk(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Vi(n,this.value)):n!==null&&zs(this.value)===zs(n)&&this.matchesComparison(Vi(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ue()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Dn extends _w{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new Dn(e,n)}matches(e){return ww(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function ww(t){return t.op==="and"}function Ew(t){return Nk(t)&&ww(t)}function Nk(t){for(const e of t.filters)if(e instanceof Dn)return!1;return!0}function Ad(t){if(t instanceof st)return t.field.canonicalString()+t.op.toString()+Ui(t.value);if(Ew(t))return t.filters.map(e=>Ad(e)).join(",");{const e=t.filters.map(n=>Ad(n)).join(",");return`${t.op}(${e})`}}function xw(t,e){return t instanceof st?function(r,s){return s instanceof st&&r.op===s.op&&r.field.isEqual(s.field)&&Jn(r.value,s.value)}(t,e):t instanceof Dn?function(r,s){return s instanceof Dn&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((i,o,a)=>i&&xw(o,s.filters[a]),!0):!1}(t,e):void ue()}function Tw(t){return t instanceof st?function(n){return`${n.field.canonicalString()} ${n.op} ${Ui(n.value)}`}(t):t instanceof Dn?function(n){return n.op.toString()+" {"+n.getFilters().map(Tw).join(" ,")+"}"}(t):"Filter"}class Pk extends st{constructor(e,n,r){super(e,n,r),this.key=se.fromName(r.referenceValue)}matches(e){const n=se.comparator(e.key,this.key);return this.matchesComparison(n)}}class Dk extends st{constructor(e,n){super(e,"in",n),this.keys=Iw("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class Lk extends st{constructor(e,n){super(e,"not-in",n),this.keys=Iw("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function Iw(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>se.fromName(r.referenceValue))}class Ok extends st{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Yf(n)&&pa(n.arrayValue,this.value)}}class jk extends st{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&pa(this.value.arrayValue,n)}}class Mk extends st{constructor(e,n){super(e,"not-in",n)}matches(e){if(pa(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!pa(this.value.arrayValue,n)}}class Vk extends st{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Yf(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>pa(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uk{constructor(e,n=null,r=[],s=[],i=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=o,this.endAt=a,this.ue=null}}function _y(t,e=null,n=[],r=[],s=null,i=null,o=null){return new Uk(t,e,n,r,s,i,o)}function Xf(t){const e=he(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Ad(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),rc(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Ui(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Ui(r)).join(",")),e.ue=n}return e.ue}function Jf(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!bk(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!xw(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!vy(t.startAt,e.startAt)&&vy(t.endAt,e.endAt)}function Sd(t){return se.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qi{constructor(e,n=null,r=[],s=[],i=null,o="F",a=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=o,this.startAt=a,this.endAt=u,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function Fk(t,e,n,r,s,i,o,a){return new Qi(t,e,n,r,s,i,o,a)}function Zf(t){return new Qi(t)}function wy(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function Aw(t){return t.collectionGroup!==null}function zo(t){const e=he(t);if(e.ce===null){e.ce=[];const n=new Set;for(const i of e.explicitOrderBy)e.ce.push(i),n.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new _t(yt.comparator);return o.filters.forEach(u=>{u.getFlattenedFilters().forEach(c=>{c.isInequality()&&(a=a.add(c.field))})}),a})(e).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||e.ce.push(new ma(i,r))}),n.has(yt.keyField().canonicalString())||e.ce.push(new ma(yt.keyField(),r))}return e.ce}function Qn(t){const e=he(t);return e.le||(e.le=Bk(e,zo(t))),e.le}function Bk(t,e){if(t.limitType==="F")return _y(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new ma(s.field,i)});const n=t.endAt?new Tu(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Tu(t.startAt.position,t.startAt.inclusive):null;return _y(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function kd(t,e){const n=t.filters.concat([e]);return new Qi(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Iu(t,e,n){return new Qi(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function sc(t,e){return Jf(Qn(t),Qn(e))&&t.limitType===e.limitType}function Sw(t){return`${Xf(Qn(t))}|lt:${t.limitType}`}function ni(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>Tw(s)).join(", ")}]`),rc(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>Ui(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>Ui(s)).join(",")),`Target(${r})`}(Qn(t))}; limitType=${t.limitType})`}function ic(t,e){return e.isFoundDocument()&&function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):se.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(t,e)&&function(r,s){for(const i of zo(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(o,a,u){const c=yy(o,a,u);return o.inclusive?c<=0:c<0}(r.startAt,zo(r),s)||r.endAt&&!function(o,a,u){const c=yy(o,a,u);return o.inclusive?c>=0:c>0}(r.endAt,zo(r),s))}(t,e)}function zk(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function kw(t){return(e,n)=>{let r=!1;for(const s of zo(t)){const i=$k(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function $k(t,e,n){const r=t.field.isKeyField()?se.comparator(e.key,n.key):function(i,o,a){const u=o.data.field(i),c=a.data.field(i);return u!==null&&c!==null?Vi(u,c):ue()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return ue()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yi{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Gs(this.inner,(n,r)=>{for(const[s,i]of r)e(s,i)})}isEmpty(){return gw(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hk=new We(se.comparator);function wr(){return Hk}const Cw=new We(se.comparator);function Co(...t){let e=Cw;for(const n of t)e=e.insert(n.key,n);return e}function Rw(t){let e=Cw;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function As(){return $o()}function bw(){return $o()}function $o(){return new Yi(t=>t.toString(),(t,e)=>t.isEqual(e))}const Wk=new We(se.comparator),qk=new _t(se.comparator);function me(...t){let e=qk;for(const n of t)e=e.add(n);return e}const Kk=new _t(Ee);function Gk(){return Kk}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ep(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:xu(e)?"-0":e}}function Nw(t){return{integerValue:""+t}}function Qk(t,e){return Ak(e)?Nw(e):ep(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oc{constructor(){this._=void 0}}function Yk(t,e,n){return t instanceof Au?function(s,i){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&Gf(i)&&(i=Qf(i)),i&&(o.fields.__previous_value__=i),{mapValue:o}}(n,e):t instanceof ga?Dw(t,e):t instanceof ya?Lw(t,e):function(s,i){const o=Pw(s,i),a=Ey(o)+Ey(s.Pe);return Id(o)&&Id(s.Pe)?Nw(a):ep(s.serializer,a)}(t,e)}function Xk(t,e,n){return t instanceof ga?Dw(t,e):t instanceof ya?Lw(t,e):n}function Pw(t,e){return t instanceof Su?function(r){return Id(r)||function(i){return!!i&&"doubleValue"in i}(r)}(e)?e:{integerValue:0}:null}class Au extends oc{}class ga extends oc{constructor(e){super(),this.elements=e}}function Dw(t,e){const n=Ow(e);for(const r of t.elements)n.some(s=>Jn(s,r))||n.push(r);return{arrayValue:{values:n}}}class ya extends oc{constructor(e){super(),this.elements=e}}function Lw(t,e){let n=Ow(e);for(const r of t.elements)n=n.filter(s=>!Jn(s,r));return{arrayValue:{values:n}}}class Su extends oc{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function Ey(t){return Xe(t.integerValue||t.doubleValue)}function Ow(t){return Yf(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function Jk(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof ga&&s instanceof ga||r instanceof ya&&s instanceof ya?Mi(r.elements,s.elements,Jn):r instanceof Su&&s instanceof Su?Jn(r.Pe,s.Pe):r instanceof Au&&s instanceof Au}(t.transform,e.transform)}class Zk{constructor(e,n){this.version=e,this.transformResults=n}}class yn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new yn}static exists(e){return new yn(void 0,e)}static updateTime(e){return new yn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Ul(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class ac{}function jw(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new tp(t.key,yn.none()):new Na(t.key,t.data,yn.none());{const n=t.data,r=qt.empty();let s=new _t(yt.comparator);for(let i of e.fields)if(!s.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?r.delete(i):r.set(i,o),s=s.add(i)}return new hs(t.key,r,new rn(s.toArray()),yn.none())}}function eC(t,e,n){t instanceof Na?function(s,i,o){const a=s.value.clone(),u=Ty(s.fieldTransforms,i,o.transformResults);a.setAll(u),i.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof hs?function(s,i,o){if(!Ul(s.precondition,i))return void i.convertToUnknownDocument(o.version);const a=Ty(s.fieldTransforms,i,o.transformResults),u=i.data;u.setAll(Mw(s)),u.setAll(a),i.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(t,e,n):function(s,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function Ho(t,e,n,r){return t instanceof Na?function(i,o,a,u){if(!Ul(i.precondition,o))return a;const c=i.value.clone(),h=Iy(i.fieldTransforms,u,o);return c.setAll(h),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),null}(t,e,n,r):t instanceof hs?function(i,o,a,u){if(!Ul(i.precondition,o))return a;const c=Iy(i.fieldTransforms,u,o),h=o.data;return h.setAll(Mw(i)),h.setAll(c),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),a===null?null:a.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(f=>f.field))}(t,e,n,r):function(i,o,a){return Ul(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function tC(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=Pw(r.transform,s||null);i!=null&&(n===null&&(n=qt.empty()),n.set(r.field,i))}return n||null}function xy(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&Mi(r,s,(i,o)=>Jk(i,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Na extends ac{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class hs extends ac{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function Mw(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function Ty(t,e,n){const r=new Map;ke(t.length===n.length);for(let s=0;s<n.length;s++){const i=t[s],o=i.transform,a=e.data.field(i.field);r.set(i.field,Xk(o,a,n[s]))}return r}function Iy(t,e,n){const r=new Map;for(const s of t){const i=s.transform,o=n.data.field(s.field);r.set(s.field,Yk(i,o,e))}return r}class tp extends ac{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class nC extends ac{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rC{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&eC(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Ho(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Ho(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=bw();return this.mutations.forEach(s=>{const i=e.get(s.key),o=i.overlayedDocument;let a=this.applyToLocalView(o,i.mutatedFields);a=n.has(s.key)?null:a;const u=jw(o,a);u!==null&&r.set(s.key,u),o.isValidDocument()||o.convertToNoDocument(ce.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),me())}isEqual(e){return this.batchId===e.batchId&&Mi(this.mutations,e.mutations,(n,r)=>xy(n,r))&&Mi(this.baseMutations,e.baseMutations,(n,r)=>xy(n,r))}}class np{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){ke(e.mutations.length===r.length);let s=function(){return Wk}();const i=e.mutations;for(let o=0;o<i.length;o++)s=s.insert(i[o].key,r[o].version);return new np(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sC{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iC{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var nt,ve;function oC(t){switch(t){default:return ue();case q.CANCELLED:case q.UNKNOWN:case q.DEADLINE_EXCEEDED:case q.RESOURCE_EXHAUSTED:case q.INTERNAL:case q.UNAVAILABLE:case q.UNAUTHENTICATED:return!1;case q.INVALID_ARGUMENT:case q.NOT_FOUND:case q.ALREADY_EXISTS:case q.PERMISSION_DENIED:case q.FAILED_PRECONDITION:case q.ABORTED:case q.OUT_OF_RANGE:case q.UNIMPLEMENTED:case q.DATA_LOSS:return!0}}function Vw(t){if(t===void 0)return _r("GRPC error has no .code"),q.UNKNOWN;switch(t){case nt.OK:return q.OK;case nt.CANCELLED:return q.CANCELLED;case nt.UNKNOWN:return q.UNKNOWN;case nt.DEADLINE_EXCEEDED:return q.DEADLINE_EXCEEDED;case nt.RESOURCE_EXHAUSTED:return q.RESOURCE_EXHAUSTED;case nt.INTERNAL:return q.INTERNAL;case nt.UNAVAILABLE:return q.UNAVAILABLE;case nt.UNAUTHENTICATED:return q.UNAUTHENTICATED;case nt.INVALID_ARGUMENT:return q.INVALID_ARGUMENT;case nt.NOT_FOUND:return q.NOT_FOUND;case nt.ALREADY_EXISTS:return q.ALREADY_EXISTS;case nt.PERMISSION_DENIED:return q.PERMISSION_DENIED;case nt.FAILED_PRECONDITION:return q.FAILED_PRECONDITION;case nt.ABORTED:return q.ABORTED;case nt.OUT_OF_RANGE:return q.OUT_OF_RANGE;case nt.UNIMPLEMENTED:return q.UNIMPLEMENTED;case nt.DATA_LOSS:return q.DATA_LOSS;default:return ue()}}(ve=nt||(nt={}))[ve.OK=0]="OK",ve[ve.CANCELLED=1]="CANCELLED",ve[ve.UNKNOWN=2]="UNKNOWN",ve[ve.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ve[ve.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ve[ve.NOT_FOUND=5]="NOT_FOUND",ve[ve.ALREADY_EXISTS=6]="ALREADY_EXISTS",ve[ve.PERMISSION_DENIED=7]="PERMISSION_DENIED",ve[ve.UNAUTHENTICATED=16]="UNAUTHENTICATED",ve[ve.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ve[ve.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ve[ve.ABORTED=10]="ABORTED",ve[ve.OUT_OF_RANGE=11]="OUT_OF_RANGE",ve[ve.UNIMPLEMENTED=12]="UNIMPLEMENTED",ve[ve.INTERNAL=13]="INTERNAL",ve[ve.UNAVAILABLE=14]="UNAVAILABLE",ve[ve.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aC(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lC=new Rs([4294967295,4294967295],0);function Ay(t){const e=aC().encode(t),n=new lw;return n.update(e),new Uint8Array(n.digest())}function Sy(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new Rs([n,r],0),new Rs([s,i],0)]}class rp{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Ro(`Invalid padding: ${n}`);if(r<0)throw new Ro(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Ro(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Ro(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=Rs.fromNumber(this.Ie)}Ee(e,n,r){let s=e.add(n.multiply(Rs.fromNumber(r)));return s.compare(lC)===1&&(s=new Rs([s.getBits(0),s.getBits(1)],0)),s.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=Ay(e),[r,s]=Sy(n);for(let i=0;i<this.hashCount;i++){const o=this.Ee(r,s,i);if(!this.de(o))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new rp(i,s,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.Ie===0)return;const n=Ay(e),[r,s]=Sy(n);for(let i=0;i<this.hashCount;i++){const o=this.Ee(r,s,i);this.Ae(o)}}Ae(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Ro extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lc{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,Pa.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new lc(ce.min(),s,new We(Ee),wr(),me())}}class Pa{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Pa(r,n,me(),me(),me())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fl{constructor(e,n,r,s){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=s}}class Uw{constructor(e,n){this.targetId=e,this.me=n}}class Fw{constructor(e,n,r=Et.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class ky{constructor(){this.fe=0,this.ge=Ry(),this.pe=Et.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=me(),n=me(),r=me();return this.ge.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:ue()}}),new Pa(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=Ry()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,ke(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class uC{constructor(e){this.Le=e,this.Be=new Map,this.ke=wr(),this.qe=Cy(),this.Qe=new We(Ee)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:ue()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,s)=>{this.ze(s)&&n(s)})}He(e){const n=e.targetId,r=e.me.count,s=this.Je(n);if(s){const i=s.target;if(Sd(i))if(r===0){const o=new se(i.path);this.Ue(n,o,Pt.newNoDocument(o,ce.min()))}else ke(r===1);else{const o=this.Ye(n);if(o!==r){const a=this.Ze(e),u=a?this.Xe(a,e,o):1;if(u!==0){this.je(n);const c=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,c)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let o,a;try{o=Bs(r).toUint8Array()}catch(u){if(u instanceof yw)return ji("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{a=new rp(o,s,i)}catch(u){return ji(u instanceof Ro?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return a.Ie===0?null:a}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let s=0;return r.forEach(i=>{const o=this.Le.tt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(a)||(this.Ue(n,i,null),s++)}),s}rt(e){const n=new Map;this.Be.forEach((i,o)=>{const a=this.Je(o);if(a){if(i.current&&Sd(a.target)){const u=new se(a.target.path);this.ke.get(u)!==null||this.it(o,u)||this.Ue(o,u,Pt.newNoDocument(u,e))}i.be&&(n.set(o,i.ve()),i.Ce())}});let r=me();this.qe.forEach((i,o)=>{let a=!0;o.forEachWhile(u=>{const c=this.Je(u);return!c||c.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(i))}),this.ke.forEach((i,o)=>o.setReadTime(e));const s=new lc(e,n,this.Qe,this.ke,r);return this.ke=wr(),this.qe=Cy(),this.Qe=new We(Ee),s}$e(e,n){if(!this.ze(e))return;const r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;const s=this.Ge(e);this.it(e,n)?s.Fe(n,1):s.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new ky,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new _t(Ee),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||re("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new ky),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function Cy(){return new We(se.comparator)}function Ry(){return new We(se.comparator)}const cC={asc:"ASCENDING",desc:"DESCENDING"},hC={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},dC={and:"AND",or:"OR"};class fC{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Cd(t,e){return t.useProto3Json||rc(e)?e:{value:e}}function ku(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Bw(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function pC(t,e){return ku(t,e.toTimestamp())}function Yn(t){return ke(!!t),ce.fromTimestamp(function(n){const r=is(n);return new je(r.seconds,r.nanos)}(t))}function sp(t,e){return Rd(t,e).canonicalString()}function Rd(t,e){const n=function(s){return new Le(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function zw(t){const e=Le.fromString(t);return ke(Kw(e)),e}function bd(t,e){return sp(t.databaseId,e.path)}function fh(t,e){const n=zw(e);if(n.get(1)!==t.databaseId.projectId)throw new te(q.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new te(q.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new se(Hw(n))}function $w(t,e){return sp(t.databaseId,e)}function mC(t){const e=zw(t);return e.length===4?Le.emptyPath():Hw(e)}function Nd(t){return new Le(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function Hw(t){return ke(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function by(t,e,n){return{name:bd(t,e),fields:n.value.mapValue.fields}}function gC(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:ue()}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(c,h){return c.useProto3Json?(ke(h===void 0||typeof h=="string"),Et.fromBase64String(h||"")):(ke(h===void 0||h instanceof Buffer||h instanceof Uint8Array),Et.fromUint8Array(h||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(c){const h=c.code===void 0?q.UNKNOWN:Vw(c.code);return new te(h,c.message||"")}(o);n=new Fw(r,s,i,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=fh(t,r.document.name),i=Yn(r.document.updateTime),o=r.document.createTime?Yn(r.document.createTime):ce.min(),a=new qt({mapValue:{fields:r.document.fields}}),u=Pt.newFoundDocument(s,i,o,a),c=r.targetIds||[],h=r.removedTargetIds||[];n=new Fl(c,h,u.key,u)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=fh(t,r.document),i=r.readTime?Yn(r.readTime):ce.min(),o=Pt.newNoDocument(s,i),a=r.removedTargetIds||[];n=new Fl([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=fh(t,r.document),i=r.removedTargetIds||[];n=new Fl([],i,s,null)}else{if(!("filter"in e))return ue();{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,o=new iC(s,i),a=r.targetId;n=new Uw(a,o)}}return n}function yC(t,e){let n;if(e instanceof Na)n={update:by(t,e.key,e.value)};else if(e instanceof tp)n={delete:bd(t,e.key)};else if(e instanceof hs)n={update:by(t,e.key,e.data),updateMask:SC(e.fieldMask)};else{if(!(e instanceof nC))return ue();n={verify:bd(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,o){const a=o.transform;if(a instanceof Au)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof ga)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof ya)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Su)return{fieldPath:o.field.canonicalString(),increment:a.Pe};throw ue()}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:pC(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:ue()}(t,e.precondition)),n}function vC(t,e){return t&&t.length>0?(ke(e!==void 0),t.map(n=>function(s,i){let o=s.updateTime?Yn(s.updateTime):Yn(i);return o.isEqual(ce.min())&&(o=Yn(i)),new Zk(o,s.transformResults||[])}(n,e))):[]}function _C(t,e){return{documents:[$w(t,e.path)]}}function wC(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=$w(t,s);const i=function(c){if(c.length!==0)return qw(Dn.create(c,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const o=function(c){if(c.length!==0)return c.map(h=>function(d){return{field:ri(d.field),direction:TC(d.dir)}}(h))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=Cd(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{_t:n,parent:s}}function EC(t){let e=mC(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){ke(r===1);const h=n.from[0];h.allDescendants?s=h.collectionId:e=e.child(h.collectionId)}let i=[];n.where&&(i=function(f){const d=Ww(f);return d instanceof Dn&&Ew(d)?d.getFilters():[d]}(n.where));let o=[];n.orderBy&&(o=function(f){return f.map(d=>function(x){return new ma(si(x.field),function(P){switch(P){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(x.direction))}(d))}(n.orderBy));let a=null;n.limit&&(a=function(f){let d;return d=typeof f=="object"?f.value:f,rc(d)?null:d}(n.limit));let u=null;n.startAt&&(u=function(f){const d=!!f.before,v=f.values||[];return new Tu(v,d)}(n.startAt));let c=null;return n.endAt&&(c=function(f){const d=!f.before,v=f.values||[];return new Tu(v,d)}(n.endAt)),Fk(e,s,o,i,a,"F",u,c)}function xC(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ue()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function Ww(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=si(n.unaryFilter.field);return st.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=si(n.unaryFilter.field);return st.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=si(n.unaryFilter.field);return st.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=si(n.unaryFilter.field);return st.create(o,"!=",{nullValue:"NULL_VALUE"});default:return ue()}}(t):t.fieldFilter!==void 0?function(n){return st.create(si(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ue()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Dn.create(n.compositeFilter.filters.map(r=>Ww(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return ue()}}(n.compositeFilter.op))}(t):ue()}function TC(t){return cC[t]}function IC(t){return hC[t]}function AC(t){return dC[t]}function ri(t){return{fieldPath:t.canonicalString()}}function si(t){return yt.fromServerFormat(t.fieldPath)}function qw(t){return t instanceof st?function(n){if(n.op==="=="){if(gy(n.value))return{unaryFilter:{field:ri(n.field),op:"IS_NAN"}};if(my(n.value))return{unaryFilter:{field:ri(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(gy(n.value))return{unaryFilter:{field:ri(n.field),op:"IS_NOT_NAN"}};if(my(n.value))return{unaryFilter:{field:ri(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ri(n.field),op:IC(n.op),value:n.value}}}(t):t instanceof Dn?function(n){const r=n.getFilters().map(s=>qw(s));return r.length===1?r[0]:{compositeFilter:{op:AC(n.op),filters:r}}}(t):ue()}function SC(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function Kw(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zr{constructor(e,n,r,s,i=ce.min(),o=ce.min(),a=Et.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=u}withSequenceNumber(e){return new zr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new zr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new zr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new zr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kC{constructor(e){this.ct=e}}function CC(t){const e=EC({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Iu(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RC{constructor(){this.un=new bC}addToCollectionParentIndex(e,n){return this.un.add(n),G.resolve()}getCollectionParents(e,n){return G.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return G.resolve()}deleteFieldIndex(e,n){return G.resolve()}deleteAllFieldIndexes(e){return G.resolve()}createTargetIndexes(e,n){return G.resolve()}getDocumentsMatchingTarget(e,n){return G.resolve(null)}getIndexType(e,n){return G.resolve(0)}getFieldIndexes(e,n){return G.resolve([])}getNextCollectionGroupToUpdate(e){return G.resolve(null)}getMinOffset(e,n){return G.resolve(ss.min())}getMinOffsetFromCollectionGroup(e,n){return G.resolve(ss.min())}updateCollectionGroup(e,n,r){return G.resolve()}updateIndexEntries(e,n){return G.resolve()}}class bC{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new _t(Le.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new _t(Le.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fi{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new Fi(0)}static kn(){return new Fi(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NC{constructor(){this.changes=new Yi(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Pt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?G.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PC{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DC{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&Ho(r.mutation,s,rn.empty(),je.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,me()).next(()=>r))}getLocalViewOfDocuments(e,n,r=me()){const s=As();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(i=>{let o=Co();return i.forEach((a,u)=>{o=o.insert(a,u.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=As();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,me()))}populateOverlays(e,n,r){const s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,s){let i=wr();const o=$o(),a=function(){return $o()}();return n.forEach((u,c)=>{const h=r.get(c.key);s.has(c.key)&&(h===void 0||h.mutation instanceof hs)?i=i.insert(c.key,c):h!==void 0?(o.set(c.key,h.mutation.getFieldMask()),Ho(h.mutation,c,h.mutation.getFieldMask(),je.now())):o.set(c.key,rn.empty())}),this.recalculateAndSaveOverlays(e,i).next(u=>(u.forEach((c,h)=>o.set(c,h)),n.forEach((c,h)=>{var f;return a.set(c,new PC(h,(f=o.get(c))!==null&&f!==void 0?f:null))}),a))}recalculateAndSaveOverlays(e,n){const r=$o();let s=new We((o,a)=>o-a),i=me();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(u=>{const c=n.get(u);if(c===null)return;let h=r.get(u)||rn.empty();h=a.applyToLocalView(c,h),r.set(u,h);const f=(s.get(a.batchId)||me()).add(u);s=s.insert(a.batchId,f)})}).next(()=>{const o=[],a=s.getReverseIterator();for(;a.hasNext();){const u=a.getNext(),c=u.key,h=u.value,f=bw();h.forEach(d=>{if(!i.has(d)){const v=jw(n.get(d),r.get(d));v!==null&&f.set(d,v),i=i.add(d)}}),o.push(this.documentOverlayCache.saveOverlays(e,c,f))}return G.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return function(o){return se.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):Aw(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(i=>{const o=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):G.resolve(As());let a=-1,u=i;return o.next(c=>G.forEach(c,(h,f)=>(a<f.largestBatchId&&(a=f.largestBatchId),i.get(h)?G.resolve():this.remoteDocumentCache.getEntry(e,h).next(d=>{u=u.insert(h,d)}))).next(()=>this.populateOverlays(e,c,i)).next(()=>this.computeViews(e,u,c,me())).next(h=>({batchId:a,changes:Rw(h)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new se(n)).next(r=>{let s=Co();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const i=n.collectionGroup;let o=Co();return this.indexManager.getCollectionParents(e,i).next(a=>G.forEach(a,u=>{const c=function(f,d){return new Qi(d,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(n,u.child(i));return this.getDocumentsMatchingCollectionQuery(e,c,r,s).next(h=>{h.forEach((f,d)=>{o=o.insert(f,d)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i,s))).next(o=>{i.forEach((u,c)=>{const h=c.getKey();o.get(h)===null&&(o=o.insert(h,Pt.newInvalidDocument(h)))});let a=Co();return o.forEach((u,c)=>{const h=i.get(u);h!==void 0&&Ho(h.mutation,c,rn.empty(),je.now()),ic(n,c)&&(a=a.insert(u,c))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LC{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return G.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:Yn(s.createTime)}}(n)),G.resolve()}getNamedQuery(e,n){return G.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(s){return{name:s.name,query:CC(s.bundledQuery),readTime:Yn(s.readTime)}}(n)),G.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OC{constructor(){this.overlays=new We(se.comparator),this.Ir=new Map}getOverlay(e,n){return G.resolve(this.overlays.get(n))}getOverlays(e,n){const r=As();return G.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,i)=>{this.ht(e,n,i)}),G.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.Ir.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.Ir.delete(r)),G.resolve()}getOverlaysForCollection(e,n,r){const s=As(),i=n.length+1,o=new se(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const u=a.getNext().value,c=u.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===i&&u.largestBatchId>r&&s.set(u.getKey(),u)}return G.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new We((c,h)=>c-h);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>r){let h=i.get(c.largestBatchId);h===null&&(h=As(),i=i.insert(c.largestBatchId,h)),h.set(c.getKey(),c)}}const a=As(),u=i.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((c,h)=>a.set(c,h)),!(a.size()>=s)););return G.resolve(a)}ht(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const o=this.Ir.get(s.largestBatchId).delete(r.key);this.Ir.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new sC(n,r));let i=this.Ir.get(n);i===void 0&&(i=me(),this.Ir.set(n,i)),this.Ir.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jC{constructor(){this.sessionToken=Et.EMPTY_BYTE_STRING}getSessionToken(e){return G.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,G.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ip{constructor(){this.Tr=new _t(ht.Er),this.dr=new _t(ht.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const r=new ht(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Vr(new ht(e,n))}mr(e,n){e.forEach(r=>this.removeReference(r,n))}gr(e){const n=new se(new Le([])),r=new ht(n,e),s=new ht(n,e+1),i=[];return this.dr.forEachInRange([r,s],o=>{this.Vr(o),i.push(o.key)}),i}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new se(new Le([])),r=new ht(n,e),s=new ht(n,e+1);let i=me();return this.dr.forEachInRange([r,s],o=>{i=i.add(o.key)}),i}containsKey(e){const n=new ht(e,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class ht{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return se.comparator(e.key,n.key)||Ee(e.wr,n.wr)}static Ar(e,n){return Ee(e.wr,n.wr)||se.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MC{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new _t(ht.Er)}checkEmpty(e){return G.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new rC(i,n,r,s);this.mutationQueue.push(o);for(const a of s)this.br=this.br.add(new ht(a.key,i)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return G.resolve(o)}lookupMutationBatch(e,n){return G.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.vr(r),i=s<0?0:s;return G.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return G.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return G.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new ht(n,0),s=new ht(n,Number.POSITIVE_INFINITY),i=[];return this.br.forEachInRange([r,s],o=>{const a=this.Dr(o.wr);i.push(a)}),G.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new _t(Ee);return n.forEach(s=>{const i=new ht(s,0),o=new ht(s,Number.POSITIVE_INFINITY);this.br.forEachInRange([i,o],a=>{r=r.add(a.wr)})}),G.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;se.isDocumentKey(i)||(i=i.child(""));const o=new ht(new se(i),0);let a=new _t(Ee);return this.br.forEachWhile(u=>{const c=u.key.path;return!!r.isPrefixOf(c)&&(c.length===s&&(a=a.add(u.wr)),!0)},o),G.resolve(this.Cr(a))}Cr(e){const n=[];return e.forEach(r=>{const s=this.Dr(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){ke(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return G.forEach(n.mutations,s=>{const i=new ht(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,n){const r=new ht(n,0),s=this.br.firstAfterOrEqual(r);return G.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,G.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VC{constructor(e){this.Mr=e,this.docs=function(){return new We(se.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,o=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return G.resolve(r?r.document.mutableCopy():Pt.newInvalidDocument(n))}getEntries(e,n){let r=wr();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():Pt.newInvalidDocument(s))}),G.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let i=wr();const o=n.path,a=new se(o.child("")),u=this.docs.getIteratorFrom(a);for(;u.hasNext();){const{key:c,value:{document:h}}=u.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||Ek(wk(h),r)<=0||(s.has(h.key)||ic(n,h))&&(i=i.insert(h.key,h.mutableCopy()))}return G.resolve(i)}getAllFromCollectionGroup(e,n,r,s){ue()}Or(e,n){return G.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new UC(this)}getSize(e){return G.resolve(this.size)}}class UC extends NC{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.cr.addEntry(e,s)):this.cr.removeEntry(r)}),G.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FC{constructor(e){this.persistence=e,this.Nr=new Yi(n=>Xf(n),Jf),this.lastRemoteSnapshotVersion=ce.min(),this.highestTargetId=0,this.Lr=0,this.Br=new ip,this.targetCount=0,this.kr=Fi.Bn()}forEachTarget(e,n){return this.Nr.forEach((r,s)=>n(s)),G.resolve()}getLastRemoteSnapshotVersion(e){return G.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return G.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),G.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),G.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new Fi(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,G.resolve()}updateTargetData(e,n){return this.Kn(n),G.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,G.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.Nr.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Nr.delete(o),i.push(this.removeMatchingKeysForTargetId(e,a.targetId)),s++)}),G.waitFor(i).next(()=>s)}getTargetCount(e){return G.resolve(this.targetCount)}getTargetData(e,n){const r=this.Nr.get(n)||null;return G.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),G.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(o=>{i.push(s.markPotentiallyOrphaned(e,o))}),G.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),G.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Br.yr(n);return G.resolve(r)}containsKey(e,n){return G.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BC{constructor(e,n){this.qr={},this.overlays={},this.Qr=new Kf(0),this.Kr=!1,this.Kr=!0,this.$r=new jC,this.referenceDelegate=e(this),this.Ur=new FC(this),this.indexManager=new RC,this.remoteDocumentCache=function(s){return new VC(s)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new kC(n),this.Gr=new LC(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new OC,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new MC(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){re("MemoryPersistence","Starting transaction:",e);const s=new zC(this.Qr.next());return this.referenceDelegate.zr(),r(s).next(i=>this.referenceDelegate.jr(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Hr(e,n){return G.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,n)))}}class zC extends Tk{constructor(e){super(),this.currentSequenceNumber=e}}class op{constructor(e){this.persistence=e,this.Jr=new ip,this.Yr=null}static Zr(e){return new op(e)}get Xr(){if(this.Yr)return this.Yr;throw ue()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),G.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),G.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),G.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(s=>this.Xr.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(i=>this.Xr.add(i.toString()))}).next(()=>r.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return G.forEach(this.Xr,r=>{const s=se.fromPath(r);return this.ei(e,s).next(i=>{i||n.removeEntry(s,ce.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return G.or([()=>G.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ap{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=s}static Wi(e,n){let r=me(),s=me();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new ap(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $C{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HC{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return AT()?8:Ik(Lt())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,s){const i={result:null};return this.Yi(e,n).next(o=>{i.result=o}).next(()=>{if(!i.result)return this.Zi(e,n,s,r).next(o=>{i.result=o})}).next(()=>{if(i.result)return;const o=new $C;return this.Xi(e,n,o).next(a=>{if(i.result=a,this.zi)return this.es(e,n,o,a.size)})}).next(()=>i.result)}es(e,n,r,s){return r.documentReadCount<this.ji?(_o()<=ye.DEBUG&&re("QueryEngine","SDK will not create cache indexes for query:",ni(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),G.resolve()):(_o()<=ye.DEBUG&&re("QueryEngine","Query:",ni(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.Hi*s?(_o()<=ye.DEBUG&&re("QueryEngine","The SDK decides to create cache indexes for query:",ni(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Qn(n))):G.resolve())}Yi(e,n){if(wy(n))return G.resolve(null);let r=Qn(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=Iu(n,null,"F"),r=Qn(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{const o=me(...i);return this.Ji.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(u=>{const c=this.ts(n,a);return this.ns(n,c,o,u.readTime)?this.Yi(e,Iu(n,null,"F")):this.rs(e,c,n,u)}))})))}Zi(e,n,r,s){return wy(n)||s.isEqual(ce.min())?G.resolve(null):this.Ji.getDocuments(e,r).next(i=>{const o=this.ts(n,i);return this.ns(n,o,r,s)?G.resolve(null):(_o()<=ye.DEBUG&&re("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),ni(n)),this.rs(e,o,n,_k(s,-1)).next(a=>a))})}ts(e,n){let r=new _t(kw(e));return n.forEach((s,i)=>{ic(e,i)&&(r=r.add(i))}),r}ns(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}Xi(e,n,r){return _o()<=ye.DEBUG&&re("QueryEngine","Using full collection scan to execute query:",ni(n)),this.Ji.getDocumentsMatchingQuery(e,n,ss.min(),r)}rs(e,n,r,s){return this.Ji.getDocumentsMatchingQuery(e,r,s).next(i=>(n.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WC{constructor(e,n,r,s){this.persistence=e,this.ss=n,this.serializer=s,this.os=new We(Ee),this._s=new Yi(i=>Xf(i),Jf),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new DC(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function qC(t,e,n,r){return new WC(t,e,n,r)}async function Gw(t,e){const n=he(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n.ls(e),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const o=[],a=[];let u=me();for(const c of s){o.push(c.batchId);for(const h of c.mutations)u=u.add(h.key)}for(const c of i){a.push(c.batchId);for(const h of c.mutations)u=u.add(h.key)}return n.localDocuments.getDocuments(r,u).next(c=>({hs:c,removedBatchIds:o,addedBatchIds:a}))})})}function KC(t,e){const n=he(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),i=n.cs.newChangeBuffer({trackRemovals:!0});return function(a,u,c,h){const f=c.batch,d=f.keys();let v=G.resolve();return d.forEach(x=>{v=v.next(()=>h.getEntry(u,x)).next(k=>{const P=c.docVersions.get(x);ke(P!==null),k.version.compareTo(P)<0&&(f.applyToRemoteDocument(k,c),k.isValidDocument()&&(k.setReadTime(c.commitVersion),h.addEntry(k)))})}),v.next(()=>a.mutationQueue.removeMutationBatch(u,f))}(n,r,e,i).next(()=>i.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let u=me();for(let c=0;c<a.mutationResults.length;++c)a.mutationResults[c].transformResults.length>0&&(u=u.add(a.batch.mutations[c].key));return u}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function Qw(t){const e=he(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function GC(t,e){const n=he(t),r=e.snapshotVersion;let s=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=n.cs.newChangeBuffer({trackRemovals:!0});s=n.os;const a=[];e.targetChanges.forEach((h,f)=>{const d=s.get(f);if(!d)return;a.push(n.Ur.removeMatchingKeys(i,h.removedDocuments,f).next(()=>n.Ur.addMatchingKeys(i,h.addedDocuments,f)));let v=d.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(f)!==null?v=v.withResumeToken(Et.EMPTY_BYTE_STRING,ce.min()).withLastLimboFreeSnapshotVersion(ce.min()):h.resumeToken.approximateByteSize()>0&&(v=v.withResumeToken(h.resumeToken,r)),s=s.insert(f,v),function(k,P,E){return k.resumeToken.approximateByteSize()===0||P.snapshotVersion.toMicroseconds()-k.snapshotVersion.toMicroseconds()>=3e8?!0:E.addedDocuments.size+E.modifiedDocuments.size+E.removedDocuments.size>0}(d,v,h)&&a.push(n.Ur.updateTargetData(i,v))});let u=wr(),c=me();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(i,h))}),a.push(QC(i,o,e.documentUpdates).next(h=>{u=h.Ps,c=h.Is})),!r.isEqual(ce.min())){const h=n.Ur.getLastRemoteSnapshotVersion(i).next(f=>n.Ur.setTargetsMetadata(i,i.currentSequenceNumber,r));a.push(h)}return G.waitFor(a).next(()=>o.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,u,c)).next(()=>u)}).then(i=>(n.os=s,i))}function QC(t,e,n){let r=me(),s=me();return n.forEach(i=>r=r.add(i)),e.getEntries(t,r).next(i=>{let o=wr();return n.forEach((a,u)=>{const c=i.get(a);u.isFoundDocument()!==c.isFoundDocument()&&(s=s.add(a)),u.isNoDocument()&&u.version.isEqual(ce.min())?(e.removeEntry(a,u.readTime),o=o.insert(a,u)):!c.isValidDocument()||u.version.compareTo(c.version)>0||u.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(u),o=o.insert(a,u)):re("LocalStore","Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",u.version)}),{Ps:o,Is:s}})}function YC(t,e){const n=he(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function XC(t,e){const n=he(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.Ur.getTargetData(r,e).next(i=>i?(s=i,G.resolve(s)):n.Ur.allocateTargetId(r).next(o=>(s=new zr(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Ur.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.os.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.os=n.os.insert(r.targetId,r),n._s.set(e,r.targetId)),r})}async function Pd(t,e,n){const r=he(t),s=r.os.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,o=>r.persistence.referenceDelegate.removeTarget(o,s))}catch(o){if(!ba(o))throw o;re("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.os=r.os.remove(e),r._s.delete(s.target)}function Ny(t,e,n){const r=he(t);let s=ce.min(),i=me();return r.persistence.runTransaction("Execute query","readwrite",o=>function(u,c,h){const f=he(u),d=f._s.get(h);return d!==void 0?G.resolve(f.os.get(d)):f.Ur.getTargetData(c,h)}(r,o,Qn(e)).next(a=>{if(a)return s=a.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(o,a.targetId).next(u=>{i=u})}).next(()=>r.ss.getDocumentsMatchingQuery(o,e,n?s:ce.min(),n?i:me())).next(a=>(JC(r,zk(e),a),{documents:a,Ts:i})))}function JC(t,e,n){let r=t.us.get(e)||ce.min();n.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),t.us.set(e,r)}class Py{constructor(){this.activeTargetIds=Gk()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class ZC{constructor(){this.so=new Py,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new Py,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eR{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dy{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){re("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){re("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let yl=null;function ph(){return yl===null?yl=function(){return 268435456+Math.round(2147483648*Math.random())}():yl++,"0x"+yl.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tR={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nR{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ct="WebChannelConnection";class rR extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${s}/databases/${i}`,this.Co=this.databaseId.database==="(default)"?`project_id=${s}`:`project_id=${s}&database_id=${i}`}get Fo(){return!1}Mo(n,r,s,i,o){const a=ph(),u=this.xo(n,r.toUriEncodedString());re("RestConnection",`Sending RPC '${n}' ${a}:`,u,s);const c={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(c,i,o),this.No(n,u,c,s).then(h=>(re("RestConnection",`Received RPC '${n}' ${a}: `,h),h),h=>{throw ji("RestConnection",`RPC '${n}' ${a} failed with error: `,h,"url: ",u,"request:",s),h})}Lo(n,r,s,i,o,a){return this.Mo(n,r,s,i,o)}Oo(n,r,s){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Gi}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((i,o)=>n[o]=i),s&&s.headers.forEach((i,o)=>n[o]=i)}xo(n,r){const s=tR[n];return`${this.Do}/v1/${r}:${s}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,s){const i=ph();return new Promise((o,a)=>{const u=new uw;u.setWithCredentials(!0),u.listenOnce(cw.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case Ml.NO_ERROR:const h=u.getResponseJson();re(Ct,`XHR for RPC '${e}' ${i} received:`,JSON.stringify(h)),o(h);break;case Ml.TIMEOUT:re(Ct,`RPC '${e}' ${i} timed out`),a(new te(q.DEADLINE_EXCEEDED,"Request time out"));break;case Ml.HTTP_ERROR:const f=u.getStatus();if(re(Ct,`RPC '${e}' ${i} failed with status:`,f,"response text:",u.getResponseText()),f>0){let d=u.getResponseJson();Array.isArray(d)&&(d=d[0]);const v=d==null?void 0:d.error;if(v&&v.status&&v.message){const x=function(P){const E=P.toLowerCase().replace(/_/g,"-");return Object.values(q).indexOf(E)>=0?E:q.UNKNOWN}(v.status);a(new te(x,v.message))}else a(new te(q.UNKNOWN,"Server responded with status "+u.getStatus()))}else a(new te(q.UNAVAILABLE,"Connection failed."));break;default:ue()}}finally{re(Ct,`RPC '${e}' ${i} completed.`)}});const c=JSON.stringify(s);re(Ct,`RPC '${e}' ${i} sending request:`,s),u.send(n,"POST",c,r,15)})}Bo(e,n,r){const s=ph(),i=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=fw(),a=dw(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(u.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(u.useFetchStreams=!0),this.Oo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;const h=i.join("");re(Ct,`Creating RPC '${e}' stream ${s}: ${h}`,u);const f=o.createWebChannel(h,u);let d=!1,v=!1;const x=new nR({Io:P=>{v?re(Ct,`Not sending because RPC '${e}' stream ${s} is closed:`,P):(d||(re(Ct,`Opening RPC '${e}' stream ${s} transport.`),f.open(),d=!0),re(Ct,`RPC '${e}' stream ${s} sending:`,P),f.send(P))},To:()=>f.close()}),k=(P,E,I)=>{P.listen(E,C=>{try{I(C)}catch(b){setTimeout(()=>{throw b},0)}})};return k(f,ko.EventType.OPEN,()=>{v||(re(Ct,`RPC '${e}' stream ${s} transport opened.`),x.yo())}),k(f,ko.EventType.CLOSE,()=>{v||(v=!0,re(Ct,`RPC '${e}' stream ${s} transport closed`),x.So())}),k(f,ko.EventType.ERROR,P=>{v||(v=!0,ji(Ct,`RPC '${e}' stream ${s} transport errored:`,P),x.So(new te(q.UNAVAILABLE,"The operation could not be completed")))}),k(f,ko.EventType.MESSAGE,P=>{var E;if(!v){const I=P.data[0];ke(!!I);const C=I,b=C.error||((E=C[0])===null||E===void 0?void 0:E.error);if(b){re(Ct,`RPC '${e}' stream ${s} received error:`,b);const j=b.status;let D=function(p){const w=nt[p];if(w!==void 0)return Vw(w)}(j),S=b.message;D===void 0&&(D=q.INTERNAL,S="Unknown error status: "+j+" with message "+b.message),v=!0,x.So(new te(D,S)),f.close()}else re(Ct,`RPC '${e}' stream ${s} received:`,I),x.bo(I)}}),k(a,hw.STAT_EVENT,P=>{P.stat===xd.PROXY?re(Ct,`RPC '${e}' stream ${s} detected buffering proxy`):P.stat===xd.NOPROXY&&re(Ct,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{x.wo()},0),x}}function mh(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uc(t){return new fC(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yw{constructor(e,n,r=1e3,s=1.5,i=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=s,this.Qo=i,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),s=Math.max(0,n-r);s>0&&re("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,s,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xw{constructor(e,n,r,s,i,o,a,u){this.ui=e,this.Ho=r,this.Jo=s,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=u,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new Yw(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===q.RESOURCE_EXHAUSTED?(_r(n.toString()),_r("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===q.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.Yo===n&&this.P_(r,s)},r=>{e(()=>{const s=new te(q.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(s)})})}P_(e,n){const r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(s=>{r(()=>this.I_(s))}),this.stream.onMessage(s=>{r(()=>++this.e_==1?this.E_(s):this.onNext(s))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return re("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(re("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class sR extends Xw{constructor(e,n,r,s,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=gC(this.serializer,e),r=function(i){if(!("targetChange"in i))return ce.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?ce.min():o.readTime?Yn(o.readTime):ce.min()}(e);return this.listener.d_(n,r)}A_(e){const n={};n.database=Nd(this.serializer),n.addTarget=function(i,o){let a;const u=o.target;if(a=Sd(u)?{documents:_C(i,u)}:{query:wC(i,u)._t},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=Bw(i,o.resumeToken);const c=Cd(i,o.expectedCount);c!==null&&(a.expectedCount=c)}else if(o.snapshotVersion.compareTo(ce.min())>0){a.readTime=ku(i,o.snapshotVersion.toTimestamp());const c=Cd(i,o.expectedCount);c!==null&&(a.expectedCount=c)}return a}(this.serializer,e);const r=xC(this.serializer,e);r&&(n.labels=r),this.a_(n)}R_(e){const n={};n.database=Nd(this.serializer),n.removeTarget=e,this.a_(n)}}class iR extends Xw{constructor(e,n,r,s,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return ke(!!e.streamToken),this.lastStreamToken=e.streamToken,ke(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){ke(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=vC(e.writeResults,e.commitTime),r=Yn(e.commitTime);return this.listener.g_(r,n)}p_(){const e={};e.database=Nd(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>yC(this.serializer,r))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oR extends class{}{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.y_=!1}w_(){if(this.y_)throw new te(q.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.Mo(e,Rd(n,r),s,i,o)).catch(i=>{throw i.name==="FirebaseError"?(i.code===q.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new te(q.UNKNOWN,i.toString())})}Lo(e,n,r,s,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Lo(e,Rd(n,r),s,o,a,i)).catch(o=>{throw o.name==="FirebaseError"?(o.code===q.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new te(q.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class aR{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(_r(n),this.D_=!1):re("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lR{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=i,this.k_._o(o=>{r.enqueueAndForget(async()=>{Qs(this)&&(re("RemoteStore","Restarting streams for network reachability change."),await async function(u){const c=he(u);c.L_.add(4),await Da(c),c.q_.set("Unknown"),c.L_.delete(4),await cc(c)}(this))})}),this.q_=new aR(r,s)}}async function cc(t){if(Qs(t))for(const e of t.B_)await e(!0)}async function Da(t){for(const e of t.B_)await e(!1)}function Jw(t,e){const n=he(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),hp(n)?cp(n):Xi(n).r_()&&up(n,e))}function lp(t,e){const n=he(t),r=Xi(n);n.N_.delete(e),r.r_()&&Zw(n,e),n.N_.size===0&&(r.r_()?r.o_():Qs(n)&&n.q_.set("Unknown"))}function up(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ce.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Xi(t).A_(e)}function Zw(t,e){t.Q_.xe(e),Xi(t).R_(e)}function cp(t){t.Q_=new uC({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),Xi(t).start(),t.q_.v_()}function hp(t){return Qs(t)&&!Xi(t).n_()&&t.N_.size>0}function Qs(t){return he(t).L_.size===0}function e1(t){t.Q_=void 0}async function uR(t){t.q_.set("Online")}async function cR(t){t.N_.forEach((e,n)=>{up(t,e)})}async function hR(t,e){e1(t),hp(t)?(t.q_.M_(e),cp(t)):t.q_.set("Unknown")}async function dR(t,e,n){if(t.q_.set("Online"),e instanceof Fw&&e.state===2&&e.cause)try{await async function(s,i){const o=i.cause;for(const a of i.targetIds)s.N_.has(a)&&(await s.remoteSyncer.rejectListen(a,o),s.N_.delete(a),s.Q_.removeTarget(a))}(t,e)}catch(r){re("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Cu(t,r)}else if(e instanceof Fl?t.Q_.Ke(e):e instanceof Uw?t.Q_.He(e):t.Q_.We(e),!n.isEqual(ce.min()))try{const r=await Qw(t.localStore);n.compareTo(r)>=0&&await function(i,o){const a=i.Q_.rt(o);return a.targetChanges.forEach((u,c)=>{if(u.resumeToken.approximateByteSize()>0){const h=i.N_.get(c);h&&i.N_.set(c,h.withResumeToken(u.resumeToken,o))}}),a.targetMismatches.forEach((u,c)=>{const h=i.N_.get(u);if(!h)return;i.N_.set(u,h.withResumeToken(Et.EMPTY_BYTE_STRING,h.snapshotVersion)),Zw(i,u);const f=new zr(h.target,u,c,h.sequenceNumber);up(i,f)}),i.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(r){re("RemoteStore","Failed to raise snapshot:",r),await Cu(t,r)}}async function Cu(t,e,n){if(!ba(e))throw e;t.L_.add(1),await Da(t),t.q_.set("Offline"),n||(n=()=>Qw(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{re("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await cc(t)})}function t1(t,e){return e().catch(n=>Cu(t,n,e))}async function hc(t){const e=he(t),n=os(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;fR(e);)try{const s=await YC(e.localStore,r);if(s===null){e.O_.length===0&&n.o_();break}r=s.batchId,pR(e,s)}catch(s){await Cu(e,s)}n1(e)&&r1(e)}function fR(t){return Qs(t)&&t.O_.length<10}function pR(t,e){t.O_.push(e);const n=os(t);n.r_()&&n.V_&&n.m_(e.mutations)}function n1(t){return Qs(t)&&!os(t).n_()&&t.O_.length>0}function r1(t){os(t).start()}async function mR(t){os(t).p_()}async function gR(t){const e=os(t);for(const n of t.O_)e.m_(n.mutations)}async function yR(t,e,n){const r=t.O_.shift(),s=np.from(r,e,n);await t1(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await hc(t)}async function vR(t,e){e&&os(t).V_&&await async function(r,s){if(function(o){return oC(o)&&o!==q.ABORTED}(s.code)){const i=r.O_.shift();os(r).s_(),await t1(r,()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s)),await hc(r)}}(t,e),n1(t)&&r1(t)}async function Ly(t,e){const n=he(t);n.asyncQueue.verifyOperationInProgress(),re("RemoteStore","RemoteStore received new credentials");const r=Qs(n);n.L_.add(3),await Da(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await cc(n)}async function _R(t,e){const n=he(t);e?(n.L_.delete(2),await cc(n)):e||(n.L_.add(2),await Da(n),n.q_.set("Unknown"))}function Xi(t){return t.K_||(t.K_=function(n,r,s){const i=he(n);return i.w_(),new sR(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Eo:uR.bind(null,t),Ro:cR.bind(null,t),mo:hR.bind(null,t),d_:dR.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),hp(t)?cp(t):t.q_.set("Unknown")):(await t.K_.stop(),e1(t))})),t.K_}function os(t){return t.U_||(t.U_=function(n,r,s){const i=he(n);return i.w_(),new iR(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:mR.bind(null,t),mo:vR.bind(null,t),f_:gR.bind(null,t),g_:yR.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await hc(t)):(await t.U_.stop(),t.O_.length>0&&(re("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dp{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new dr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,i){const o=Date.now()+r,a=new dp(e,n,o,s,i);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new te(q.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function fp(t,e){if(_r("AsyncQueue",`${e}: ${t}`),ba(t))return new te(q.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ci{constructor(e){this.comparator=e?(n,r)=>e(n,r)||se.comparator(n.key,r.key):(n,r)=>se.comparator(n.key,r.key),this.keyedMap=Co(),this.sortedSet=new We(this.comparator)}static emptySet(e){return new Ci(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Ci)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Ci;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oy{constructor(){this.W_=new We(se.comparator)}track(e){const n=e.doc.key,r=this.W_.get(n);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(n,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(n):e.type===1&&r.type===2?this.W_=this.W_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):ue():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal((n,r)=>{e.push(r)}),e}}class Bi{constructor(e,n,r,s,i,o,a,u,c){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=u,this.hasCachedResults=c}static fromInitialDocuments(e,n,r,s,i){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new Bi(e,n,Ci.emptySet(n),o,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&sc(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wR{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class ER{constructor(){this.queries=jy(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){const s=he(n),i=s.queries;s.queries=jy(),i.forEach((o,a)=>{for(const u of a.j_)u.onError(r)})})(this,new te(q.ABORTED,"Firestore shutting down"))}}function jy(){return new Yi(t=>Sw(t),sc)}async function s1(t,e){const n=he(t);let r=3;const s=e.query;let i=n.queries.get(s);i?!i.H_()&&e.J_()&&(r=2):(i=new wR,r=e.J_()?0:1);try{switch(r){case 0:i.z_=await n.onListen(s,!0);break;case 1:i.z_=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(o){const a=fp(o,`Initialization of query '${ni(e.query)}' failed`);return void e.onError(a)}n.queries.set(s,i),i.j_.push(e),e.Z_(n.onlineState),i.z_&&e.X_(i.z_)&&pp(n)}async function i1(t,e){const n=he(t),r=e.query;let s=3;const i=n.queries.get(r);if(i){const o=i.j_.indexOf(e);o>=0&&(i.j_.splice(o,1),i.j_.length===0?s=e.J_()?0:1:!i.H_()&&e.J_()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function xR(t,e){const n=he(t);let r=!1;for(const s of e){const i=s.query,o=n.queries.get(i);if(o){for(const a of o.j_)a.X_(s)&&(r=!0);o.z_=s}}r&&pp(n)}function TR(t,e,n){const r=he(t),s=r.queries.get(e);if(s)for(const i of s.j_)i.onError(n);r.queries.delete(e)}function pp(t){t.Y_.forEach(e=>{e.next()})}var Dd,My;(My=Dd||(Dd={})).ea="default",My.Cache="cache";class o1{constructor(e,n,r){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new Bi(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const r=n!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=Bi.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==Dd.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a1{constructor(e){this.key=e}}class l1{constructor(e){this.key=e}}class IR{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=me(),this.mutatedKeys=me(),this.Aa=kw(e),this.Ra=new Ci(this.Aa)}get Va(){return this.Ta}ma(e,n){const r=n?n.fa:new Oy,s=n?n.Ra:this.Ra;let i=n?n.mutatedKeys:this.mutatedKeys,o=s,a=!1;const u=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,c=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((h,f)=>{const d=s.get(h),v=ic(this.query,f)?f:null,x=!!d&&this.mutatedKeys.has(d.key),k=!!v&&(v.hasLocalMutations||this.mutatedKeys.has(v.key)&&v.hasCommittedMutations);let P=!1;d&&v?d.data.isEqual(v.data)?x!==k&&(r.track({type:3,doc:v}),P=!0):this.ga(d,v)||(r.track({type:2,doc:v}),P=!0,(u&&this.Aa(v,u)>0||c&&this.Aa(v,c)<0)&&(a=!0)):!d&&v?(r.track({type:0,doc:v}),P=!0):d&&!v&&(r.track({type:1,doc:d}),P=!0,(u||c)&&(a=!0)),P&&(v?(o=o.add(v),i=k?i.add(h):i.delete(h)):(o=o.delete(h),i=i.delete(h)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const h=this.query.limitType==="F"?o.last():o.first();o=o.delete(h.key),i=i.delete(h.key),r.track({type:1,doc:h})}return{Ra:o,fa:r,ns:a,mutatedKeys:i}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const i=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const o=e.fa.G_();o.sort((h,f)=>function(v,x){const k=P=>{switch(P){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ue()}};return k(v)-k(x)}(h.type,f.type)||this.Aa(h.doc,f.doc)),this.pa(r),s=s!=null&&s;const a=n&&!s?this.ya():[],u=this.da.size===0&&this.current&&!s?1:0,c=u!==this.Ea;return this.Ea=u,o.length!==0||c?{snapshot:new Bi(this.query,e.Ra,i,o,e.mutatedKeys,u===0,c,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:a}:{wa:a}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new Oy,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=me(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});const n=[];return e.forEach(r=>{this.da.has(r)||n.push(new l1(r))}),this.da.forEach(r=>{e.has(r)||n.push(new a1(r))}),n}ba(e){this.Ta=e.Ts,this.da=me();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return Bi.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class AR{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class SR{constructor(e){this.key=e,this.va=!1}}class kR{constructor(e,n,r,s,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new Yi(a=>Sw(a),sc),this.Ma=new Map,this.xa=new Set,this.Oa=new We(se.comparator),this.Na=new Map,this.La=new ip,this.Ba={},this.ka=new Map,this.qa=Fi.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function CR(t,e,n=!0){const r=p1(t);let s;const i=r.Fa.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.Da()):s=await u1(r,e,n,!0),s}async function RR(t,e){const n=p1(t);await u1(n,e,!0,!1)}async function u1(t,e,n,r){const s=await XC(t.localStore,Qn(e)),i=s.targetId,o=t.sharedClientState.addLocalQueryTarget(i,n);let a;return r&&(a=await bR(t,e,i,o==="current",s.resumeToken)),t.isPrimaryClient&&n&&Jw(t.remoteStore,s),a}async function bR(t,e,n,r,s){t.Ka=(f,d,v)=>async function(k,P,E,I){let C=P.view.ma(E);C.ns&&(C=await Ny(k.localStore,P.query,!1).then(({documents:S})=>P.view.ma(S,C)));const b=I&&I.targetChanges.get(P.targetId),j=I&&I.targetMismatches.get(P.targetId)!=null,D=P.view.applyChanges(C,k.isPrimaryClient,b,j);return Uy(k,P.targetId,D.wa),D.snapshot}(t,f,d,v);const i=await Ny(t.localStore,e,!0),o=new IR(e,i.Ts),a=o.ma(i.documents),u=Pa.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),c=o.applyChanges(a,t.isPrimaryClient,u);Uy(t,n,c.wa);const h=new AR(e,n,o);return t.Fa.set(e,h),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),c.snapshot}async function NR(t,e,n){const r=he(t),s=r.Fa.get(e),i=r.Ma.get(s.targetId);if(i.length>1)return r.Ma.set(s.targetId,i.filter(o=>!sc(o,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await Pd(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&lp(r.remoteStore,s.targetId),Ld(r,s.targetId)}).catch(Ra)):(Ld(r,s.targetId),await Pd(r.localStore,s.targetId,!0))}async function PR(t,e){const n=he(t),r=n.Fa.get(e),s=n.Ma.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),lp(n.remoteStore,r.targetId))}async function DR(t,e,n){const r=FR(t);try{const s=await function(o,a){const u=he(o),c=je.now(),h=a.reduce((v,x)=>v.add(x.key),me());let f,d;return u.persistence.runTransaction("Locally write mutations","readwrite",v=>{let x=wr(),k=me();return u.cs.getEntries(v,h).next(P=>{x=P,x.forEach((E,I)=>{I.isValidDocument()||(k=k.add(E))})}).next(()=>u.localDocuments.getOverlayedDocuments(v,x)).next(P=>{f=P;const E=[];for(const I of a){const C=tC(I,f.get(I.key).overlayedDocument);C!=null&&E.push(new hs(I.key,C,vw(C.value.mapValue),yn.exists(!0)))}return u.mutationQueue.addMutationBatch(v,c,E,a)}).next(P=>{d=P;const E=P.applyToLocalDocumentSet(f,k);return u.documentOverlayCache.saveOverlays(v,P.batchId,E)})}).then(()=>({batchId:d.batchId,changes:Rw(f)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(o,a,u){let c=o.Ba[o.currentUser.toKey()];c||(c=new We(Ee)),c=c.insert(a,u),o.Ba[o.currentUser.toKey()]=c}(r,s.batchId,n),await La(r,s.changes),await hc(r.remoteStore)}catch(s){const i=fp(s,"Failed to persist write");n.reject(i)}}async function c1(t,e){const n=he(t);try{const r=await GC(n.localStore,e);e.targetChanges.forEach((s,i)=>{const o=n.Na.get(i);o&&(ke(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?o.va=!0:s.modifiedDocuments.size>0?ke(o.va):s.removedDocuments.size>0&&(ke(o.va),o.va=!1))}),await La(n,r,e)}catch(r){await Ra(r)}}function Vy(t,e,n){const r=he(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Fa.forEach((i,o)=>{const a=o.view.Z_(e);a.snapshot&&s.push(a.snapshot)}),function(o,a){const u=he(o);u.onlineState=a;let c=!1;u.queries.forEach((h,f)=>{for(const d of f.j_)d.Z_(a)&&(c=!0)}),c&&pp(u)}(r.eventManager,e),s.length&&r.Ca.d_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function LR(t,e,n){const r=he(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Na.get(e),i=s&&s.key;if(i){let o=new We(se.comparator);o=o.insert(i,Pt.newNoDocument(i,ce.min()));const a=me().add(i),u=new lc(ce.min(),new Map,new We(Ee),o,a);await c1(r,u),r.Oa=r.Oa.remove(i),r.Na.delete(e),mp(r)}else await Pd(r.localStore,e,!1).then(()=>Ld(r,e,n)).catch(Ra)}async function OR(t,e){const n=he(t),r=e.batch.batchId;try{const s=await KC(n.localStore,e);d1(n,r,null),h1(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await La(n,s)}catch(s){await Ra(s)}}async function jR(t,e,n){const r=he(t);try{const s=await function(o,a){const u=he(o);return u.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let h;return u.mutationQueue.lookupMutationBatch(c,a).next(f=>(ke(f!==null),h=f.keys(),u.mutationQueue.removeMutationBatch(c,f))).next(()=>u.mutationQueue.performConsistencyCheck(c)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(c,h,a)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,h)).next(()=>u.localDocuments.getDocuments(c,h))})}(r.localStore,e);d1(r,e,n),h1(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await La(r,s)}catch(s){await Ra(s)}}function h1(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function d1(t,e,n){const r=he(t);let s=r.Ba[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.Ba[r.currentUser.toKey()]=s}}function Ld(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Ma.get(e))t.Fa.delete(r),n&&t.Ca.$a(r,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(r=>{t.La.containsKey(r)||f1(t,r)})}function f1(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(lp(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),mp(t))}function Uy(t,e,n){for(const r of n)r instanceof a1?(t.La.addReference(r.key,e),MR(t,r)):r instanceof l1?(re("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||f1(t,r.key)):ue()}function MR(t,e){const n=e.key,r=n.path.canonicalString();t.Oa.get(n)||t.xa.has(r)||(re("SyncEngine","New document in limbo: "+n),t.xa.add(r),mp(t))}function mp(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new se(Le.fromString(e)),r=t.qa.next();t.Na.set(r,new SR(n)),t.Oa=t.Oa.insert(n,r),Jw(t.remoteStore,new zr(Qn(Zf(n.path)),r,"TargetPurposeLimboResolution",Kf.oe))}}async function La(t,e,n){const r=he(t),s=[],i=[],o=[];r.Fa.isEmpty()||(r.Fa.forEach((a,u)=>{o.push(r.Ka(u,e,n).then(c=>{var h;if((c||n)&&r.isPrimaryClient){const f=c?!c.fromCache:(h=n==null?void 0:n.targetChanges.get(u.targetId))===null||h===void 0?void 0:h.current;r.sharedClientState.updateQueryState(u.targetId,f?"current":"not-current")}if(c){s.push(c);const f=ap.Wi(u.targetId,c);i.push(f)}}))}),await Promise.all(o),r.Ca.d_(s),await async function(u,c){const h=he(u);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>G.forEach(c,d=>G.forEach(d.$i,v=>h.persistence.referenceDelegate.addReference(f,d.targetId,v)).next(()=>G.forEach(d.Ui,v=>h.persistence.referenceDelegate.removeReference(f,d.targetId,v)))))}catch(f){if(!ba(f))throw f;re("LocalStore","Failed to update sequence numbers: "+f)}for(const f of c){const d=f.targetId;if(!f.fromCache){const v=h.os.get(d),x=v.snapshotVersion,k=v.withLastLimboFreeSnapshotVersion(x);h.os=h.os.insert(d,k)}}}(r.localStore,i))}async function VR(t,e){const n=he(t);if(!n.currentUser.isEqual(e)){re("SyncEngine","User change. New user:",e.toKey());const r=await Gw(n.localStore,e);n.currentUser=e,function(i,o){i.ka.forEach(a=>{a.forEach(u=>{u.reject(new te(q.CANCELLED,o))})}),i.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await La(n,r.hs)}}function UR(t,e){const n=he(t),r=n.Na.get(e);if(r&&r.va)return me().add(r.key);{let s=me();const i=n.Ma.get(e);if(!i)return s;for(const o of i){const a=n.Fa.get(o);s=s.unionWith(a.view.Va)}return s}}function p1(t){const e=he(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=c1.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=UR.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=LR.bind(null,e),e.Ca.d_=xR.bind(null,e.eventManager),e.Ca.$a=TR.bind(null,e.eventManager),e}function FR(t){const e=he(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=OR.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=jR.bind(null,e),e}class Ru{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=uc(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return qC(this.persistence,new HC,e.initialUser,this.serializer)}Ga(e){return new BC(op.Zr,this.serializer)}Wa(e){return new ZC}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Ru.provider={build:()=>new Ru};class Od{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Vy(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=VR.bind(null,this.syncEngine),await _R(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new ER}()}createDatastore(e){const n=uc(e.databaseInfo.databaseId),r=function(i){return new rR(i)}(e.databaseInfo);return function(i,o,a,u){return new oR(i,o,a,u)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,i,o,a){return new lR(r,s,i,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>Vy(this.syncEngine,n,0),function(){return Dy.D()?new Dy:new eR}())}createSyncEngine(e,n){return function(s,i,o,a,u,c,h){const f=new kR(s,i,o,a,u,c);return h&&(f.Qa=!0),f}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const i=he(s);re("RemoteStore","RemoteStore shutting down."),i.L_.add(5),await Da(i),i.k_.shutdown(),i.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}Od.provider={build:()=>new Od};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m1{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):_r("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BR{constructor(e,n,r,s,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=bt.UNAUTHENTICATED,this.clientId=mw.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,async o=>{re("FirestoreClient","Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(re("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new dr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=fp(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function gh(t,e){t.asyncQueue.verifyOperationInProgress(),re("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await Gw(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function Fy(t,e){t.asyncQueue.verifyOperationInProgress();const n=await zR(t);re("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>Ly(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>Ly(e.remoteStore,s)),t._onlineComponents=e}async function zR(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){re("FirestoreClient","Using user provided OfflineComponentProvider");try{await gh(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===q.FAILED_PRECONDITION||s.code===q.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;ji("Error using user provided cache. Falling back to memory cache: "+n),await gh(t,new Ru)}}else re("FirestoreClient","Using default OfflineComponentProvider"),await gh(t,new Ru);return t._offlineComponents}async function g1(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(re("FirestoreClient","Using user provided OnlineComponentProvider"),await Fy(t,t._uninitializedComponentsProvider._online)):(re("FirestoreClient","Using default OnlineComponentProvider"),await Fy(t,new Od))),t._onlineComponents}function $R(t){return g1(t).then(e=>e.syncEngine)}async function y1(t){const e=await g1(t),n=e.eventManager;return n.onListen=CR.bind(null,e.syncEngine),n.onUnlisten=NR.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=RR.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=PR.bind(null,e.syncEngine),n}function HR(t,e,n={}){const r=new dr;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,a,u,c){const h=new m1({next:d=>{h.Za(),o.enqueueAndForget(()=>i1(i,f));const v=d.docs.has(a);!v&&d.fromCache?c.reject(new te(q.UNAVAILABLE,"Failed to get document because the client is offline.")):v&&d.fromCache&&u&&u.source==="server"?c.reject(new te(q.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(d)},error:d=>c.reject(d)}),f=new o1(Zf(a.path),h,{includeMetadataChanges:!0,_a:!0});return s1(i,f)}(await y1(t),t.asyncQueue,e,n,r)),r.promise}function WR(t,e,n={}){const r=new dr;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,a,u,c){const h=new m1({next:d=>{h.Za(),o.enqueueAndForget(()=>i1(i,f)),d.fromCache&&u.source==="server"?c.reject(new te(q.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(d)},error:d=>c.reject(d)}),f=new o1(a,h,{includeMetadataChanges:!0,_a:!0});return s1(i,f)}(await y1(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v1(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const By=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _1(t,e,n){if(!n)throw new te(q.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function qR(t,e,n,r){if(e===!0&&r===!0)throw new te(q.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function zy(t){if(!se.isDocumentKey(t))throw new te(q.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function $y(t){if(se.isDocumentKey(t))throw new te(q.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function dc(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":ue()}function Ln(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new te(q.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=dc(t);throw new te(q.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function KR(t,e){if(e<=0)throw new te(q.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hy{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new te(q.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new te(q.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}qR("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=v1((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new te(q.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new te(q.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new te(q.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class fc{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Hy({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new te(q.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new te(q.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Hy(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new ck;switch(r.type){case"firstParty":return new pk(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new te(q.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=By.get(n);r&&(re("ComponentProvider","Removing Datastore"),By.delete(n),r.terminate())}(this),Promise.resolve()}}function GR(t,e,n,r={}){var s;const i=(t=Ln(t,fc))._getSettings(),o=`${e}:${n}`;if(i.host!=="firestore.googleapis.com"&&i.host!==o&&ji("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},i),{host:o,ssl:!1})),r.mockUserToken){let a,u;if(typeof r.mockUserToken=="string")a=r.mockUserToken,u=bt.MOCK_USER;else{a=x_(r.mockUserToken,(s=t._app)===null||s===void 0?void 0:s.options.projectId);const c=r.mockUserToken.sub||r.mockUserToken.user_id;if(!c)throw new te(q.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new bt(c)}t._authCredentials=new hk(new pw(a,u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ds{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new ds(this.firestore,e,this._query)}}class Ft{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new es(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Ft(this.firestore,e,this._key)}}class es extends ds{constructor(e,n,r){super(e,n,Zf(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Ft(this.firestore,null,new se(e))}withConverter(e){return new es(this.firestore,e,this._path)}}function Cn(t,e,...n){if(t=Me(t),_1("collection","path",e),t instanceof fc){const r=Le.fromString(e,...n);return $y(r),new es(t,null,r)}{if(!(t instanceof Ft||t instanceof es))throw new te(q.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Le.fromString(e,...n));return $y(r),new es(t.firestore,null,r)}}function Er(t,e,...n){if(t=Me(t),arguments.length===1&&(e=mw.newId()),_1("doc","path",e),t instanceof fc){const r=Le.fromString(e,...n);return zy(r),new Ft(t,null,new se(r))}{if(!(t instanceof Ft||t instanceof es))throw new te(q.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Le.fromString(e,...n));return zy(r),new Ft(t.firestore,t instanceof es?t.converter:null,new se(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wy{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new Yw(this,"async_queue_retry"),this.Vu=()=>{const r=mh();r&&re("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const n=mh();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=mh();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const n=new dr;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!ba(e))throw e;re("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const n=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;const s=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw _r("INTERNAL UNHANDLED ERROR: ",s),r}).then(r=>(this.du=!1,r))));return this.mu=n,n}enqueueAfterDelay(e,n,r){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const s=dp.createAndSchedule(this,e,n,r,i=>this.yu(i));return this.Tu.push(s),s}fu(){this.Eu&&ue()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}class Ys extends fc{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new Wy,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Wy(e),this._firestoreClient=void 0,await e}}}function QR(t,e){const n=typeof t=="object"?t:Of(),r=typeof t=="string"?t:"(default)",s=Zu(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=__("firestore");i&&GR(s,...i)}return s}function gp(t){if(t._terminated)throw new te(q.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||YR(t),t._firestoreClient}function YR(t){var e,n,r;const s=t._freezeSettings(),i=function(a,u,c,h){return new kk(a,u,c,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,v1(h.experimentalLongPollingOptions),h.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,s);t._componentsProvider||!((n=s.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=s.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),t._firestoreClient=new BR(t._authCredentials,t._appCheckCredentials,t._queue,i,t._componentsProvider&&function(a){const u=a==null?void 0:a._online.build();return{_offline:a==null?void 0:a._offline.build(u),_online:u}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zi{constructor(e){this._byteString=e}static fromBase64String(e){try{return new zi(Et.fromBase64String(e))}catch(n){throw new te(q.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new zi(Et.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pc{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new te(q.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new yt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yp{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vp{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new te(q.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new te(q.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Ee(this._lat,e._lat)||Ee(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _p{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XR=/^__.*__$/;class JR{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new hs(e,this.data,this.fieldMask,n,this.fieldTransforms):new Na(e,this.data,n,this.fieldTransforms)}}class w1{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new hs(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function E1(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ue()}}class wp{constructor(e,n,r,s,i,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.vu(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new wp(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Fu({path:r,xu:!1});return s.Ou(e),s}Nu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Fu({path:r,xu:!1});return s.vu(),s}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return bu(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(E1(this.Cu)&&XR.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class ZR{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||uc(e)}Qu(e,n,r,s=!1){return new wp({Cu:e,methodName:n,qu:r,path:yt.emptyPath(),xu:!1,ku:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function mc(t){const e=t._freezeSettings(),n=uc(t._databaseId);return new ZR(t._databaseId,!!e.ignoreUndefinedProperties,n)}function x1(t,e,n,r,s,i={}){const o=t.Qu(i.merge||i.mergeFields?2:0,e,n,s);Ep("Data must be an object, but it was:",o,r);const a=T1(r,o);let u,c;if(i.merge)u=new rn(o.fieldMask),c=o.fieldTransforms;else if(i.mergeFields){const h=[];for(const f of i.mergeFields){const d=jd(e,f,n);if(!o.contains(d))throw new te(q.INVALID_ARGUMENT,`Field '${d}' is specified in your field mask but missing from your input data.`);A1(h,d)||h.push(d)}u=new rn(h),c=o.fieldTransforms.filter(f=>u.covers(f.field))}else u=null,c=o.fieldTransforms;return new JR(new qt(a),u,c)}class gc extends yp{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof gc}}function eb(t,e,n,r){const s=t.Qu(1,e,n);Ep("Data must be an object, but it was:",s,r);const i=[],o=qt.empty();Gs(r,(u,c)=>{const h=xp(e,u,n);c=Me(c);const f=s.Nu(h);if(c instanceof gc)i.push(h);else{const d=Oa(c,f);d!=null&&(i.push(h),o.set(h,d))}});const a=new rn(i);return new w1(o,a,s.fieldTransforms)}function tb(t,e,n,r,s,i){const o=t.Qu(1,e,n),a=[jd(e,r,n)],u=[s];if(i.length%2!=0)throw new te(q.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let d=0;d<i.length;d+=2)a.push(jd(e,i[d])),u.push(i[d+1]);const c=[],h=qt.empty();for(let d=a.length-1;d>=0;--d)if(!A1(c,a[d])){const v=a[d];let x=u[d];x=Me(x);const k=o.Nu(v);if(x instanceof gc)c.push(v);else{const P=Oa(x,k);P!=null&&(c.push(v),h.set(v,P))}}const f=new rn(c);return new w1(h,f,o.fieldTransforms)}function nb(t,e,n,r=!1){return Oa(n,t.Qu(r?4:3,e))}function Oa(t,e){if(I1(t=Me(t)))return Ep("Unsupported field value:",e,t),T1(t,e);if(t instanceof yp)return function(r,s){if(!E1(s.Cu))throw s.Bu(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Bu(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,s){const i=[];let o=0;for(const a of r){let u=Oa(a,s.Lu(o));u==null&&(u={nullValue:"NULL_VALUE"}),i.push(u),o++}return{arrayValue:{values:i}}}(t,e)}return function(r,s){if((r=Me(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return Qk(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=je.fromDate(r);return{timestampValue:ku(s.serializer,i)}}if(r instanceof je){const i=new je(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:ku(s.serializer,i)}}if(r instanceof vp)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof zi)return{bytesValue:Bw(s.serializer,r._byteString)};if(r instanceof Ft){const i=s.databaseId,o=r.firestore._databaseId;if(!o.isEqual(i))throw s.Bu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:sp(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof _p)return function(o,a){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(u=>{if(typeof u!="number")throw a.Bu("VectorValues must only contain numeric values.");return ep(a.serializer,u)})}}}}}}(r,s);throw s.Bu(`Unsupported field value: ${dc(r)}`)}(t,e)}function T1(t,e){const n={};return gw(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Gs(t,(r,s)=>{const i=Oa(s,e.Mu(r));i!=null&&(n[r]=i)}),{mapValue:{fields:n}}}function I1(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof je||t instanceof vp||t instanceof zi||t instanceof Ft||t instanceof yp||t instanceof _p)}function Ep(t,e,n){if(!I1(n)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(n)){const r=dc(n);throw r==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+r)}}function jd(t,e,n){if((e=Me(e))instanceof pc)return e._internalPath;if(typeof e=="string")return xp(t,e);throw bu("Field path arguments must be of type string or ",t,!1,void 0,n)}const rb=new RegExp("[~\\*/\\[\\]]");function xp(t,e,n){if(e.search(rb)>=0)throw bu(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new pc(...e.split("."))._internalPath}catch{throw bu(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function bu(t,e,n,r,s){const i=r&&!r.isEmpty(),o=s!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let u="";return(i||o)&&(u+=" (found",i&&(u+=` in field ${r}`),o&&(u+=` in document ${s}`),u+=")"),new te(q.INVALID_ARGUMENT,a+t+u)}function A1(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S1{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new Ft(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new sb(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(yc("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class sb extends S1{data(){return super.data()}}function yc(t,e){return typeof e=="string"?xp(t,e):e instanceof pc?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ib(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new te(q.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Tp{}class Ip extends Tp{}function $r(t,e,...n){let r=[];e instanceof Tp&&r.push(e),r=r.concat(n),function(i){const o=i.filter(u=>u instanceof Ap).length,a=i.filter(u=>u instanceof vc).length;if(o>1||o>0&&a>0)throw new te(q.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)t=s._apply(t);return t}class vc extends Ip{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new vc(e,n,r)}_apply(e){const n=this._parse(e);return C1(e._query,n),new ds(e.firestore,e.converter,kd(e._query,n))}_parse(e){const n=mc(e.firestore);return function(i,o,a,u,c,h,f){let d;if(c.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new te(q.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){Ky(f,h);const v=[];for(const x of f)v.push(qy(u,i,x));d={arrayValue:{values:v}}}else d=qy(u,i,f)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||Ky(f,h),d=nb(a,o,f,h==="in"||h==="not-in");return st.create(c,h,d)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function $i(t,e,n){const r=e,s=yc("where",t);return vc._create(s,r,n)}class Ap extends Tp{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Ap(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:Dn.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(s,i){let o=s;const a=i.getFlattenedFilters();for(const u of a)C1(o,u),o=kd(o,u)}(e._query,n),new ds(e.firestore,e.converter,kd(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Sp extends Ip{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new Sp(e,n)}_apply(e){const n=function(s,i,o){if(s.startAt!==null)throw new te(q.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new te(q.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new ma(i,o)}(e._query,this._field,this._direction);return new ds(e.firestore,e.converter,function(s,i){const o=s.explicitOrderBy.concat([i]);return new Qi(s.path,s.collectionGroup,o,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,n))}}function k1(t,e="asc"){const n=e,r=yc("orderBy",t);return Sp._create(r,n)}class kp extends Ip{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new kp(e,n,r)}_apply(e){return new ds(e.firestore,e.converter,Iu(e._query,this._limit,this._limitType))}}function vl(t){return KR("limit",t),kp._create("limit",t,"F")}function qy(t,e,n){if(typeof(n=Me(n))=="string"){if(n==="")throw new te(q.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Aw(e)&&n.indexOf("/")!==-1)throw new te(q.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(Le.fromString(n));if(!se.isDocumentKey(r))throw new te(q.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return py(t,new se(r))}if(n instanceof Ft)return py(t,n._key);throw new te(q.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${dc(n)}.`)}function Ky(t,e){if(!Array.isArray(t)||t.length===0)throw new te(q.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function C1(t,e){const n=function(s,i){for(const o of s)for(const a of o.getFlattenedFilters())if(i.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new te(q.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new te(q.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class ob{convertValue(e,n="none"){switch(zs(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Xe(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Bs(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw ue()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Gs(e,(s,i)=>{r[s]=this.convertValue(i,n)}),r}convertVectorValue(e){var n,r,s;const i=(s=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||s===void 0?void 0:s.map(o=>Xe(o.doubleValue));return new _p(i)}convertGeoPoint(e){return new vp(Xe(e.latitude),Xe(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Qf(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(da(e));default:return null}}convertTimestamp(e){const n=is(e);return new je(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Le.fromString(e);ke(Kw(r));const s=new fa(r.get(1),r.get(3)),i=new se(r.popFirst(5));return s.isEqual(n)||_r(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function R1(t,e,n){let r;return r=t?t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bo{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class b1 extends S1{constructor(e,n,r,s,i,o){super(e,n,r,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Bl(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(yc("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class Bl extends b1{data(e={}){return super.data(e)}}class ab{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new bo(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Bl(this._firestore,this._userDataWriter,r.key,r,new bo(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new te(q.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map(a=>{const u=new Bl(s._firestore,s._userDataWriter,a.doc.key,a.doc,new bo(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter);return a.doc,{type:"added",doc:u,oldIndex:-1,newIndex:o++}})}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(a=>i||a.type!==3).map(a=>{const u=new Bl(s._firestore,s._userDataWriter,a.doc.key,a.doc,new bo(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter);let c=-1,h=-1;return a.type!==0&&(c=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),h=o.indexOf(a.doc.key)),{type:lb(a.type),doc:u,oldIndex:c,newIndex:h}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function lb(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ue()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ub(t){t=Ln(t,Ft);const e=Ln(t.firestore,Ys);return HR(gp(e),t._key).then(n=>hb(e,t,n))}class N1 extends ob{constructor(e){super(),this.firestore=e}convertBytes(e){return new zi(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Ft(this.firestore,null,n)}}function ur(t){t=Ln(t,ds);const e=Ln(t.firestore,Ys),n=gp(e),r=new N1(e);return ib(t._query),WR(n,t._query).then(s=>new ab(e,r,t,s))}function cb(t,e,n){t=Ln(t,Ft);const r=Ln(t.firestore,Ys),s=R1(t.converter,e);return _c(r,[x1(mc(r),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,yn.none())])}function Cp(t,e,n,...r){t=Ln(t,Ft);const s=Ln(t.firestore,Ys),i=mc(s);let o;return o=typeof(e=Me(e))=="string"||e instanceof pc?tb(i,"updateDoc",t._key,e,n,r):eb(i,"updateDoc",t._key,e),_c(s,[o.toMutation(t._key,yn.exists(!0))])}function Nu(t){return _c(Ln(t.firestore,Ys),[new tp(t._key,yn.none())])}function P1(t,e){const n=Ln(t.firestore,Ys),r=Er(t),s=R1(t.converter,e);return _c(n,[x1(mc(t.firestore),"addDoc",r._key,s,t.converter!==null,{}).toMutation(r._key,yn.exists(!1))]).then(()=>r)}function _c(t,e){return function(r,s){const i=new dr;return r.asyncQueue.enqueueAndForget(async()=>DR(await $R(r),s,i)),i.promise}(gp(t),e)}function hb(t,e,n){const r=n.docs.get(e._key),s=new N1(t);return new b1(t,s,e._key,r,new bo(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(s){Gi=s})(Ks),js(new rs("firestore",(r,{instanceIdentifier:s,options:i})=>{const o=r.getProvider("app").getImmediate(),a=new Ys(new dk(r.getProvider("auth-internal")),new gk(r.getProvider("app-check-internal")),function(c,h){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new te(q.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new fa(c.options.projectId,h)}(o,s),o);return i=Object.assign({useFetchStreams:n},i),a._setSettings(i),a},"PUBLIC").setMultipleInstances(!0)),qn(uy,"4.7.3",e),qn(uy,"4.7.3","esm2017")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D1="firebasestorage.googleapis.com",L1="storageBucket",db=2*60*1e3,fb=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qe extends Zn{constructor(e,n,r=0){super(yh(e),`Firebase Storage: ${n} (${yh(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Qe.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return yh(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Ge;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Ge||(Ge={}));function yh(t){return"storage/"+t}function Rp(){const t="An unknown error occurred, please check the error payload for server response.";return new Qe(Ge.UNKNOWN,t)}function pb(t){return new Qe(Ge.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function mb(t){return new Qe(Ge.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function gb(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new Qe(Ge.UNAUTHENTICATED,t)}function yb(){return new Qe(Ge.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function vb(t){return new Qe(Ge.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function _b(){return new Qe(Ge.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function wb(){return new Qe(Ge.CANCELED,"User canceled the upload/download.")}function Eb(t){return new Qe(Ge.INVALID_URL,"Invalid URL '"+t+"'.")}function xb(t){return new Qe(Ge.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function Tb(){return new Qe(Ge.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+L1+"' property when initializing the app?")}function Ib(){return new Qe(Ge.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function Ab(){return new Qe(Ge.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function Sb(t){return new Qe(Ge.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function Md(t){return new Qe(Ge.INVALID_ARGUMENT,t)}function O1(){return new Qe(Ge.APP_DELETED,"The Firebase app was deleted.")}function kb(t){return new Qe(Ge.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Wo(t,e){return new Qe(Ge.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function wo(t){throw new Qe(Ge.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sn{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=sn.makeFromUrl(e,n)}catch{return new sn(e,"")}if(r.path==="")return r;throw xb(e)}static makeFromUrl(e,n){let r=null;const s="([A-Za-z0-9.\\-_]+)";function i(b){b.path.charAt(b.path.length-1)==="/"&&(b.path_=b.path_.slice(0,-1))}const o="(/(.*))?$",a=new RegExp("^gs://"+s+o,"i"),u={bucket:1,path:3};function c(b){b.path_=decodeURIComponent(b.path)}const h="v[A-Za-z0-9_]+",f=n.replace(/[.]/g,"\\."),d="(/([^?#]*).*)?$",v=new RegExp(`^https?://${f}/${h}/b/${s}/o${d}`,"i"),x={bucket:1,path:3},k=n===D1?"(?:storage.googleapis.com|storage.cloud.google.com)":n,P="([^?#]*)",E=new RegExp(`^https?://${k}/${s}/${P}`,"i"),C=[{regex:a,indices:u,postModify:i},{regex:v,indices:x,postModify:c},{regex:E,indices:{bucket:1,path:2},postModify:c}];for(let b=0;b<C.length;b++){const j=C[b],D=j.regex.exec(e);if(D){const S=D[j.indices.bucket];let y=D[j.indices.path];y||(y=""),r=new sn(S,y),j.postModify(r);break}}if(r==null)throw Eb(e);return r}}class Cb{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rb(t,e,n){let r=1,s=null,i=null,o=!1,a=0;function u(){return a===2}let c=!1;function h(...P){c||(c=!0,e.apply(null,P))}function f(P){s=setTimeout(()=>{s=null,t(v,u())},P)}function d(){i&&clearTimeout(i)}function v(P,...E){if(c){d();return}if(P){d(),h.call(null,P,...E);return}if(u()||o){d(),h.call(null,P,...E);return}r<64&&(r*=2);let C;a===1?(a=2,C=0):C=(r+Math.random())*1e3,f(C)}let x=!1;function k(P){x||(x=!0,d(),!c&&(s!==null?(P||(a=2),clearTimeout(s),f(0)):P||(a=1)))}return f(0),i=setTimeout(()=>{o=!0,k(!0)},n),k}function bb(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nb(t){return t!==void 0}function Pb(t){return typeof t=="object"&&!Array.isArray(t)}function bp(t){return typeof t=="string"||t instanceof String}function Gy(t){return Np()&&t instanceof Blob}function Np(){return typeof Blob<"u"}function Qy(t,e,n,r){if(r<e)throw Md(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw Md(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pp(t,e,n){let r=e;return n==null&&(r=`https://${e}`),`${n}://${r}/v0${t}`}function j1(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const s=e(r)+"="+e(t[r]);n=n+s+"&"}return n=n.slice(0,-1),n}var bs;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(bs||(bs={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Db(t,e){const n=t>=500&&t<600,s=[408,429].indexOf(t)!==-1,i=e.indexOf(t)!==-1;return n||s||i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lb{constructor(e,n,r,s,i,o,a,u,c,h,f,d=!0){this.url_=e,this.method_=n,this.headers_=r,this.body_=s,this.successCodes_=i,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=u,this.timeout_=c,this.progressCallback_=h,this.connectionFactory_=f,this.retry=d,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((v,x)=>{this.resolve_=v,this.reject_=x,this.start_()})}start_(){const e=(r,s)=>{if(s){r(!1,new _l(!1,null,!0));return}const i=this.connectionFactory_();this.pendingConnection_=i;const o=a=>{const u=a.loaded,c=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(u,c)};this.progressCallback_!==null&&i.addUploadProgressListener(o),i.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&i.removeUploadProgressListener(o),this.pendingConnection_=null;const a=i.getErrorCode()===bs.NO_ERROR,u=i.getStatus();if(!a||Db(u,this.additionalRetryCodes_)&&this.retry){const h=i.getErrorCode()===bs.ABORT;r(!1,new _l(!1,null,h));return}const c=this.successCodes_.indexOf(u)!==-1;r(!0,new _l(c,i))})},n=(r,s)=>{const i=this.resolve_,o=this.reject_,a=s.connection;if(s.wasSuccessCode)try{const u=this.callback_(a,a.getResponse());Nb(u)?i(u):i()}catch(u){o(u)}else if(a!==null){const u=Rp();u.serverResponse=a.getErrorText(),this.errorCallback_?o(this.errorCallback_(a,u)):o(u)}else if(s.canceled){const u=this.appDelete_?O1():wb();o(u)}else{const u=_b();o(u)}};this.canceled_?n(!1,new _l(!1,null,!0)):this.backoffId_=Rb(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&bb(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class _l{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function Ob(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function jb(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function Mb(t,e){e&&(t["X-Firebase-GMPID"]=e)}function Vb(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function Ub(t,e,n,r,s,i,o=!0){const a=j1(t.urlParams),u=t.url+a,c=Object.assign({},t.headers);return Mb(c,e),Ob(c,n),jb(c,i),Vb(c,r),new Lb(u,t.method,c,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,s,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fb(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function Bb(...t){const e=Fb();if(e!==void 0){const n=new e;for(let r=0;r<t.length;r++)n.append(t[r]);return n.getBlob()}else{if(Np())return new Blob(t);throw new Qe(Ge.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function zb(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $b(t){if(typeof atob>"u")throw Sb("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $n={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class vh{constructor(e,n){this.data=e,this.contentType=n||null}}function Hb(t,e){switch(t){case $n.RAW:return new vh(M1(e));case $n.BASE64:case $n.BASE64URL:return new vh(V1(t,e));case $n.DATA_URL:return new vh(qb(e),Kb(e))}throw Rp()}function M1(t){const e=[];for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const i=r,o=t.charCodeAt(++n);r=65536|(i&1023)<<10|o&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function Wb(t){let e;try{e=decodeURIComponent(t)}catch{throw Wo($n.DATA_URL,"Malformed data URL.")}return M1(e)}function V1(t,e){switch(t){case $n.BASE64:{const s=e.indexOf("-")!==-1,i=e.indexOf("_")!==-1;if(s||i)throw Wo(t,"Invalid character '"+(s?"-":"_")+"' found: is it base64url encoded?");break}case $n.BASE64URL:{const s=e.indexOf("+")!==-1,i=e.indexOf("/")!==-1;if(s||i)throw Wo(t,"Invalid character '"+(s?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=$b(e)}catch(s){throw s.message.includes("polyfill")?s:Wo(t,"Invalid character found")}const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}class U1{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw Wo($n.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;r!=null&&(this.base64=Gb(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function qb(t){const e=new U1(t);return e.base64?V1($n.BASE64,e.rest):Wb(e.rest)}function Kb(t){return new U1(t).contentType}function Gb(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ur{constructor(e,n){let r=0,s="";Gy(e)?(this.data_=e,r=e.size,s=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=s}size(){return this.size_}type(){return this.type_}slice(e,n){if(Gy(this.data_)){const r=this.data_,s=zb(r,e,n);return s===null?null:new Ur(s)}else{const r=new Uint8Array(this.data_.buffer,e,n-e);return new Ur(r,!0)}}static getBlob(...e){if(Np()){const n=e.map(r=>r instanceof Ur?r.data_:r);return new Ur(Bb.apply(null,n))}else{const n=e.map(o=>bp(o)?Hb($n.RAW,o).data:o.data_);let r=0;n.forEach(o=>{r+=o.byteLength});const s=new Uint8Array(r);let i=0;return n.forEach(o=>{for(let a=0;a<o.length;a++)s[i++]=o[a]}),new Ur(s,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function F1(t){let e;try{e=JSON.parse(t)}catch{return null}return Pb(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qb(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function Yb(t,e){const n=e.split("/").filter(r=>r.length>0).join("/");return t.length===0?n:t+"/"+n}function B1(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xb(t,e){return e}class Mt{constructor(e,n,r,s){this.server=e,this.local=n||e,this.writable=!!r,this.xform=s||Xb}}let wl=null;function Jb(t){return!bp(t)||t.length<2?t:B1(t)}function z1(){if(wl)return wl;const t=[];t.push(new Mt("bucket")),t.push(new Mt("generation")),t.push(new Mt("metageneration")),t.push(new Mt("name","fullPath",!0));function e(i,o){return Jb(o)}const n=new Mt("name");n.xform=e,t.push(n);function r(i,o){return o!==void 0?Number(o):o}const s=new Mt("size");return s.xform=r,t.push(s),t.push(new Mt("timeCreated")),t.push(new Mt("updated")),t.push(new Mt("md5Hash",null,!0)),t.push(new Mt("cacheControl",null,!0)),t.push(new Mt("contentDisposition",null,!0)),t.push(new Mt("contentEncoding",null,!0)),t.push(new Mt("contentLanguage",null,!0)),t.push(new Mt("contentType",null,!0)),t.push(new Mt("metadata","customMetadata",!0)),wl=t,wl}function Zb(t,e){function n(){const r=t.bucket,s=t.fullPath,i=new sn(r,s);return e._makeStorageReference(i)}Object.defineProperty(t,"ref",{get:n})}function eN(t,e,n){const r={};r.type="file";const s=n.length;for(let i=0;i<s;i++){const o=n[i];r[o.local]=o.xform(r,e[o.server])}return Zb(r,t),r}function $1(t,e,n){const r=F1(e);return r===null?null:eN(t,r,n)}function tN(t,e,n,r){const s=F1(e);if(s===null||!bp(s.downloadTokens))return null;const i=s.downloadTokens;if(i.length===0)return null;const o=encodeURIComponent;return i.split(",").map(c=>{const h=t.bucket,f=t.fullPath,d="/b/"+o(h)+"/o/"+o(f),v=Pp(d,n,r),x=j1({alt:"media",token:c});return v+x})[0]}function nN(t,e){const n={},r=e.length;for(let s=0;s<r;s++){const i=e[s];i.writable&&(n[i.server]=t[i.local])}return JSON.stringify(n)}class H1{constructor(e,n,r,s){this.url=e,this.method=n,this.handler=r,this.timeout=s,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W1(t){if(!t)throw Rp()}function rN(t,e){function n(r,s){const i=$1(t,s,e);return W1(i!==null),i}return n}function sN(t,e){function n(r,s){const i=$1(t,s,e);return W1(i!==null),tN(i,s,t.host,t._protocol)}return n}function q1(t){function e(n,r){let s;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?s=yb():s=gb():n.getStatus()===402?s=mb(t.bucket):n.getStatus()===403?s=vb(t.path):s=r,s.status=n.getStatus(),s.serverResponse=r.serverResponse,s}return e}function iN(t){const e=q1(t);function n(r,s){let i=e(r,s);return r.getStatus()===404&&(i=pb(t.path)),i.serverResponse=s.serverResponse,i}return n}function oN(t,e,n){const r=e.fullServerUrl(),s=Pp(r,t.host,t._protocol),i="GET",o=t.maxOperationRetryTime,a=new H1(s,i,sN(t,n),o);return a.errorHandler=iN(e),a}function aN(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function lN(t,e,n){const r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=aN(null,e)),r}function uN(t,e,n,r,s){const i=e.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function a(){let C="";for(let b=0;b<2;b++)C=C+Math.random().toString().slice(2);return C}const u=a();o["Content-Type"]="multipart/related; boundary="+u;const c=lN(e,r,s),h=nN(c,n),f="--"+u+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+h+`\r
--`+u+`\r
Content-Type: `+c.contentType+`\r
\r
`,d=`\r
--`+u+"--",v=Ur.getBlob(f,r,d);if(v===null)throw Ib();const x={name:c.fullPath},k=Pp(i,t.host,t._protocol),P="POST",E=t.maxUploadRetryTime,I=new H1(k,P,rN(t,n),E);return I.urlParams=x,I.headers=o,I.body=v.uploadData(),I.errorHandler=q1(e),I}class cN{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=bs.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=bs.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=bs.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,r,s){if(this.sent_)throw wo("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(n,e,!0),s!==void 0)for(const i in s)s.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,s[i].toString());return r!==void 0?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw wo("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw wo("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw wo("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw wo("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class hN extends cN{initXhr(){this.xhr_.responseType="text"}}function K1(){return new hN}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $s{constructor(e,n){this._service=e,n instanceof sn?this._location=n:this._location=sn.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new $s(e,n)}get root(){const e=new sn(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return B1(this._location.path)}get storage(){return this._service}get parent(){const e=Qb(this._location.path);if(e===null)return null;const n=new sn(this._location.bucket,e);return new $s(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw kb(e)}}function dN(t,e,n){t._throwIfRoot("uploadBytes");const r=uN(t.storage,t._location,z1(),new Ur(e,!0),n);return t.storage.makeRequestWithTokens(r,K1).then(s=>({metadata:s,ref:t}))}function fN(t){t._throwIfRoot("getDownloadURL");const e=oN(t.storage,t._location,z1());return t.storage.makeRequestWithTokens(e,K1).then(n=>{if(n===null)throw Ab();return n})}function pN(t,e){const n=Yb(t._location.path,e),r=new sn(t._location.bucket,n);return new $s(t.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mN(t){return/^[A-Za-z]+:\/\//.test(t)}function gN(t,e){return new $s(t,e)}function G1(t,e){if(t instanceof Dp){const n=t;if(n._bucket==null)throw Tb();const r=new $s(n,n._bucket);return e!=null?G1(r,e):r}else return e!==void 0?pN(t,e):t}function yN(t,e){if(e&&mN(e)){if(t instanceof Dp)return gN(t,e);throw Md("To use ref(service, url), the first argument must be a Storage instance.")}else return G1(t,e)}function Yy(t,e){const n=e==null?void 0:e[L1];return n==null?null:sn.makeFromBucketSpec(n,t)}function vN(t,e,n,r={}){t.host=`${e}:${n}`,t._protocol="http";const{mockUserToken:s}=r;s&&(t._overrideAuthToken=typeof s=="string"?s:x_(s,t.app.options.projectId))}class Dp{constructor(e,n,r,s,i){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=s,this._firebaseVersion=i,this._bucket=null,this._host=D1,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=db,this._maxUploadRetryTime=fb,this._requests=new Set,s!=null?this._bucket=sn.makeFromBucketSpec(s,this._host):this._bucket=Yy(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=sn.makeFromBucketSpec(this._url,e):this._bucket=Yy(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){Qy("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){Qy("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new $s(this,e)}_makeRequest(e,n,r,s,i=!0){if(this._deleted)return new Cb(O1());{const o=Ub(e,this._appId,r,s,n,this._firebaseVersion,i);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,n){const[r,s]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,s).getPromise()}}const Xy="@firebase/storage",Jy="0.13.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q1="storage";function Y1(t,e,n){return t=Me(t),dN(t,e,n)}function X1(t){return t=Me(t),fN(t)}function J1(t,e){return t=Me(t),yN(t,e)}function _N(t=Of(),e){t=Me(t);const r=Zu(t,Q1).getImmediate({identifier:e}),s=__("storage");return s&&wN(r,...s),r}function wN(t,e,n,r={}){vN(t,e,n,r)}function EN(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),s=t.getProvider("app-check-internal");return new Dp(n,r,s,e,Ks)}function xN(){js(new rs(Q1,EN,"PUBLIC").setMultipleInstances(!0)),qn(Xy,Jy,""),qn(Xy,Jy,"esm2017")}xN();const TN={apiKey:"AIzaSyA4KFdLVKVy6WdAfTGuLWDJsV_tcuNp7kw",authDomain:"run-log-31420.firebaseapp.com",projectId:"run-log-31420",storageBucket:"run-log-31420.firebasestorage.app",messagingSenderId:"325067679087",appId:"1:325067679087:web:727201211a34ac6c1fb49a"},Lp=A_(TN),kn=lk(Lp),lt=QR(Lp),Z1=_N(Lp),Re=(t,e="success")=>{if(!document.getElementById("toast-container")){const i=document.createElement("div");i.id="toast-container",i.className="fixed bottom-20 left-1/2 -translate-x-1/2 z-50 flex flex-col items-center",document.body.appendChild(i)}const r=document.getElementById("toast-container"),s=document.createElement("div");s.className=`px-6 py-3 rounded-lg shadow-lg text-white font-medium z-50 animate-slide-up mb-3 ${e==="success"?"bg-navy-700":e==="error"?"bg-red-500":"bg-navy-700"}`,s.textContent=t,s.style.animation="slideUp 0.3s ease-out",r.appendChild(s),setTimeout(()=>{s.style.animation="slideDown 0.3s ease-out",setTimeout(()=>s.remove(),300)},2e3)},eE=async t=>{const e=Cn(lt,"users");return(await ur(e)).docs.some(r=>r.data().nickname===t)},tE=t=>/^(?=.*[a-z])(?=.*[A-Z])(?=.*[!@#$%^&*]).{8,}$/.test(t),IN=({onAuthSuccess:t})=>{const[e,n]=X.useState(!0),[r,s]=X.useState(""),[i,o]=X.useState(""),[a,u]=X.useState(""),[c,h]=X.useState(""),[f,d]=X.useState(!1),[v,x]=X.useState(""),[k,P]=X.useState(""),[E,I]=X.useState(!1),[C,b]=X.useState(!1),[j,D]=X.useState(""),[S,y]=X.useState(!1),[p,w]=X.useState(!1),[A,R]=X.useState(!1),T=async()=>{if(!c.trim()){P(" .");return}x("checking"),P("");try{await eE(c)?(x("taken"),d(!1),P("   .")):(x("available"),d(!0),P(""))}catch{x(""),P("    .")}},M=L=>{h(L.target.value),d(!1),x(""),P("")},z=async L=>{L.preventDefault(),P(""),I(!0);try{if(e)await wd(kn,r,i);else{if(!f){P("   ."),I(!1);return}if(!tE(i)){P(" ,   8  ."),I(!1);return}if(i!==a){P("  ."),I(!1);return}const U=await $A(kn,r,i);await cb(Er(lt,"users",U.user.uid),{nickname:c,email:r,createdAt:je.now()}),await $f(U.user,{displayName:c}),y(!0),setTimeout(()=>{y(!1),t()},2e3)}}catch(U){U.code==="auth/user-not-found"||U.code==="auth/wrong-password"||U.code==="auth/invalid-credential"?P("      ."):U.code==="auth/email-already-in-use"?P("   ."):P(" .  .")}finally{I(!1)}},O=async L=>{L.preventDefault(),P(""),I(!0);try{await zA(kn,j),Re("   ."),b(!1),D("")}catch{P("  .  .")}finally{I(!1)}};return g.jsxs(g.Fragment,{children:[g.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-navy-800 via-navy-700 to-navy-600 p-4",children:g.jsxs("div",{className:"auth-card bg-white rounded-2xl shadow-2xl p-8 w-full max-w-md",children:[g.jsxs("div",{className:"text-center mb-8",children:[g.jsx("h1",{className:"text-4xl font-bold mb-2 text-navy-900",children:"RunLog"}),g.jsx("p",{className:"text-navy-600 text-base",children:"   "})]}),g.jsxs("form",{onSubmit:z,className:"space-y-4",children:[!e&&g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-semibold text-navy-700 mb-2",children:""}),g.jsxs("div",{className:"flex gap-2",children:[g.jsx("input",{type:"text",value:c,onChange:M,className:`flex-1 min-w-0 px-3 sm:px-4 py-3 rounded-lg border-2 transition-colors text-sm sm:text-base ${v==="available"?"border-green-500 focus:border-green-600":v==="taken"?"border-red-500 focus:border-red-600":"border-navy-200 focus:border-navy-600"} focus:outline-none`,required:!0}),g.jsx("button",{type:"button",onClick:T,disabled:v==="checking"||!c.trim(),className:"px-3 sm:px-4 py-3 bg-navy-600 text-white text-xs sm:text-sm font-semibold rounded-lg hover:bg-navy-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed whitespace-nowrap flex-shrink-0",children:v==="checking"?"":""})]}),v==="available"&&g.jsx("p",{className:"text-xs text-green-600 mt-1",children:"   ."}),v==="taken"&&g.jsx("p",{className:"text-xs text-red-600 mt-1",children:"    ."})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-semibold text-navy-700 mb-2",children:""}),g.jsx("input",{type:"email",value:r,onChange:L=>s(L.target.value),className:"w-full px-4 py-3 rounded-lg border-2 border-navy-200 focus:border-navy-600 focus:outline-none transition-colors",required:!0})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-semibold text-navy-700 mb-2",children:""}),g.jsxs("div",{className:"relative",children:[g.jsx("input",{type:p?"text":"password",value:i,onChange:L=>o(L.target.value),className:"w-full px-4 py-3 pr-12 rounded-lg border-2 border-navy-200 focus:border-navy-600 focus:outline-none transition-colors",required:!0}),g.jsx("button",{type:"button",onClick:()=>w(!p),className:"absolute right-3 top-1/2 -translate-y-1/2 text-navy-400 hover:text-navy-600",children:p?g.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21"})}):g.jsxs("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})})]}),!e&&g.jsx("p",{className:"text-xs text-navy-500 mt-1",children:",   8 "})]}),!e&&g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-semibold text-navy-700 mb-2",children:" "}),g.jsxs("div",{className:"relative",children:[g.jsx("input",{type:A?"text":"password",value:a,onChange:L=>u(L.target.value),className:"w-full px-4 py-3 pr-12 rounded-lg border-2 border-navy-200 focus:border-navy-600 focus:outline-none transition-colors",required:!0}),g.jsx("button",{type:"button",onClick:()=>R(!A),className:"absolute right-3 top-1/2 -translate-y-1/2 text-navy-400 hover:text-navy-600",children:A?g.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21"})}):g.jsxs("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})})]})]}),k&&g.jsx("div",{className:"bg-red-50 text-red-600 px-4 py-3 rounded-lg text-sm",children:k}),g.jsxs("button",{type:"submit",disabled:E,className:"w-full bg-navy-700 text-white font-semibold py-3 rounded-lg hover:bg-navy-800 transition-colors disabled:opacity-50 flex items-center justify-center gap-2",children:[E&&g.jsxs("svg",{className:"animate-spin h-5 w-5",fill:"none",viewBox:"0 0 24 24",children:[g.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),g.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),E?"...":e?"":""]})]}),g.jsxs("div",{className:"mt-6 text-center space-y-2",children:[g.jsxs("div",{className:"text-sm text-navy-600",children:[e?" ? ":"  ? ",g.jsx("button",{onClick:()=>{n(!e),P("")},className:"text-navy-700 font-semibold hover:text-navy-900 transition-colors",children:e?"":""})]}),e&&g.jsx("button",{onClick:()=>b(!0),className:"text-sm text-navy-600 hover:text-navy-800 transition-colors",children:" "})]})]})}),C&&g.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:g.jsxs("div",{className:"bg-white rounded-2xl p-6 w-full max-w-md slide-up",children:[g.jsx("h2",{className:"text-2xl font-bold text-navy-900 mb-4",children:" "}),g.jsxs("form",{onSubmit:O,className:"space-y-4",children:[g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-semibold text-navy-700 mb-2",children:""}),g.jsx("input",{type:"email",value:j,onChange:L=>D(L.target.value),className:"w-full px-4 py-3 rounded-lg border-2 border-navy-200 focus:border-navy-600 focus:outline-none",placeholder:"  ",required:!0})]}),k&&g.jsx("div",{className:"bg-red-50 text-red-600 px-4 py-3 rounded-lg text-sm",children:k}),g.jsxs("div",{className:"flex gap-2",children:[g.jsx("button",{type:"submit",disabled:E,className:"flex-1 bg-navy-700 text-white font-semibold py-3 rounded-lg hover:bg-navy-800 transition-colors",children:""}),g.jsx("button",{type:"button",onClick:()=>{b(!1),D(""),P("")},className:"flex-1 bg-navy-100 text-navy-700 font-semibold py-3 rounded-lg hover:bg-navy-200 transition-colors",children:""})]})]})]})}),S&&g.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:g.jsxs("div",{className:"bg-white rounded-2xl p-8 text-center slide-up",children:[g.jsx("div",{className:"text-6xl mb-4",children:""}),g.jsx("h2",{className:"text-2xl font-bold text-navy-900 mb-2",children:"!"}),g.jsx("p",{className:"text-navy-600",children:" ."})]})})]})};function AN(t,e){return e.forEach(function(n){n&&typeof n!="string"&&!Array.isArray(n)&&Object.keys(n).forEach(function(r){if(r!=="default"&&!(r in t)){var s=Object.getOwnPropertyDescriptor(n,r);Object.defineProperty(t,r,s.get?s:{enumerable:!0,get:function(){return n[r]}})}})}),Object.freeze(t)}function nE(t,e){return new Promise(function(n,r){let s;return SN(t).then(function(i){try{return s=i,n(new Blob([e.slice(0,2),s,e.slice(2)],{type:"image/jpeg"}))}catch(o){return r(o)}},r)})}const SN=t=>new Promise((e,n)=>{const r=new FileReader;r.addEventListener("load",({target:{result:s}})=>{const i=new DataView(s);let o=0;if(i.getUint16(o)!==65496)return n("not a valid JPEG");for(o+=2;;){const a=i.getUint16(o);if(a===65498)break;const u=i.getUint16(o+2);if(a===65505&&i.getUint32(o+4)===1165519206){const c=o+10;let h;switch(i.getUint16(c)){case 18761:h=!0;break;case 19789:h=!1;break;default:return n("TIFF header contains invalid endian")}if(i.getUint16(c+2,h)!==42)return n("TIFF header contains invalid version");const f=i.getUint32(c+4,h),d=c+f+2+12*i.getUint16(c+f,h);for(let v=c+f+2;v<d;v+=12)if(i.getUint16(v,h)==274){if(i.getUint16(v+2,h)!==3)return n("Orientation data type is invalid");if(i.getUint32(v+4,h)!==1)return n("Orientation data count is invalid");i.setUint16(v+8,1,h);break}return e(s.slice(o,o+2+u))}o+=2+u}return e(new Blob)}),r.readAsArrayBuffer(t)});var Pu={},kN={get exports(){return Pu},set exports(t){Pu=t}};(function(t){var e,n,r={};kN.exports=r,r.parse=function(s,i){for(var o=r.bin.readUshort,a=r.bin.readUint,u=0,c={},h=new Uint8Array(s),f=h.length-4;a(h,f)!=101010256;)f--;u=f,u+=4;var d=o(h,u+=4);o(h,u+=2);var v=a(h,u+=2),x=a(h,u+=4);u+=4,u=x;for(var k=0;k<d;k++){a(h,u),u+=4,u+=4,u+=4,a(h,u+=4),v=a(h,u+=4);var P=a(h,u+=4),E=o(h,u+=4),I=o(h,u+2),C=o(h,u+4);u+=6;var b=a(h,u+=8);u+=4,u+=E+I+C,r._readLocal(h,b,c,v,P,i)}return c},r._readLocal=function(s,i,o,a,u,c){var h=r.bin.readUshort,f=r.bin.readUint;f(s,i),h(s,i+=4),h(s,i+=2);var d=h(s,i+=2);f(s,i+=2),f(s,i+=4),i+=4;var v=h(s,i+=8),x=h(s,i+=2);i+=2;var k=r.bin.readUTF8(s,i,v);if(i+=v,i+=x,c)o[k]={size:u,csize:a};else{var P=new Uint8Array(s.buffer,i);if(d==0)o[k]=new Uint8Array(P.buffer.slice(i,i+a));else{if(d!=8)throw"unknown compression method: "+d;var E=new Uint8Array(u);r.inflateRaw(P,E),o[k]=E}}},r.inflateRaw=function(s,i){return r.F.inflate(s,i)},r.inflate=function(s,i){return s[0],s[1],r.inflateRaw(new Uint8Array(s.buffer,s.byteOffset+2,s.length-6),i)},r.deflate=function(s,i){i==null&&(i={level:6});var o=0,a=new Uint8Array(50+Math.floor(1.1*s.length));a[o]=120,a[o+1]=156,o+=2,o=r.F.deflateRaw(s,a,o,i.level);var u=r.adler(s,0,s.length);return a[o+0]=u>>>24&255,a[o+1]=u>>>16&255,a[o+2]=u>>>8&255,a[o+3]=u>>>0&255,new Uint8Array(a.buffer,0,o+4)},r.deflateRaw=function(s,i){i==null&&(i={level:6});var o=new Uint8Array(50+Math.floor(1.1*s.length)),a=r.F.deflateRaw(s,o,a,i.level);return new Uint8Array(o.buffer,0,a)},r.encode=function(s,i){i==null&&(i=!1);var o=0,a=r.bin.writeUint,u=r.bin.writeUshort,c={};for(var h in s){var f=!r._noNeed(h)&&!i,d=s[h],v=r.crc.crc(d,0,d.length);c[h]={cpr:f,usize:d.length,crc:v,file:f?r.deflateRaw(d):d}}for(var h in c)o+=c[h].file.length+30+46+2*r.bin.sizeUTF8(h);o+=22;var x=new Uint8Array(o),k=0,P=[];for(var h in c){var E=c[h];P.push(k),k=r._writeHeader(x,k,h,E,0)}var I=0,C=k;for(var h in c)E=c[h],P.push(k),k=r._writeHeader(x,k,h,E,1,P[I++]);var b=k-C;return a(x,k,101010256),k+=4,u(x,k+=4,I),u(x,k+=2,I),a(x,k+=2,b),a(x,k+=4,C),k+=4,k+=2,x.buffer},r._noNeed=function(s){var i=s.split(".").pop().toLowerCase();return"png,jpg,jpeg,zip".indexOf(i)!=-1},r._writeHeader=function(s,i,o,a,u,c){var h=r.bin.writeUint,f=r.bin.writeUshort,d=a.file;return h(s,i,u==0?67324752:33639248),i+=4,u==1&&(i+=2),f(s,i,20),f(s,i+=2,0),f(s,i+=2,a.cpr?8:0),h(s,i+=2,0),h(s,i+=4,a.crc),h(s,i+=4,d.length),h(s,i+=4,a.usize),f(s,i+=4,r.bin.sizeUTF8(o)),f(s,i+=2,0),i+=2,u==1&&(i+=2,i+=2,h(s,i+=6,c),i+=4),i+=r.bin.writeUTF8(s,i,o),u==0&&(s.set(d,i),i+=d.length),i},r.crc={table:function(){for(var s=new Uint32Array(256),i=0;i<256;i++){for(var o=i,a=0;a<8;a++)1&o?o=3988292384^o>>>1:o>>>=1;s[i]=o}return s}(),update:function(s,i,o,a){for(var u=0;u<a;u++)s=r.crc.table[255&(s^i[o+u])]^s>>>8;return s},crc:function(s,i,o){return 4294967295^r.crc.update(4294967295,s,i,o)}},r.adler=function(s,i,o){for(var a=1,u=0,c=i,h=i+o;c<h;){for(var f=Math.min(c+5552,h);c<f;)u+=a+=s[c++];a%=65521,u%=65521}return u<<16|a},r.bin={readUshort:function(s,i){return s[i]|s[i+1]<<8},writeUshort:function(s,i,o){s[i]=255&o,s[i+1]=o>>8&255},readUint:function(s,i){return 16777216*s[i+3]+(s[i+2]<<16|s[i+1]<<8|s[i])},writeUint:function(s,i,o){s[i]=255&o,s[i+1]=o>>8&255,s[i+2]=o>>16&255,s[i+3]=o>>24&255},readASCII:function(s,i,o){for(var a="",u=0;u<o;u++)a+=String.fromCharCode(s[i+u]);return a},writeASCII:function(s,i,o){for(var a=0;a<o.length;a++)s[i+a]=o.charCodeAt(a)},pad:function(s){return s.length<2?"0"+s:s},readUTF8:function(s,i,o){for(var a,u="",c=0;c<o;c++)u+="%"+r.bin.pad(s[i+c].toString(16));try{a=decodeURIComponent(u)}catch{return r.bin.readASCII(s,i,o)}return a},writeUTF8:function(s,i,o){for(var a=o.length,u=0,c=0;c<a;c++){var h=o.charCodeAt(c);if(!(4294967168&h))s[i+u]=h,u++;else if(!(4294965248&h))s[i+u]=192|h>>6,s[i+u+1]=128|h>>0&63,u+=2;else if(!(4294901760&h))s[i+u]=224|h>>12,s[i+u+1]=128|h>>6&63,s[i+u+2]=128|h>>0&63,u+=3;else{if(4292870144&h)throw"e";s[i+u]=240|h>>18,s[i+u+1]=128|h>>12&63,s[i+u+2]=128|h>>6&63,s[i+u+3]=128|h>>0&63,u+=4}}return u},sizeUTF8:function(s){for(var i=s.length,o=0,a=0;a<i;a++){var u=s.charCodeAt(a);if(!(4294967168&u))o++;else if(!(4294965248&u))o+=2;else if(!(4294901760&u))o+=3;else{if(4292870144&u)throw"e";o+=4}}return o}},r.F={},r.F.deflateRaw=function(s,i,o,a){var u=[[0,0,0,0,0],[4,4,8,4,0],[4,5,16,8,0],[4,6,16,16,0],[4,10,16,32,0],[8,16,32,32,0],[8,16,128,128,0],[8,32,128,256,0],[32,128,258,1024,1],[32,258,258,4096,1]][a],c=r.F.U,h=r.F._goodIndex;r.F._hash;var f=r.F._putsE,d=0,v=o<<3,x=0,k=s.length;if(a==0){for(;d<k;)f(i,v,d+(A=Math.min(65535,k-d))==k?1:0),v=r.F._copyExact(s,d,A,i,v+8),d+=A;return v>>>3}var P=c.lits,E=c.strt,I=c.prev,C=0,b=0,j=0,D=0,S=0,y=0;for(k>2&&(E[y=r.F._hash(s,0)]=0),d=0;d<k;d++){if(S=y,d+1<k-2){y=r.F._hash(s,d+1);var p=d+1&32767;I[p]=E[y],E[y]=p}if(x<=d){(C>14e3||b>26697)&&k-d>100&&(x<d&&(P[C]=d-x,C+=2,x=d),v=r.F._writeBlock(d==k-1||x==k?1:0,P,C,D,s,j,d-j,i,v),C=b=D=0,j=d);var w=0;d<k-2&&(w=r.F._bestMatch(s,d,I,S,Math.min(u[2],k-d),u[3]));var A=w>>>16,R=65535&w;if(w!=0){R=65535&w;var T=h(A=w>>>16,c.of0);c.lhst[257+T]++;var M=h(R,c.df0);c.dhst[M]++,D+=c.exb[T]+c.dxb[M],P[C]=A<<23|d-x,P[C+1]=R<<16|T<<8|M,C+=2,x=d+A}else c.lhst[s[d]]++;b++}}for(j==d&&s.length!=0||(x<d&&(P[C]=d-x,C+=2,x=d),v=r.F._writeBlock(1,P,C,D,s,j,d-j,i,v),C=0,b=0,C=b=D=0,j=d);7&v;)v++;return v>>>3},r.F._bestMatch=function(s,i,o,a,u,c){var h=32767&i,f=o[h],d=h-f+32768&32767;if(f==h||a!=r.F._hash(s,i-d))return 0;for(var v=0,x=0,k=Math.min(32767,i);d<=k&&--c!=0&&f!=h;){if(v==0||s[i+v]==s[i+v-d]){var P=r.F._howLong(s,i,d);if(P>v){if(x=d,(v=P)>=u)break;d+2<P&&(P=d+2);for(var E=0,I=0;I<P-2;I++){var C=i-d+I+32768&32767,b=C-o[C]+32768&32767;b>E&&(E=b,f=C)}}}d+=(h=f)-(f=o[h])+32768&32767}return v<<16|x},r.F._howLong=function(s,i,o){if(s[i]!=s[i-o]||s[i+1]!=s[i+1-o]||s[i+2]!=s[i+2-o])return 0;var a=i,u=Math.min(s.length,i+258);for(i+=3;i<u&&s[i]==s[i-o];)i++;return i-a},r.F._hash=function(s,i){return(s[i]<<8|s[i+1])+(s[i+2]<<4)&65535},r.saved=0,r.F._writeBlock=function(s,i,o,a,u,c,h,f,d){var v,x,k,P,E,I,C,b,j,D=r.F.U,S=r.F._putsF,y=r.F._putsE;D.lhst[256]++,x=(v=r.F.getTrees())[0],k=v[1],P=v[2],E=v[3],I=v[4],C=v[5],b=v[6],j=v[7];var p=32+(d+3&7?8-(d+3&7):0)+(h<<3),w=a+r.F.contSize(D.fltree,D.lhst)+r.F.contSize(D.fdtree,D.dhst),A=a+r.F.contSize(D.ltree,D.lhst)+r.F.contSize(D.dtree,D.dhst);A+=14+3*C+r.F.contSize(D.itree,D.ihst)+(2*D.ihst[16]+3*D.ihst[17]+7*D.ihst[18]);for(var R=0;R<286;R++)D.lhst[R]=0;for(R=0;R<30;R++)D.dhst[R]=0;for(R=0;R<19;R++)D.ihst[R]=0;var T=p<w&&p<A?0:w<A?1:2;if(S(f,d,s),S(f,d+1,T),d+=3,T==0){for(;7&d;)d++;d=r.F._copyExact(u,c,h,f,d)}else{var M,z;if(T==1&&(M=D.fltree,z=D.fdtree),T==2){r.F.makeCodes(D.ltree,x),r.F.revCodes(D.ltree,x),r.F.makeCodes(D.dtree,k),r.F.revCodes(D.dtree,k),r.F.makeCodes(D.itree,P),r.F.revCodes(D.itree,P),M=D.ltree,z=D.dtree,y(f,d,E-257),y(f,d+=5,I-1),y(f,d+=5,C-4),d+=4;for(var O=0;O<C;O++)y(f,d+3*O,D.itree[1+(D.ordr[O]<<1)]);d+=3*C,d=r.F._codeTiny(b,D.itree,f,d),d=r.F._codeTiny(j,D.itree,f,d)}for(var L=c,U=0;U<o;U+=2){for(var V=i[U],H=V>>>23,J=L+(8388607&V);L<J;)d=r.F._writeLit(u[L++],M,f,d);if(H!=0){var K=i[U+1],Y=K>>16,F=K>>8&255,B=255&K;y(f,d=r.F._writeLit(257+F,M,f,d),H-D.of0[F]),d+=D.exb[F],S(f,d=r.F._writeLit(B,z,f,d),Y-D.df0[B]),d+=D.dxb[B],L+=H}}d=r.F._writeLit(256,M,f,d)}return d},r.F._copyExact=function(s,i,o,a,u){var c=u>>>3;return a[c]=o,a[c+1]=o>>>8,a[c+2]=255-a[c],a[c+3]=255-a[c+1],c+=4,a.set(new Uint8Array(s.buffer,i,o),c),u+(o+4<<3)},r.F.getTrees=function(){for(var s=r.F.U,i=r.F._hufTree(s.lhst,s.ltree,15),o=r.F._hufTree(s.dhst,s.dtree,15),a=[],u=r.F._lenCodes(s.ltree,a),c=[],h=r.F._lenCodes(s.dtree,c),f=0;f<a.length;f+=2)s.ihst[a[f]]++;for(f=0;f<c.length;f+=2)s.ihst[c[f]]++;for(var d=r.F._hufTree(s.ihst,s.itree,7),v=19;v>4&&s.itree[1+(s.ordr[v-1]<<1)]==0;)v--;return[i,o,d,u,h,v,a,c]},r.F.getSecond=function(s){for(var i=[],o=0;o<s.length;o+=2)i.push(s[o+1]);return i},r.F.nonZero=function(s){for(var i="",o=0;o<s.length;o+=2)s[o+1]!=0&&(i+=(o>>1)+",");return i},r.F.contSize=function(s,i){for(var o=0,a=0;a<i.length;a++)o+=i[a]*s[1+(a<<1)];return o},r.F._codeTiny=function(s,i,o,a){for(var u=0;u<s.length;u+=2){var c=s[u],h=s[u+1];a=r.F._writeLit(c,i,o,a);var f=c==16?2:c==17?3:7;c>15&&(r.F._putsE(o,a,h,f),a+=f)}return a},r.F._lenCodes=function(s,i){for(var o=s.length;o!=2&&s[o-1]==0;)o-=2;for(var a=0;a<o;a+=2){var u=s[a+1],c=a+3<o?s[a+3]:-1,h=a+5<o?s[a+5]:-1,f=a==0?-1:s[a-1];if(u==0&&c==u&&h==u){for(var d=a+5;d+2<o&&s[d+2]==u;)d+=2;(v=Math.min(d+1-a>>>1,138))<11?i.push(17,v-3):i.push(18,v-11),a+=2*v-2}else if(u==f&&c==u&&h==u){for(d=a+5;d+2<o&&s[d+2]==u;)d+=2;var v=Math.min(d+1-a>>>1,6);i.push(16,v-3),a+=2*v-2}else i.push(u,0)}return o>>>1},r.F._hufTree=function(s,i,o){var a=[],u=s.length,c=i.length,h=0;for(h=0;h<c;h+=2)i[h]=0,i[h+1]=0;for(h=0;h<u;h++)s[h]!=0&&a.push({lit:h,f:s[h]});var f=a.length,d=a.slice(0);if(f==0)return 0;if(f==1){var v=a[0].lit;return d=v==0?1:0,i[1+(v<<1)]=1,i[1+(d<<1)]=1,1}a.sort(function(b,j){return b.f-j.f});var x=a[0],k=a[1],P=0,E=1,I=2;for(a[0]={lit:-1,f:x.f+k.f,l:x,r:k,d:0};E!=f-1;)x=P!=E&&(I==f||a[P].f<a[I].f)?a[P++]:a[I++],k=P!=E&&(I==f||a[P].f<a[I].f)?a[P++]:a[I++],a[E++]={lit:-1,f:x.f+k.f,l:x,r:k};var C=r.F.setDepth(a[E-1],0);for(C>o&&(r.F.restrictDepth(d,o,C),C=o),h=0;h<f;h++)i[1+(d[h].lit<<1)]=d[h].d;return C},r.F.setDepth=function(s,i){return s.lit!=-1?(s.d=i,i):Math.max(r.F.setDepth(s.l,i+1),r.F.setDepth(s.r,i+1))},r.F.restrictDepth=function(s,i,o){var a=0,u=1<<o-i,c=0;for(s.sort(function(f,d){return d.d==f.d?f.f-d.f:d.d-f.d}),a=0;a<s.length&&s[a].d>i;a++){var h=s[a].d;s[a].d=i,c+=u-(1<<o-h)}for(c>>>=o-i;c>0;)(h=s[a].d)<i?(s[a].d++,c-=1<<i-h-1):a++;for(;a>=0;a--)s[a].d==i&&c<0&&(s[a].d--,c++);c!=0&&console.log("debt left")},r.F._goodIndex=function(s,i){var o=0;return i[16|o]<=s&&(o|=16),i[8|o]<=s&&(o|=8),i[4|o]<=s&&(o|=4),i[2|o]<=s&&(o|=2),i[1|o]<=s&&(o|=1),o},r.F._writeLit=function(s,i,o,a){return r.F._putsF(o,a,i[s<<1]),a+i[1+(s<<1)]},r.F.inflate=function(s,i){var o=Uint8Array;if(s[0]==3&&s[1]==0)return i||new o(0);var a=r.F,u=a._bitsF,c=a._bitsE,h=a._decodeTiny,f=a.makeCodes,d=a.codes2map,v=a._get17,x=a.U,k=i==null;k&&(i=new o(s.length>>>2<<3));for(var P,E,I=0,C=0,b=0,j=0,D=0,S=0,y=0,p=0,w=0;I==0;)if(I=u(s,w,1),C=u(s,w+1,2),w+=3,C!=0){if(k&&(i=r.F._check(i,p+(1<<17))),C==1&&(P=x.flmap,E=x.fdmap,S=511,y=31),C==2){b=c(s,w,5)+257,j=c(s,w+5,5)+1,D=c(s,w+10,4)+4,w+=14;for(var A=0;A<38;A+=2)x.itree[A]=0,x.itree[A+1]=0;var R=1;for(A=0;A<D;A++){var T=c(s,w+3*A,3);x.itree[1+(x.ordr[A]<<1)]=T,T>R&&(R=T)}w+=3*D,f(x.itree,R),d(x.itree,R,x.imap),P=x.lmap,E=x.dmap,w=h(x.imap,(1<<R)-1,b+j,s,w,x.ttree);var M=a._copyOut(x.ttree,0,b,x.ltree);S=(1<<M)-1;var z=a._copyOut(x.ttree,b,j,x.dtree);y=(1<<z)-1,f(x.ltree,M),d(x.ltree,M,P),f(x.dtree,z),d(x.dtree,z,E)}for(;;){var O=P[v(s,w)&S];w+=15&O;var L=O>>>4;if(!(L>>>8))i[p++]=L;else{if(L==256)break;var U=p+L-254;if(L>264){var V=x.ldef[L-257];U=p+(V>>>3)+c(s,w,7&V),w+=7&V}var H=E[v(s,w)&y];w+=15&H;var J=H>>>4,K=x.ddef[J],Y=(K>>>4)+u(s,w,15&K);for(w+=15&K,k&&(i=r.F._check(i,p+(1<<17)));p<U;)i[p]=i[p++-Y],i[p]=i[p++-Y],i[p]=i[p++-Y],i[p]=i[p++-Y];p=U}}}else{7&w&&(w+=8-(7&w));var F=4+(w>>>3),B=s[F-4]|s[F-3]<<8;k&&(i=r.F._check(i,p+B)),i.set(new o(s.buffer,s.byteOffset+F,B),p),w=F+B<<3,p+=B}return i.length==p?i:i.slice(0,p)},r.F._check=function(s,i){var o=s.length;if(i<=o)return s;var a=new Uint8Array(Math.max(o<<1,i));return a.set(s,0),a},r.F._decodeTiny=function(s,i,o,a,u,c){for(var h=r.F._bitsE,f=r.F._get17,d=0;d<o;){var v=s[f(a,u)&i];u+=15&v;var x=v>>>4;if(x<=15)c[d]=x,d++;else{var k=0,P=0;x==16?(P=3+h(a,u,2),u+=2,k=c[d-1]):x==17?(P=3+h(a,u,3),u+=3):x==18&&(P=11+h(a,u,7),u+=7);for(var E=d+P;d<E;)c[d]=k,d++}}return u},r.F._copyOut=function(s,i,o,a){for(var u=0,c=0,h=a.length>>>1;c<o;){var f=s[c+i];a[c<<1]=0,a[1+(c<<1)]=f,f>u&&(u=f),c++}for(;c<h;)a[c<<1]=0,a[1+(c<<1)]=0,c++;return u},r.F.makeCodes=function(s,i){for(var o,a,u,c,h=r.F.U,f=s.length,d=h.bl_count,v=0;v<=i;v++)d[v]=0;for(v=1;v<f;v+=2)d[s[v]]++;var x=h.next_code;for(o=0,d[0]=0,a=1;a<=i;a++)o=o+d[a-1]<<1,x[a]=o;for(u=0;u<f;u+=2)(c=s[u+1])!=0&&(s[u]=x[c],x[c]++)},r.F.codes2map=function(s,i,o){for(var a=s.length,u=r.F.U.rev15,c=0;c<a;c+=2)if(s[c+1]!=0)for(var h=c>>1,f=s[c+1],d=h<<4|f,v=i-f,x=s[c]<<v,k=x+(1<<v);x!=k;)o[u[x]>>>15-i]=d,x++},r.F.revCodes=function(s,i){for(var o=r.F.U.rev15,a=15-i,u=0;u<s.length;u+=2){var c=s[u]<<i-s[u+1];s[u]=o[c]>>>a}},r.F._putsE=function(s,i,o){o<<=7&i;var a=i>>>3;s[a]|=o,s[a+1]|=o>>>8},r.F._putsF=function(s,i,o){o<<=7&i;var a=i>>>3;s[a]|=o,s[a+1]|=o>>>8,s[a+2]|=o>>>16},r.F._bitsE=function(s,i,o){return(s[i>>>3]|s[1+(i>>>3)]<<8)>>>(7&i)&(1<<o)-1},r.F._bitsF=function(s,i,o){return(s[i>>>3]|s[1+(i>>>3)]<<8|s[2+(i>>>3)]<<16)>>>(7&i)&(1<<o)-1},r.F._get17=function(s,i){return(s[i>>>3]|s[1+(i>>>3)]<<8|s[2+(i>>>3)]<<16)>>>(7&i)},r.F._get25=function(s,i){return(s[i>>>3]|s[1+(i>>>3)]<<8|s[2+(i>>>3)]<<16|s[3+(i>>>3)]<<24)>>>(7&i)},r.F.U=(e=Uint16Array,n=Uint32Array,{next_code:new e(16),bl_count:new e(16),ordr:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],of0:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],exb:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],ldef:new e(32),df0:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],dxb:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],ddef:new n(32),flmap:new e(512),fltree:[],fdmap:new e(32),fdtree:[],lmap:new e(32768),ltree:[],ttree:[],dmap:new e(32768),dtree:[],imap:new e(512),itree:[],rev15:new e(32768),lhst:new n(286),dhst:new n(30),ihst:new n(19),lits:new n(15e3),strt:new e(65536),prev:new e(32768)}),function(){for(var s=r.F.U,i=0;i<32768;i++){var o=i;o=(4278255360&(o=(4042322160&(o=(3435973836&(o=(2863311530&o)>>>1|(1431655765&o)<<1))>>>2|(858993459&o)<<2))>>>4|(252645135&o)<<4))>>>8|(16711935&o)<<8,s.rev15[i]=(o>>>16|o<<16)>>>17}function a(u,c,h){for(;c--!=0;)u.push(0,h)}for(i=0;i<32;i++)s.ldef[i]=s.of0[i]<<3|s.exb[i],s.ddef[i]=s.df0[i]<<4|s.dxb[i];a(s.fltree,144,8),a(s.fltree,112,9),a(s.fltree,24,7),a(s.fltree,8,8),r.F.makeCodes(s.fltree,9),r.F.codes2map(s.fltree,9,s.flmap),r.F.revCodes(s.fltree,9),a(s.fdtree,32,5),r.F.makeCodes(s.fdtree,5),r.F.codes2map(s.fdtree,5,s.fdmap),r.F.revCodes(s.fdtree,5),a(s.itree,19,0),a(s.ltree,286,0),a(s.dtree,30,0),a(s.ttree,320,0)}()})();var CN=AN({__proto__:null,default:Pu},[Pu]);const Tn=function(){var t={nextZero(h,f){for(;h[f]!=0;)f++;return f},readUshort:(h,f)=>h[f]<<8|h[f+1],writeUshort(h,f,d){h[f]=d>>8&255,h[f+1]=255&d},readUint:(h,f)=>16777216*h[f]+(h[f+1]<<16|h[f+2]<<8|h[f+3]),writeUint(h,f,d){h[f]=d>>24&255,h[f+1]=d>>16&255,h[f+2]=d>>8&255,h[f+3]=255&d},readASCII(h,f,d){let v="";for(let x=0;x<d;x++)v+=String.fromCharCode(h[f+x]);return v},writeASCII(h,f,d){for(let v=0;v<d.length;v++)h[f+v]=d.charCodeAt(v)},readBytes(h,f,d){const v=[];for(let x=0;x<d;x++)v.push(h[f+x]);return v},pad:h=>h.length<2?`0${h}`:h,readUTF8(h,f,d){let v,x="";for(let k=0;k<d;k++)x+=`%${t.pad(h[f+k].toString(16))}`;try{v=decodeURIComponent(x)}catch{return t.readASCII(h,f,d)}return v}};function e(h,f,d,v){const x=f*d,k=i(v),P=Math.ceil(f*k/8),E=new Uint8Array(4*x),I=new Uint32Array(E.buffer),{ctype:C}=v,{depth:b}=v,j=t.readUshort;if(C==6){const V=x<<2;if(b==8)for(var D=0;D<V;D+=4)E[D]=h[D],E[D+1]=h[D+1],E[D+2]=h[D+2],E[D+3]=h[D+3];if(b==16)for(D=0;D<V;D++)E[D]=h[D<<1]}else if(C==2){const V=v.tabs.tRNS;if(V==null){if(b==8)for(D=0;D<x;D++){var S=3*D;I[D]=255<<24|h[S+2]<<16|h[S+1]<<8|h[S]}if(b==16)for(D=0;D<x;D++)S=6*D,I[D]=255<<24|h[S+4]<<16|h[S+2]<<8|h[S]}else{var y=V[0];const H=V[1],J=V[2];if(b==8)for(D=0;D<x;D++){var p=D<<2;S=3*D,I[D]=255<<24|h[S+2]<<16|h[S+1]<<8|h[S],h[S]==y&&h[S+1]==H&&h[S+2]==J&&(E[p+3]=0)}if(b==16)for(D=0;D<x;D++)p=D<<2,S=6*D,I[D]=255<<24|h[S+4]<<16|h[S+2]<<8|h[S],j(h,S)==y&&j(h,S+2)==H&&j(h,S+4)==J&&(E[p+3]=0)}}else if(C==3){const V=v.tabs.PLTE,H=v.tabs.tRNS,J=H?H.length:0;if(b==1)for(var w=0;w<d;w++){var A=w*P,R=w*f;for(D=0;D<f;D++){p=R+D<<2;var T=3*(M=h[A+(D>>3)]>>7-((7&D)<<0)&1);E[p]=V[T],E[p+1]=V[T+1],E[p+2]=V[T+2],E[p+3]=M<J?H[M]:255}}if(b==2)for(w=0;w<d;w++)for(A=w*P,R=w*f,D=0;D<f;D++)p=R+D<<2,T=3*(M=h[A+(D>>2)]>>6-((3&D)<<1)&3),E[p]=V[T],E[p+1]=V[T+1],E[p+2]=V[T+2],E[p+3]=M<J?H[M]:255;if(b==4)for(w=0;w<d;w++)for(A=w*P,R=w*f,D=0;D<f;D++)p=R+D<<2,T=3*(M=h[A+(D>>1)]>>4-((1&D)<<2)&15),E[p]=V[T],E[p+1]=V[T+1],E[p+2]=V[T+2],E[p+3]=M<J?H[M]:255;if(b==8)for(D=0;D<x;D++){var M;p=D<<2,T=3*(M=h[D]),E[p]=V[T],E[p+1]=V[T+1],E[p+2]=V[T+2],E[p+3]=M<J?H[M]:255}}else if(C==4){if(b==8)for(D=0;D<x;D++){p=D<<2;var z=h[O=D<<1];E[p]=z,E[p+1]=z,E[p+2]=z,E[p+3]=h[O+1]}if(b==16)for(D=0;D<x;D++){var O;p=D<<2,z=h[O=D<<2],E[p]=z,E[p+1]=z,E[p+2]=z,E[p+3]=h[O+2]}}else if(C==0)for(y=v.tabs.tRNS?v.tabs.tRNS:-1,w=0;w<d;w++){const V=w*P,H=w*f;if(b==1)for(var L=0;L<f;L++){var U=(z=255*(h[V+(L>>>3)]>>>7-(7&L)&1))==255*y?0:255;I[H+L]=U<<24|z<<16|z<<8|z}else if(b==2)for(L=0;L<f;L++)U=(z=85*(h[V+(L>>>2)]>>>6-((3&L)<<1)&3))==85*y?0:255,I[H+L]=U<<24|z<<16|z<<8|z;else if(b==4)for(L=0;L<f;L++)U=(z=17*(h[V+(L>>>1)]>>>4-((1&L)<<2)&15))==17*y?0:255,I[H+L]=U<<24|z<<16|z<<8|z;else if(b==8)for(L=0;L<f;L++)U=(z=h[V+L])==y?0:255,I[H+L]=U<<24|z<<16|z<<8|z;else if(b==16)for(L=0;L<f;L++)z=h[V+(L<<1)],U=j(h,V+(L<<1))==y?0:255,I[H+L]=U<<24|z<<16|z<<8|z}return E}function n(h,f,d,v){const x=i(h),k=Math.ceil(d*x/8),P=new Uint8Array((k+1+h.interlace)*v);return f=h.tabs.CgBI?s(f,P):r(f,P),h.interlace==0?f=o(f,h,0,d,v):h.interlace==1&&(f=function(I,C){const b=C.width,j=C.height,D=i(C),S=D>>3,y=Math.ceil(b*D/8),p=new Uint8Array(j*y);let w=0;const A=[0,0,4,0,2,0,1],R=[0,4,0,2,0,1,0],T=[8,8,8,4,4,2,2],M=[8,8,4,4,2,2,1];let z=0;for(;z<7;){const L=T[z],U=M[z];let V=0,H=0,J=A[z];for(;J<j;)J+=L,H++;let K=R[z];for(;K<b;)K+=U,V++;const Y=Math.ceil(V*D/8);o(I,C,w,V,H);let F=0,B=A[z];for(;B<j;){let ee=R[z],ae=w+F*Y<<3;for(;ee<b;){var O;if(D==1&&(O=(O=I[ae>>3])>>7-(7&ae)&1,p[B*y+(ee>>3)]|=O<<7-((7&ee)<<0)),D==2&&(O=(O=I[ae>>3])>>6-(7&ae)&3,p[B*y+(ee>>2)]|=O<<6-((3&ee)<<1)),D==4&&(O=(O=I[ae>>3])>>4-(7&ae)&15,p[B*y+(ee>>1)]|=O<<4-((1&ee)<<2)),D>=8){const ie=B*y+ee*S;for(let oe=0;oe<S;oe++)p[ie+oe]=I[(ae>>3)+oe]}ae+=D,ee+=U}F++,B+=L}V*H!=0&&(w+=H*(1+Y)),z+=1}return p}(f,h)),f}function r(h,f){return s(new Uint8Array(h.buffer,2,h.length-6),f)}var s=function(){const h={H:{}};return h.H.N=function(f,d){const v=Uint8Array;let x,k,P=0,E=0,I=0,C=0,b=0,j=0,D=0,S=0,y=0;if(f[0]==3&&f[1]==0)return d||new v(0);const p=h.H,w=p.b,A=p.e,R=p.R,T=p.n,M=p.A,z=p.Z,O=p.m,L=d==null;for(L&&(d=new v(f.length>>>2<<5));P==0;)if(P=w(f,y,1),E=w(f,y+1,2),y+=3,E!=0){if(L&&(d=h.H.W(d,S+(1<<17))),E==1&&(x=O.J,k=O.h,j=511,D=31),E==2){I=A(f,y,5)+257,C=A(f,y+5,5)+1,b=A(f,y+10,4)+4,y+=14;let V=1;for(var U=0;U<38;U+=2)O.Q[U]=0,O.Q[U+1]=0;for(U=0;U<b;U++){const K=A(f,y+3*U,3);O.Q[1+(O.X[U]<<1)]=K,K>V&&(V=K)}y+=3*b,T(O.Q,V),M(O.Q,V,O.u),x=O.w,k=O.d,y=R(O.u,(1<<V)-1,I+C,f,y,O.v);const H=p.V(O.v,0,I,O.C);j=(1<<H)-1;const J=p.V(O.v,I,C,O.D);D=(1<<J)-1,T(O.C,H),M(O.C,H,x),T(O.D,J),M(O.D,J,k)}for(;;){const V=x[z(f,y)&j];y+=15&V;const H=V>>>4;if(!(H>>>8))d[S++]=H;else{if(H==256)break;{let J=S+H-254;if(H>264){const ee=O.q[H-257];J=S+(ee>>>3)+A(f,y,7&ee),y+=7&ee}const K=k[z(f,y)&D];y+=15&K;const Y=K>>>4,F=O.c[Y],B=(F>>>4)+w(f,y,15&F);for(y+=15&F;S<J;)d[S]=d[S++-B],d[S]=d[S++-B],d[S]=d[S++-B],d[S]=d[S++-B];S=J}}}}else{7&y&&(y+=8-(7&y));const V=4+(y>>>3),H=f[V-4]|f[V-3]<<8;L&&(d=h.H.W(d,S+H)),d.set(new v(f.buffer,f.byteOffset+V,H),S),y=V+H<<3,S+=H}return d.length==S?d:d.slice(0,S)},h.H.W=function(f,d){const v=f.length;if(d<=v)return f;const x=new Uint8Array(v<<1);return x.set(f,0),x},h.H.R=function(f,d,v,x,k,P){const E=h.H.e,I=h.H.Z;let C=0;for(;C<v;){const b=f[I(x,k)&d];k+=15&b;const j=b>>>4;if(j<=15)P[C]=j,C++;else{let D=0,S=0;j==16?(S=3+E(x,k,2),k+=2,D=P[C-1]):j==17?(S=3+E(x,k,3),k+=3):j==18&&(S=11+E(x,k,7),k+=7);const y=C+S;for(;C<y;)P[C]=D,C++}}return k},h.H.V=function(f,d,v,x){let k=0,P=0;const E=x.length>>>1;for(;P<v;){const I=f[P+d];x[P<<1]=0,x[1+(P<<1)]=I,I>k&&(k=I),P++}for(;P<E;)x[P<<1]=0,x[1+(P<<1)]=0,P++;return k},h.H.n=function(f,d){const v=h.H.m,x=f.length;let k,P,E,I;const C=v.j;for(var b=0;b<=d;b++)C[b]=0;for(b=1;b<x;b+=2)C[f[b]]++;const j=v.K;for(k=0,C[0]=0,P=1;P<=d;P++)k=k+C[P-1]<<1,j[P]=k;for(E=0;E<x;E+=2)I=f[E+1],I!=0&&(f[E]=j[I],j[I]++)},h.H.A=function(f,d,v){const x=f.length,k=h.H.m.r;for(let P=0;P<x;P+=2)if(f[P+1]!=0){const E=P>>1,I=f[P+1],C=E<<4|I,b=d-I;let j=f[P]<<b;const D=j+(1<<b);for(;j!=D;)v[k[j]>>>15-d]=C,j++}},h.H.l=function(f,d){const v=h.H.m.r,x=15-d;for(let k=0;k<f.length;k+=2){const P=f[k]<<d-f[k+1];f[k]=v[P]>>>x}},h.H.M=function(f,d,v){v<<=7&d;const x=d>>>3;f[x]|=v,f[x+1]|=v>>>8},h.H.I=function(f,d,v){v<<=7&d;const x=d>>>3;f[x]|=v,f[x+1]|=v>>>8,f[x+2]|=v>>>16},h.H.e=function(f,d,v){return(f[d>>>3]|f[1+(d>>>3)]<<8)>>>(7&d)&(1<<v)-1},h.H.b=function(f,d,v){return(f[d>>>3]|f[1+(d>>>3)]<<8|f[2+(d>>>3)]<<16)>>>(7&d)&(1<<v)-1},h.H.Z=function(f,d){return(f[d>>>3]|f[1+(d>>>3)]<<8|f[2+(d>>>3)]<<16)>>>(7&d)},h.H.i=function(f,d){return(f[d>>>3]|f[1+(d>>>3)]<<8|f[2+(d>>>3)]<<16|f[3+(d>>>3)]<<24)>>>(7&d)},h.H.m=function(){const f=Uint16Array,d=Uint32Array;return{K:new f(16),j:new f(16),X:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],S:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],T:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],q:new f(32),p:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],z:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],c:new d(32),J:new f(512),_:[],h:new f(32),$:[],w:new f(32768),C:[],v:[],d:new f(32768),D:[],u:new f(512),Q:[],r:new f(32768),s:new d(286),Y:new d(30),a:new d(19),t:new d(15e3),k:new f(65536),g:new f(32768)}}(),function(){const f=h.H.m;for(var d=0;d<32768;d++){let x=d;x=(2863311530&x)>>>1|(1431655765&x)<<1,x=(3435973836&x)>>>2|(858993459&x)<<2,x=(4042322160&x)>>>4|(252645135&x)<<4,x=(4278255360&x)>>>8|(16711935&x)<<8,f.r[d]=(x>>>16|x<<16)>>>17}function v(x,k,P){for(;k--!=0;)x.push(0,P)}for(d=0;d<32;d++)f.q[d]=f.S[d]<<3|f.T[d],f.c[d]=f.p[d]<<4|f.z[d];v(f._,144,8),v(f._,112,9),v(f._,24,7),v(f._,8,8),h.H.n(f._,9),h.H.A(f._,9,f.J),h.H.l(f._,9),v(f.$,32,5),h.H.n(f.$,5),h.H.A(f.$,5,f.h),h.H.l(f.$,5),v(f.Q,19,0),v(f.C,286,0),v(f.D,30,0),v(f.v,320,0)}(),h.H.N}();function i(h){return[1,null,3,1,2,null,4][h.ctype]*h.depth}function o(h,f,d,v,x){let k=i(f);const P=Math.ceil(v*k/8);let E,I;k=Math.ceil(k/8);let C=h[d],b=0;if(C>1&&(h[d]=[0,0,1][C-2]),C==3)for(b=k;b<P;b++)h[b+1]=h[b+1]+(h[b+1-k]>>>1)&255;for(let j=0;j<x;j++)if(E=d+j*P,I=E+j+1,C=h[I-1],b=0,C==0)for(;b<P;b++)h[E+b]=h[I+b];else if(C==1){for(;b<k;b++)h[E+b]=h[I+b];for(;b<P;b++)h[E+b]=h[I+b]+h[E+b-k]}else if(C==2)for(;b<P;b++)h[E+b]=h[I+b]+h[E+b-P];else if(C==3){for(;b<k;b++)h[E+b]=h[I+b]+(h[E+b-P]>>>1);for(;b<P;b++)h[E+b]=h[I+b]+(h[E+b-P]+h[E+b-k]>>>1)}else{for(;b<k;b++)h[E+b]=h[I+b]+a(0,h[E+b-P],0);for(;b<P;b++)h[E+b]=h[I+b]+a(h[E+b-k],h[E+b-P],h[E+b-k-P])}return h}function a(h,f,d){const v=h+f-d,x=v-h,k=v-f,P=v-d;return x*x<=k*k&&x*x<=P*P?h:k*k<=P*P?f:d}function u(h,f,d){d.width=t.readUint(h,f),f+=4,d.height=t.readUint(h,f),f+=4,d.depth=h[f],f++,d.ctype=h[f],f++,d.compress=h[f],f++,d.filter=h[f],f++,d.interlace=h[f],f++}function c(h,f,d,v,x,k,P,E,I){const C=Math.min(f,x),b=Math.min(d,k);let j=0,D=0;for(let z=0;z<b;z++)for(let O=0;O<C;O++)if(P>=0&&E>=0?(j=z*f+O<<2,D=(E+z)*x+P+O<<2):(j=(-E+z)*f-P+O<<2,D=z*x+O<<2),I==0)v[D]=h[j],v[D+1]=h[j+1],v[D+2]=h[j+2],v[D+3]=h[j+3];else if(I==1){var S=h[j+3]*.00392156862745098,y=h[j]*S,p=h[j+1]*S,w=h[j+2]*S,A=v[D+3]*(1/255),R=v[D]*A,T=v[D+1]*A,M=v[D+2]*A;const L=1-S,U=S+A*L,V=U==0?0:1/U;v[D+3]=255*U,v[D+0]=(y+R*L)*V,v[D+1]=(p+T*L)*V,v[D+2]=(w+M*L)*V}else if(I==2)S=h[j+3],y=h[j],p=h[j+1],w=h[j+2],A=v[D+3],R=v[D],T=v[D+1],M=v[D+2],S==A&&y==R&&p==T&&w==M?(v[D]=0,v[D+1]=0,v[D+2]=0,v[D+3]=0):(v[D]=y,v[D+1]=p,v[D+2]=w,v[D+3]=S);else if(I==3){if(S=h[j+3],y=h[j],p=h[j+1],w=h[j+2],A=v[D+3],R=v[D],T=v[D+1],M=v[D+2],S==A&&y==R&&p==T&&w==M)continue;if(S<220&&A>20)return!1}return!0}return{decode:function(f){const d=new Uint8Array(f);let v=8;const x=t,k=x.readUshort,P=x.readUint,E={tabs:{},frames:[]},I=new Uint8Array(d.length);let C,b=0,j=0;const D=[137,80,78,71,13,10,26,10];for(var S=0;S<8;S++)if(d[S]!=D[S])throw"The input is not a PNG file!";for(;v<d.length;){const z=x.readUint(d,v);v+=4;const O=x.readASCII(d,v,4);if(v+=4,O=="IHDR")u(d,v,E);else if(O=="iCCP"){for(var y=v;d[y]!=0;)y++;x.readASCII(d,v,y-v),d[y+1];const L=d.slice(y+2,v+z);let U=null;try{U=r(L)}catch{U=s(L)}E.tabs[O]=U}else if(O=="CgBI")E.tabs[O]=d.slice(v,v+4);else if(O=="IDAT"){for(S=0;S<z;S++)I[b+S]=d[v+S];b+=z}else if(O=="acTL")E.tabs[O]={num_frames:P(d,v),num_plays:P(d,v+4)},C=new Uint8Array(d.length);else if(O=="fcTL"){j!=0&&((M=E.frames[E.frames.length-1]).data=n(E,C.slice(0,j),M.rect.width,M.rect.height),j=0);const L={x:P(d,v+12),y:P(d,v+16),width:P(d,v+4),height:P(d,v+8)};let U=k(d,v+22);U=k(d,v+20)/(U==0?100:U);const V={rect:L,delay:Math.round(1e3*U),dispose:d[v+24],blend:d[v+25]};E.frames.push(V)}else if(O=="fdAT"){for(S=0;S<z-4;S++)C[j+S]=d[v+S+4];j+=z-4}else if(O=="pHYs")E.tabs[O]=[x.readUint(d,v),x.readUint(d,v+4),d[v+8]];else if(O=="cHRM")for(E.tabs[O]=[],S=0;S<8;S++)E.tabs[O].push(x.readUint(d,v+4*S));else if(O=="tEXt"||O=="zTXt"){E.tabs[O]==null&&(E.tabs[O]={});var p=x.nextZero(d,v),w=x.readASCII(d,v,p-v),A=v+z-p-1;if(O=="tEXt")T=x.readASCII(d,p+1,A);else{var R=r(d.slice(p+2,p+2+A));T=x.readUTF8(R,0,R.length)}E.tabs[O][w]=T}else if(O=="iTXt"){E.tabs[O]==null&&(E.tabs[O]={}),p=0,y=v,p=x.nextZero(d,y),w=x.readASCII(d,y,p-y);const L=d[y=p+1];var T;d[y+1],y+=2,p=x.nextZero(d,y),x.readASCII(d,y,p-y),y=p+1,p=x.nextZero(d,y),x.readUTF8(d,y,p-y),A=z-((y=p+1)-v),L==0?T=x.readUTF8(d,y,A):(R=r(d.slice(y,y+A)),T=x.readUTF8(R,0,R.length)),E.tabs[O][w]=T}else if(O=="PLTE")E.tabs[O]=x.readBytes(d,v,z);else if(O=="hIST"){const L=E.tabs.PLTE.length/3;for(E.tabs[O]=[],S=0;S<L;S++)E.tabs[O].push(k(d,v+2*S))}else if(O=="tRNS")E.ctype==3?E.tabs[O]=x.readBytes(d,v,z):E.ctype==0?E.tabs[O]=k(d,v):E.ctype==2&&(E.tabs[O]=[k(d,v),k(d,v+2),k(d,v+4)]);else if(O=="gAMA")E.tabs[O]=x.readUint(d,v)/1e5;else if(O=="sRGB")E.tabs[O]=d[v];else if(O=="bKGD")E.ctype==0||E.ctype==4?E.tabs[O]=[k(d,v)]:E.ctype==2||E.ctype==6?E.tabs[O]=[k(d,v),k(d,v+2),k(d,v+4)]:E.ctype==3&&(E.tabs[O]=d[v]);else if(O=="IEND")break;v+=z,x.readUint(d,v),v+=4}var M;return j!=0&&((M=E.frames[E.frames.length-1]).data=n(E,C.slice(0,j),M.rect.width,M.rect.height)),E.data=n(E,I,E.width,E.height),delete E.compress,delete E.interlace,delete E.filter,E},toRGBA8:function(f){const d=f.width,v=f.height;if(f.tabs.acTL==null)return[e(f.data,d,v,f).buffer];const x=[];f.frames[0].data==null&&(f.frames[0].data=f.data);const k=d*v*4,P=new Uint8Array(k),E=new Uint8Array(k),I=new Uint8Array(k);for(let b=0;b<f.frames.length;b++){const j=f.frames[b],D=j.rect.x,S=j.rect.y,y=j.rect.width,p=j.rect.height,w=e(j.data,y,p,f);if(b!=0)for(var C=0;C<k;C++)I[C]=P[C];if(j.blend==0?c(w,y,p,P,d,v,D,S,0):j.blend==1&&c(w,y,p,P,d,v,D,S,1),x.push(P.buffer.slice(0)),j.dispose!=0){if(j.dispose==1)c(E,y,p,P,d,v,D,S,0);else if(j.dispose==2)for(C=0;C<k;C++)P[C]=I[C]}}return x},_paeth:a,_copyTile:c,_bin:t}}();(function(){const{_copyTile:t}=Tn,{_bin:e}=Tn,n=Tn._paeth;var r={table:function(){const y=new Uint32Array(256);for(let p=0;p<256;p++){let w=p;for(let A=0;A<8;A++)1&w?w=3988292384^w>>>1:w>>>=1;y[p]=w}return y}(),update(y,p,w,A){for(let R=0;R<A;R++)y=r.table[255&(y^p[w+R])]^y>>>8;return y},crc:(y,p,w)=>4294967295^r.update(4294967295,y,p,w)};function s(y,p,w,A){p[w]+=y[0]*A>>4,p[w+1]+=y[1]*A>>4,p[w+2]+=y[2]*A>>4,p[w+3]+=y[3]*A>>4}function i(y){return Math.max(0,Math.min(255,y))}function o(y,p){const w=y[0]-p[0],A=y[1]-p[1],R=y[2]-p[2],T=y[3]-p[3];return w*w+A*A+R*R+T*T}function a(y,p,w,A,R,T,M){M==null&&(M=1);const z=A.length,O=[];for(var L=0;L<z;L++){const B=A[L];O.push([B>>>0&255,B>>>8&255,B>>>16&255,B>>>24&255])}for(L=0;L<z;L++){let B=4294967295;for(var U=0,V=0;V<z;V++){var H=o(O[L],O[V]);V!=L&&H<B&&(B=H,U=V)}}const J=new Uint32Array(R.buffer),K=new Int16Array(p*w*4),Y=[0,8,2,10,12,4,14,6,3,11,1,9,15,7,13,5];for(L=0;L<Y.length;L++)Y[L]=255*((Y[L]+.5)/16-.5);for(let B=0;B<w;B++)for(let ee=0;ee<p;ee++){var F;L=4*(B*p+ee),M!=2?F=[i(y[L]+K[L]),i(y[L+1]+K[L+1]),i(y[L+2]+K[L+2]),i(y[L+3]+K[L+3])]:(H=Y[4*(3&B)+(3&ee)],F=[i(y[L]+H),i(y[L+1]+H),i(y[L+2]+H),i(y[L+3]+H)]),U=0;let ae=16777215;for(V=0;V<z;V++){const de=o(F,O[V]);de<ae&&(ae=de,U=V)}const ie=O[U],oe=[F[0]-ie[0],F[1]-ie[1],F[2]-ie[2],F[3]-ie[3]];M==1&&(ee!=p-1&&s(oe,K,L+4,7),B!=w-1&&(ee!=0&&s(oe,K,L+4*p-4,3),s(oe,K,L+4*p,5),ee!=p-1&&s(oe,K,L+4*p+4,1))),T[L>>2]=U,J[L>>2]=A[U]}}function u(y,p,w,A,R){R==null&&(R={});const{crc:T}=r,M=e.writeUint,z=e.writeUshort,O=e.writeASCII;let L=8;const U=y.frames.length>1;let V,H=!1,J=33+(U?20:0);if(R.sRGB!=null&&(J+=13),R.pHYs!=null&&(J+=21),R.iCCP!=null&&(V=pako.deflate(R.iCCP),J+=21+V.length+4),y.ctype==3){for(var K=y.plte.length,Y=0;Y<K;Y++)y.plte[Y]>>>24!=255&&(H=!0);J+=8+3*K+4+(H?8+1*K+4:0)}for(var F=0;F<y.frames.length;F++)U&&(J+=38),J+=(ie=y.frames[F]).cimg.length+12,F!=0&&(J+=4);J+=12;const B=new Uint8Array(J),ee=[137,80,78,71,13,10,26,10];for(Y=0;Y<8;Y++)B[Y]=ee[Y];if(M(B,L,13),L+=4,O(B,L,"IHDR"),L+=4,M(B,L,p),L+=4,M(B,L,w),L+=4,B[L]=y.depth,L++,B[L]=y.ctype,L++,B[L]=0,L++,B[L]=0,L++,B[L]=0,L++,M(B,L,T(B,L-17,17)),L+=4,R.sRGB!=null&&(M(B,L,1),L+=4,O(B,L,"sRGB"),L+=4,B[L]=R.sRGB,L++,M(B,L,T(B,L-5,5)),L+=4),R.iCCP!=null){const oe=13+V.length;M(B,L,oe),L+=4,O(B,L,"iCCP"),L+=4,O(B,L,"ICC profile"),L+=11,L+=2,B.set(V,L),L+=V.length,M(B,L,T(B,L-(oe+4),oe+4)),L+=4}if(R.pHYs!=null&&(M(B,L,9),L+=4,O(B,L,"pHYs"),L+=4,M(B,L,R.pHYs[0]),L+=4,M(B,L,R.pHYs[1]),L+=4,B[L]=R.pHYs[2],L++,M(B,L,T(B,L-13,13)),L+=4),U&&(M(B,L,8),L+=4,O(B,L,"acTL"),L+=4,M(B,L,y.frames.length),L+=4,M(B,L,R.loop!=null?R.loop:0),L+=4,M(B,L,T(B,L-12,12)),L+=4),y.ctype==3){for(M(B,L,3*(K=y.plte.length)),L+=4,O(B,L,"PLTE"),L+=4,Y=0;Y<K;Y++){const oe=3*Y,de=y.plte[Y],ge=255&de,pe=de>>>8&255,xt=de>>>16&255;B[L+oe+0]=ge,B[L+oe+1]=pe,B[L+oe+2]=xt}if(L+=3*K,M(B,L,T(B,L-3*K-4,3*K+4)),L+=4,H){for(M(B,L,K),L+=4,O(B,L,"tRNS"),L+=4,Y=0;Y<K;Y++)B[L+Y]=y.plte[Y]>>>24&255;L+=K,M(B,L,T(B,L-K-4,K+4)),L+=4}}let ae=0;for(F=0;F<y.frames.length;F++){var ie=y.frames[F];U&&(M(B,L,26),L+=4,O(B,L,"fcTL"),L+=4,M(B,L,ae++),L+=4,M(B,L,ie.rect.width),L+=4,M(B,L,ie.rect.height),L+=4,M(B,L,ie.rect.x),L+=4,M(B,L,ie.rect.y),L+=4,z(B,L,A[F]),L+=2,z(B,L,1e3),L+=2,B[L]=ie.dispose,L++,B[L]=ie.blend,L++,M(B,L,T(B,L-30,30)),L+=4);const oe=ie.cimg;M(B,L,(K=oe.length)+(F==0?0:4)),L+=4;const de=L;O(B,L,F==0?"IDAT":"fdAT"),L+=4,F!=0&&(M(B,L,ae++),L+=4),B.set(oe,L),L+=K,M(B,L,T(B,de,L-de)),L+=4}return M(B,L,0),L+=4,O(B,L,"IEND"),L+=4,M(B,L,T(B,L-4,4)),L+=4,B.buffer}function c(y,p,w){for(let A=0;A<y.frames.length;A++){const R=y.frames[A];R.rect.width;const T=R.rect.height,M=new Uint8Array(T*R.bpl+T);R.cimg=v(R.img,T,R.bpp,R.bpl,M,p,w)}}function h(y,p,w,A,R){const T=R[0],M=R[1],z=R[2],O=R[3],L=R[4],U=R[5];let V=6,H=8,J=255;for(var K=0;K<y.length;K++){const Fe=new Uint8Array(y[K]);for(var Y=Fe.length,F=0;F<Y;F+=4)J&=Fe[F+3]}const B=J!=255,ee=function(Te,Ie,et,it,Be,Ot){const Ve=[];for(var Ae=0;Ae<Te.length;Ae++){const ut=new Uint8Array(Te[Ae]),Xt=new Uint32Array(ut.buffer);var Tt;let ct=0,cn=0,Jt=Ie,wn=et,Ji=it?1:0;if(Ae!=0){const Ec=Ot||it||Ae==1||Ve[Ae-2].dispose!=0?1:2;let fs=0,Zi=1e9;for(let Ir=0;Ir<Ec;Ir++){var Ne=new Uint8Array(Te[Ae-1-Ir]);const ps=new Uint32Array(Te[Ae-1-Ir]);let hn=Ie,dn=et,$t=-1,Ar=-1;for(let Mn=0;Mn<et;Mn++)for(let Zt=0;Zt<Ie;Zt++)Xt[Ye=Mn*Ie+Zt]!=ps[Ye]&&(Zt<hn&&(hn=Zt),Zt>$t&&($t=Zt),Mn<dn&&(dn=Mn),Mn>Ar&&(Ar=Mn));$t==-1&&(hn=dn=$t=Ar=0),Be&&((1&hn)==1&&hn--,(1&dn)==1&&dn--);const ms=($t-hn+1)*(Ar-dn+1);ms<Zi&&(Zi=ms,fs=Ir,ct=hn,cn=dn,Jt=$t-hn+1,wn=Ar-dn+1)}Ne=new Uint8Array(Te[Ae-1-fs]),fs==1&&(Ve[Ae-1].dispose=2),Tt=new Uint8Array(Jt*wn*4),t(Ne,Ie,et,Tt,Jt,wn,-ct,-cn,0),Ji=t(ut,Ie,et,Tt,Jt,wn,-ct,-cn,3)?1:0,Ji==1?d(ut,Ie,et,Tt,{x:ct,y:cn,width:Jt,height:wn}):t(ut,Ie,et,Tt,Jt,wn,-ct,-cn,0)}else Tt=ut.slice(0);Ve.push({rect:{x:ct,y:cn,width:Jt,height:wn},img:Tt,blend:Ji,dispose:0})}if(it)for(Ae=0;Ae<Ve.length;Ae++){if((jn=Ve[Ae]).blend==1)continue;const ut=jn.rect,Xt=Ve[Ae-1].rect,ct=Math.min(ut.x,Xt.x),cn=Math.min(ut.y,Xt.y),Jt={x:ct,y:cn,width:Math.max(ut.x+ut.width,Xt.x+Xt.width)-ct,height:Math.max(ut.y+ut.height,Xt.y+Xt.height)-cn};Ve[Ae-1].dispose=1,Ae-1!=0&&f(Te,Ie,et,Ve,Ae-1,Jt,Be),f(Te,Ie,et,Ve,Ae,Jt,Be)}let tt=0;if(Te.length!=1)for(var Ye=0;Ye<Ve.length;Ye++){var jn;tt+=(jn=Ve[Ye]).rect.width*jn.rect.height}return Ve}(y,p,w,T,M,z),ae={},ie=[],oe=[];if(A!=0){const Fe=[];for(F=0;F<ee.length;F++)Fe.push(ee[F].img.buffer);const Te=function(Be){let Ot=0;for(var Ve=0;Ve<Be.length;Ve++)Ot+=Be[Ve].byteLength;const Ae=new Uint8Array(Ot);let Tt=0;for(Ve=0;Ve<Be.length;Ve++){const Ne=new Uint8Array(Be[Ve]),tt=Ne.length;for(let Ye=0;Ye<tt;Ye+=4){let jn=Ne[Ye],ut=Ne[Ye+1],Xt=Ne[Ye+2];const ct=Ne[Ye+3];ct==0&&(jn=ut=Xt=0),Ae[Tt+Ye]=jn,Ae[Tt+Ye+1]=ut,Ae[Tt+Ye+2]=Xt,Ae[Tt+Ye+3]=ct}Tt+=tt}return Ae.buffer}(Fe),Ie=k(Te,A);for(F=0;F<Ie.plte.length;F++)ie.push(Ie.plte[F].est.rgba);let et=0;for(F=0;F<ee.length;F++){const it=(ge=ee[F]).img.length;var de=new Uint8Array(Ie.inds.buffer,et>>2,it>>2);oe.push(de);const Be=new Uint8Array(Ie.abuf,et,it);U&&a(ge.img,ge.rect.width,ge.rect.height,ie,Be,de),ge.img.set(Be),et+=it}}else for(K=0;K<ee.length;K++){var ge=ee[K];const Fe=new Uint32Array(ge.img.buffer);var pe=ge.rect.width;for(Y=Fe.length,de=new Uint8Array(Y),oe.push(de),F=0;F<Y;F++){const Te=Fe[F];if(F!=0&&Te==Fe[F-1])de[F]=de[F-1];else if(F>pe&&Te==Fe[F-pe])de[F]=de[F-pe];else{let Ie=ae[Te];if(Ie==null&&(ae[Te]=Ie=ie.length,ie.push(Te),ie.length>=300))break;de[F]=Ie}}}const xt=ie.length;for(xt<=256&&L==0&&(H=xt<=2?1:xt<=4?2:xt<=16?4:8,H=Math.max(H,O)),K=0;K<ee.length;K++){(ge=ee[K]).rect.x,ge.rect.y,pe=ge.rect.width;const Fe=ge.rect.height;let Te=ge.img;new Uint32Array(Te.buffer);let Ie=4*pe,et=4;if(xt<=256&&L==0){Ie=Math.ceil(H*pe/8);var Ze=new Uint8Array(Ie*Fe);const it=oe[K];for(let Be=0;Be<Fe;Be++){F=Be*Ie;const Ot=Be*pe;if(H==8)for(var xe=0;xe<pe;xe++)Ze[F+xe]=it[Ot+xe];else if(H==4)for(xe=0;xe<pe;xe++)Ze[F+(xe>>1)]|=it[Ot+xe]<<4-4*(1&xe);else if(H==2)for(xe=0;xe<pe;xe++)Ze[F+(xe>>2)]|=it[Ot+xe]<<6-2*(3&xe);else if(H==1)for(xe=0;xe<pe;xe++)Ze[F+(xe>>3)]|=it[Ot+xe]<<7-1*(7&xe)}Te=Ze,V=3,et=1}else if(B==0&&ee.length==1){Ze=new Uint8Array(pe*Fe*3);const it=pe*Fe;for(F=0;F<it;F++){const Be=3*F,Ot=4*F;Ze[Be]=Te[Ot],Ze[Be+1]=Te[Ot+1],Ze[Be+2]=Te[Ot+2]}Te=Ze,V=2,et=3,Ie=3*pe}ge.img=Te,ge.bpl=Ie,ge.bpp=et}return{ctype:V,depth:H,plte:ie,frames:ee}}function f(y,p,w,A,R,T,M){const z=Uint8Array,O=Uint32Array,L=new z(y[R-1]),U=new O(y[R-1]),V=R+1<y.length?new z(y[R+1]):null,H=new z(y[R]),J=new O(H.buffer);let K=p,Y=w,F=-1,B=-1;for(let ae=0;ae<T.height;ae++)for(let ie=0;ie<T.width;ie++){const oe=T.x+ie,de=T.y+ae,ge=de*p+oe,pe=J[ge];pe==0||A[R-1].dispose==0&&U[ge]==pe&&(V==null||V[4*ge+3]!=0)||(oe<K&&(K=oe),oe>F&&(F=oe),de<Y&&(Y=de),de>B&&(B=de))}F==-1&&(K=Y=F=B=0),M&&((1&K)==1&&K--,(1&Y)==1&&Y--),T={x:K,y:Y,width:F-K+1,height:B-Y+1};const ee=A[R];ee.rect=T,ee.blend=1,ee.img=new Uint8Array(T.width*T.height*4),A[R-1].dispose==0?(t(L,p,w,ee.img,T.width,T.height,-T.x,-T.y,0),d(H,p,w,ee.img,T)):t(H,p,w,ee.img,T.width,T.height,-T.x,-T.y,0)}function d(y,p,w,A,R){t(y,p,w,A,R.width,R.height,-R.x,-R.y,2)}function v(y,p,w,A,R,T,M){const z=[];let O,L=[0,1,2,3,4];T!=-1?L=[T]:(p*A>5e5||w==1)&&(L=[0]),M&&(O={level:0});const U=CN;for(var V=0;V<L.length;V++){for(let K=0;K<p;K++)x(R,y,K,A,w,L[V]);z.push(U.deflate(R,O))}let H,J=1e9;for(V=0;V<z.length;V++)z[V].length<J&&(H=V,J=z[V].length);return z[H]}function x(y,p,w,A,R,T){const M=w*A;let z=M+w;if(y[z]=T,z++,T==0)if(A<500)for(var O=0;O<A;O++)y[z+O]=p[M+O];else y.set(new Uint8Array(p.buffer,M,A),z);else if(T==1){for(O=0;O<R;O++)y[z+O]=p[M+O];for(O=R;O<A;O++)y[z+O]=p[M+O]-p[M+O-R]+256&255}else if(w==0){for(O=0;O<R;O++)y[z+O]=p[M+O];if(T==2)for(O=R;O<A;O++)y[z+O]=p[M+O];if(T==3)for(O=R;O<A;O++)y[z+O]=p[M+O]-(p[M+O-R]>>1)+256&255;if(T==4)for(O=R;O<A;O++)y[z+O]=p[M+O]-n(p[M+O-R],0,0)+256&255}else{if(T==2)for(O=0;O<A;O++)y[z+O]=p[M+O]+256-p[M+O-A]&255;if(T==3){for(O=0;O<R;O++)y[z+O]=p[M+O]+256-(p[M+O-A]>>1)&255;for(O=R;O<A;O++)y[z+O]=p[M+O]+256-(p[M+O-A]+p[M+O-R]>>1)&255}if(T==4){for(O=0;O<R;O++)y[z+O]=p[M+O]+256-n(0,p[M+O-A],0)&255;for(O=R;O<A;O++)y[z+O]=p[M+O]+256-n(p[M+O-R],p[M+O-A],p[M+O-R-A])&255}}}function k(y,p){const w=new Uint8Array(y),A=w.slice(0),R=new Uint32Array(A.buffer),T=P(A,p),M=T[0],z=T[1],O=w.length,L=new Uint8Array(O>>2);let U;if(w.length<2e7)for(var V=0;V<O;V+=4)U=E(M,H=w[V]*(1/255),J=w[V+1]*(1/255),K=w[V+2]*(1/255),Y=w[V+3]*(1/255)),L[V>>2]=U.ind,R[V>>2]=U.est.rgba;else for(V=0;V<O;V+=4){var H=w[V]*.00392156862745098,J=w[V+1]*(1/255),K=w[V+2]*(1/255),Y=w[V+3]*(1/255);for(U=M;U.left;)U=I(U.est,H,J,K,Y)<=0?U.left:U.right;L[V>>2]=U.ind,R[V>>2]=U.est.rgba}return{abuf:A.buffer,inds:L,plte:z}}function P(y,p,w){w==null&&(w=1e-4);const A=new Uint32Array(y.buffer),R={i0:0,i1:y.length,bst:null,est:null,tdst:0,left:null,right:null};R.bst=j(y,R.i0,R.i1),R.est=D(R.bst);const T=[R];for(;T.length<p;){let z=0,O=0;for(var M=0;M<T.length;M++)T[M].est.L>z&&(z=T[M].est.L,O=M);if(z<w)break;const L=T[O],U=C(y,A,L.i0,L.i1,L.est.e,L.est.eMq255);if(L.i0>=U||L.i1<=U){L.est.L=0;continue}const V={i0:L.i0,i1:U,bst:null,est:null,tdst:0,left:null,right:null};V.bst=j(y,V.i0,V.i1),V.est=D(V.bst);const H={i0:U,i1:L.i1,bst:null,est:null,tdst:0,left:null,right:null};for(H.bst={R:[],m:[],N:L.bst.N-V.bst.N},M=0;M<16;M++)H.bst.R[M]=L.bst.R[M]-V.bst.R[M];for(M=0;M<4;M++)H.bst.m[M]=L.bst.m[M]-V.bst.m[M];H.est=D(H.bst),L.left=V,L.right=H,T[O]=V,T.push(H)}for(T.sort((z,O)=>O.bst.N-z.bst.N),M=0;M<T.length;M++)T[M].ind=M;return[R,T]}function E(y,p,w,A,R){if(y.left==null)return y.tdst=function(V,H,J,K,Y){const F=H-V[0],B=J-V[1],ee=K-V[2],ae=Y-V[3];return F*F+B*B+ee*ee+ae*ae}(y.est.q,p,w,A,R),y;const T=I(y.est,p,w,A,R);let M=y.left,z=y.right;T>0&&(M=y.right,z=y.left);const O=E(M,p,w,A,R);if(O.tdst<=T*T)return O;const L=E(z,p,w,A,R);return L.tdst<O.tdst?L:O}function I(y,p,w,A,R){const{e:T}=y;return T[0]*p+T[1]*w+T[2]*A+T[3]*R-y.eMq}function C(y,p,w,A,R,T){for(A-=4;w<A;){for(;b(y,w,R)<=T;)w+=4;for(;b(y,A,R)>T;)A-=4;if(w>=A)break;const M=p[w>>2];p[w>>2]=p[A>>2],p[A>>2]=M,w+=4,A-=4}for(;b(y,w,R)>T;)w-=4;return w+4}function b(y,p,w){return y[p]*w[0]+y[p+1]*w[1]+y[p+2]*w[2]+y[p+3]*w[3]}function j(y,p,w){const A=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],R=[0,0,0,0],T=w-p>>2;for(let M=p;M<w;M+=4){const z=y[M]*.00392156862745098,O=y[M+1]*(1/255),L=y[M+2]*(1/255),U=y[M+3]*(1/255);R[0]+=z,R[1]+=O,R[2]+=L,R[3]+=U,A[0]+=z*z,A[1]+=z*O,A[2]+=z*L,A[3]+=z*U,A[5]+=O*O,A[6]+=O*L,A[7]+=O*U,A[10]+=L*L,A[11]+=L*U,A[15]+=U*U}return A[4]=A[1],A[8]=A[2],A[9]=A[6],A[12]=A[3],A[13]=A[7],A[14]=A[11],{R:A,m:R,N:T}}function D(y){const{R:p}=y,{m:w}=y,{N:A}=y,R=w[0],T=w[1],M=w[2],z=w[3],O=A==0?0:1/A,L=[p[0]-R*R*O,p[1]-R*T*O,p[2]-R*M*O,p[3]-R*z*O,p[4]-T*R*O,p[5]-T*T*O,p[6]-T*M*O,p[7]-T*z*O,p[8]-M*R*O,p[9]-M*T*O,p[10]-M*M*O,p[11]-M*z*O,p[12]-z*R*O,p[13]-z*T*O,p[14]-z*M*O,p[15]-z*z*O],U=L,V=S;let H=[Math.random(),Math.random(),Math.random(),Math.random()],J=0,K=0;if(A!=0)for(let F=0;F<16&&(H=V.multVec(U,H),K=Math.sqrt(V.dot(H,H)),H=V.sml(1/K,H),!(F!=0&&Math.abs(K-J)<1e-9));F++)J=K;const Y=[R*O,T*O,M*O,z*O];return{Cov:L,q:Y,e:H,L:J,eMq255:V.dot(V.sml(255,Y),H),eMq:V.dot(H,Y),rgba:(Math.round(255*Y[3])<<24|Math.round(255*Y[2])<<16|Math.round(255*Y[1])<<8|Math.round(255*Y[0])<<0)>>>0}}var S={multVec:(y,p)=>[y[0]*p[0]+y[1]*p[1]+y[2]*p[2]+y[3]*p[3],y[4]*p[0]+y[5]*p[1]+y[6]*p[2]+y[7]*p[3],y[8]*p[0]+y[9]*p[1]+y[10]*p[2]+y[11]*p[3],y[12]*p[0]+y[13]*p[1]+y[14]*p[2]+y[15]*p[3]],dot:(y,p)=>y[0]*p[0]+y[1]*p[1]+y[2]*p[2]+y[3]*p[3],sml:(y,p)=>[y*p[0],y*p[1],y*p[2],y*p[3]]};Tn.encode=function(p,w,A,R,T,M,z){R==null&&(R=0),z==null&&(z=!1);const O=h(p,w,A,R,[!1,!1,!1,0,z,!1]);return c(O,-1),u(O,w,A,T,M)},Tn.encodeLL=function(p,w,A,R,T,M,z,O){const L={ctype:0+(R==1?0:2)+(T==0?0:4),depth:M,frames:[]},U=(R+T)*M,V=U*w;for(let H=0;H<p.length;H++)L.frames.push({rect:{x:0,y:0,width:w,height:A},img:new Uint8Array(p[H]),blend:0,dispose:1,bpp:Math.ceil(U/8),bpl:Math.ceil(V/8)});return c(L,0,!0),u(L,w,A,z,O)},Tn.encode.compress=h,Tn.encode.dither=a,Tn.quantize=k,Tn.quantize.getKDtree=P,Tn.quantize.getNearest=E})();const rE={toArrayBuffer(t,e){const n=t.width,r=t.height,s=n<<2,i=t.getContext("2d").getImageData(0,0,n,r),o=new Uint32Array(i.data.buffer),a=(32*n+31)/32<<2,u=a*r,c=122+u,h=new ArrayBuffer(c),f=new DataView(h),d=1<<20;let v,x,k,P,E=d,I=0,C=0,b=0;function j(y){f.setUint16(C,y,!0),C+=2}function D(y){f.setUint32(C,y,!0),C+=4}function S(y){C+=y}j(19778),D(c),S(4),D(122),D(108),D(n),D(-r>>>0),j(1),j(32),D(3),D(u),D(2835),D(2835),S(8),D(16711680),D(65280),D(255),D(4278190080),D(1466527264),function y(){for(;I<r&&E>0;){for(P=122+I*a,v=0;v<s;)E--,x=o[b++],k=x>>>24,f.setUint32(P+v,x<<8|k),v+=4;I++}b<o.length?(E=d,setTimeout(y,rE._dly)):e(h)}()},toBlob(t,e){this.toArrayBuffer(t,n=>{e(new Blob([n],{type:"image/bmp"}))})},_dly:9};var Wt={CHROME:"CHROME",FIREFOX:"FIREFOX",DESKTOP_SAFARI:"DESKTOP_SAFARI",IE:"IE",IOS:"IOS",ETC:"ETC"},RN={[Wt.CHROME]:16384,[Wt.FIREFOX]:11180,[Wt.DESKTOP_SAFARI]:16384,[Wt.IE]:8192,[Wt.IOS]:4096,[Wt.ETC]:8192};const Op=typeof window<"u",sE=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope,Du=Op&&window.cordova&&window.cordova.require&&window.cordova.require("cordova/modulemapper"),bN=(Op||sE)&&(Du&&Du.getOriginalSymbol(window,"File")||typeof File<"u"&&File),iE=(Op||sE)&&(Du&&Du.getOriginalSymbol(window,"FileReader")||typeof FileReader<"u"&&FileReader);function jp(t,e,n=Date.now()){return new Promise(r=>{const s=t.split(","),i=s[0].match(/:(.*?);/)[1],o=globalThis.atob(s[1]);let a=o.length;const u=new Uint8Array(a);for(;a--;)u[a]=o.charCodeAt(a);const c=new Blob([u],{type:i});c.name=e,c.lastModified=n,r(c)})}function oE(t){return new Promise((e,n)=>{const r=new iE;r.onload=()=>e(r.result),r.onerror=s=>n(s),r.readAsDataURL(t)})}function aE(t){return new Promise((e,n)=>{const r=new Image;r.onload=()=>e(r),r.onerror=s=>n(s),r.src=t})}function Ss(){if(Ss.cachedResult!==void 0)return Ss.cachedResult;let t=Wt.ETC;const{userAgent:e}=navigator;return/Chrom(e|ium)/i.test(e)?t=Wt.CHROME:/iP(ad|od|hone)/i.test(e)&&/WebKit/i.test(e)?t=Wt.IOS:/Safari/i.test(e)?t=Wt.DESKTOP_SAFARI:/Firefox/i.test(e)?t=Wt.FIREFOX:(/MSIE/i.test(e)||document.documentMode)&&(t=Wt.IE),Ss.cachedResult=t,Ss.cachedResult}function lE(t,e){const n=Ss(),r=RN[n];let s=t,i=e,o=s*i;const a=s>i?i/s:s/i;for(;o>r*r;){const u=(r+s)/2,c=(r+i)/2;u<c?(i=c,s=c*a):(i=u*a,s=u),o=s*i}return{width:s,height:i}}function wc(t,e){let n,r;try{if(n=new OffscreenCanvas(t,e),r=n.getContext("2d"),r===null)throw new Error("getContext of OffscreenCanvas returns null")}catch{n=document.createElement("canvas"),r=n.getContext("2d")}return n.width=t,n.height=e,[n,r]}function uE(t,e){const{width:n,height:r}=lE(t.width,t.height),[s,i]=wc(n,r);return e&&/jpe?g/.test(e)&&(i.fillStyle="white",i.fillRect(0,0,s.width,s.height)),i.drawImage(t,0,0,s.width,s.height),s}function zl(){return zl.cachedResult!==void 0||(zl.cachedResult=["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&typeof document<"u"&&"ontouchend"in document),zl.cachedResult}function Lu(t,e={}){return new Promise(function(n,r){let s,i;var o=function(){try{return i=uE(s,e.fileType||t.type),n([s,i])}catch(u){return r(u)}},a=function(u){try{var c=function(h){try{throw h}catch(f){return r(f)}};try{let h;return oE(t).then(function(f){try{return h=f,aE(h).then(function(d){try{return s=d,function(){try{return o()}catch(v){return r(v)}}()}catch(v){return c(v)}},c)}catch(d){return c(d)}},c)}catch(h){c(h)}}catch(h){return r(h)}};try{if(zl()||[Wt.DESKTOP_SAFARI,Wt.MOBILE_SAFARI].includes(Ss()))throw new Error("Skip createImageBitmap on IOS and Safari");return createImageBitmap(t).then(function(u){try{return s=u,o()}catch{return a()}},a)}catch{a()}})}function Ou(t,e,n,r,s=1){return new Promise(function(i,o){let a;if(e==="image/png"){let f,d,v;return f=t.getContext("2d"),{data:d}=f.getImageData(0,0,t.width,t.height),v=Tn.encode([d.buffer],t.width,t.height,4096*s),a=new Blob([v],{type:e}),a.name=n,a.lastModified=r,u.call(this)}{let f=function(){return u.call(this)};var c=f;if(e==="image/bmp")return new Promise(d=>rE.toBlob(t,d)).then((function(d){try{return a=d,a.name=n,a.lastModified=r,f.call(this)}catch(v){return o(v)}}).bind(this),o);{let d=function(){return f.call(this)};var h=d;if(typeof OffscreenCanvas=="function"&&t instanceof OffscreenCanvas)return t.convertToBlob({type:e,quality:s}).then((function(v){try{return a=v,a.name=n,a.lastModified=r,d.call(this)}catch(x){return o(x)}}).bind(this),o);{let v;return v=t.toDataURL(e,s),jp(v,n,r).then((function(x){try{return a=x,d.call(this)}catch(k){return o(k)}}).bind(this),o)}}}function u(){return i(a)}})}function Fn(t){t.width=0,t.height=0}function vi(){return new Promise(function(t,e){let n,r,s,i;return vi.cachedResult!==void 0?t(vi.cachedResult):jp("data:image/jpeg;base64,/9j/4QAiRXhpZgAATU0AKgAAAAgAAQESAAMAAAABAAYAAAAAAAD/2wCEAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAf/AABEIAAEAAgMBEQACEQEDEQH/xABKAAEAAAAAAAAAAAAAAAAAAAALEAEAAAAAAAAAAAAAAAAAAAAAAQEAAAAAAAAAAAAAAAAAAAAAEQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIRAxEAPwA/8H//2Q==","test.jpg",Date.now()).then(function(o){try{return n=o,Lu(n).then(function(a){try{return r=a[1],Ou(r,n.type,n.name,n.lastModified).then(function(u){try{return s=u,Fn(r),Lu(s).then(function(c){try{return i=c[0],vi.cachedResult=i.width===1&&i.height===2,t(vi.cachedResult)}catch(h){return e(h)}},e)}catch(c){return e(c)}},e)}catch(u){return e(u)}},e)}catch(a){return e(a)}},e)})}function cE(t){return new Promise((e,n)=>{const r=new iE;r.onload=s=>{const i=new DataView(s.target.result);if(i.getUint16(0,!1)!=65496)return e(-2);const o=i.byteLength;let a=2;for(;a<o;){if(i.getUint16(a+2,!1)<=8)return e(-1);const u=i.getUint16(a,!1);if(a+=2,u==65505){if(i.getUint32(a+=2,!1)!=1165519206)return e(-1);const c=i.getUint16(a+=6,!1)==18761;a+=i.getUint32(a+4,c);const h=i.getUint16(a,c);a+=2;for(let f=0;f<h;f++)if(i.getUint16(a+12*f,c)==274)return e(i.getUint16(a+12*f+8,c))}else{if((65280&u)!=65280)break;a+=i.getUint16(a,!1)}}return e(-1)},r.onerror=s=>n(s),r.readAsArrayBuffer(t)})}function hE(t,e){const{width:n}=t,{height:r}=t,{maxWidthOrHeight:s}=e;let i,o=t;return isFinite(s)&&(n>s||r>s)&&([o,i]=wc(n,r),n>r?(o.width=s,o.height=r/n*s):(o.width=n/r*s,o.height=s),i.drawImage(t,0,0,o.width,o.height),Fn(t)),o}function dE(t,e){const{width:n}=t,{height:r}=t,[s,i]=wc(n,r);switch(e>4&&e<9?(s.width=r,s.height=n):(s.width=n,s.height=r),e){case 2:i.transform(-1,0,0,1,n,0);break;case 3:i.transform(-1,0,0,-1,n,r);break;case 4:i.transform(1,0,0,-1,0,r);break;case 5:i.transform(0,1,1,0,0,0);break;case 6:i.transform(0,1,-1,0,r,0);break;case 7:i.transform(0,-1,-1,0,r,n);break;case 8:i.transform(0,-1,1,0,0,n)}return i.drawImage(t,0,0,n,r),Fn(t),s}function Zy(t,e,n=0){return new Promise(function(r,s){let i,o,a,u,c,h,f,d,v,x,k,P,E,I,C,b,j,D,S,y;function p(A=5){if(e.signal&&e.signal.aborted)throw e.signal.reason;i+=A,e.onProgress(Math.min(i,100))}function w(A){if(e.signal&&e.signal.aborted)throw e.signal.reason;i=Math.min(Math.max(A,i),100),e.onProgress(i)}return i=n,o=e.maxIteration||10,a=1024*e.maxSizeMB*1024,p(),Lu(t,e).then((function(A){try{return[,u]=A,p(),c=hE(u,e),p(),new Promise(function(R,T){var M;if(!(M=e.exifOrientation))return cE(t).then((function(O){try{return M=O,z.call(this)}catch(L){return T(L)}}).bind(this),T);function z(){return R(M)}return z.call(this)}).then((function(R){try{return h=R,p(),vi().then((function(T){try{return f=T?c:dE(c,h),p(),d=e.initialQuality||1,v=e.fileType||t.type,Ou(f,v,t.name,t.lastModified,d).then((function(M){try{{let U=function(){if(o--&&(C>a||C>E)){let H,J;return H=y?.95*S.width:S.width,J=y?.95*S.height:S.height,[j,D]=wc(H,J),D.drawImage(S,0,0,H,J),d*=v==="image/png"?.85:.95,Ou(j,v,t.name,t.lastModified,d).then(function(K){try{return b=K,Fn(S),S=j,C=b.size,w(Math.min(99,Math.floor((I-C)/(I-a)*100))),U}catch(Y){return s(Y)}},s)}return[1]},V=function(){return Fn(S),Fn(j),Fn(c),Fn(f),Fn(u),w(100),r(b)};var O=U,L=V;if(x=M,p(),k=x.size>a,P=x.size>t.size,!k&&!P)return w(100),r(x);var z;return E=t.size,I=x.size,C=I,S=f,y=!e.alwaysKeepResolution&&k,(z=(function(H){for(;H;){if(H.then)return void H.then(z,s);try{if(H.pop){if(H.length)return H.pop()?V.call(this):H;H=U}else H=H.call(this)}catch(J){return s(J)}}}).bind(this))(U)}}catch(U){return s(U)}}).bind(this),s)}catch(M){return s(M)}}).bind(this),s)}catch(T){return s(T)}}).bind(this),s)}catch(R){return s(R)}}).bind(this),s)})}const NN=`
let scriptImported = false
self.addEventListener('message', async (e) => {
  const { file, id, imageCompressionLibUrl, options } = e.data
  options.onProgress = (progress) => self.postMessage({ progress, id })
  try {
    if (!scriptImported) {
      // console.log('[worker] importScripts', imageCompressionLibUrl)
      self.importScripts(imageCompressionLibUrl)
      scriptImported = true
    }
    // console.log('[worker] self', self)
    const compressedFile = await imageCompression(file, options)
    self.postMessage({ file: compressedFile, id })
  } catch (e) {
    // console.error('[worker] error', e)
    self.postMessage({ error: e.message + '\\n' + e.stack, id })
  }
})
`;let _h;function PN(t,e){return new Promise((n,r)=>{_h||(_h=function(o){const a=[];return a.push(o),URL.createObjectURL(new Blob(a))}(NN));const s=new Worker(_h);s.addEventListener("message",function(o){if(e.signal&&e.signal.aborted)s.terminate();else if(o.data.progress===void 0){if(o.data.error)return r(new Error(o.data.error)),void s.terminate();n(o.data.file),s.terminate()}else e.onProgress(o.data.progress)}),s.addEventListener("error",r),e.signal&&e.signal.addEventListener("abort",()=>{r(e.signal.reason),s.terminate()}),s.postMessage({file:t,imageCompressionLibUrl:e.libURL,options:{...e,onProgress:void 0,signal:void 0}})})}function Rt(t,e){return new Promise(function(n,r){let s,i,o,a,u,c;if(s={...e},o=0,{onProgress:a}=s,s.maxSizeMB=s.maxSizeMB||Number.POSITIVE_INFINITY,u=typeof s.useWebWorker!="boolean"||s.useWebWorker,delete s.useWebWorker,s.onProgress=v=>{o=v,typeof a=="function"&&a(o)},!(t instanceof Blob||t instanceof bN))return r(new Error("The file given is not an instance of Blob or File"));if(!/^image/.test(t.type))return r(new Error("The file given is not an image"));if(c=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope,!u||typeof Worker!="function"||c)return Zy(t,s).then((function(v){try{return i=v,d.call(this)}catch(x){return r(x)}}).bind(this),r);var h=(function(){try{return d.call(this)}catch(v){return r(v)}}).bind(this),f=function(v){try{return Zy(t,s).then(function(x){try{return i=x,h()}catch(k){return r(k)}},r)}catch(x){return r(x)}};try{return s.libURL=s.libURL||"https://cdn.jsdelivr.net/npm/browser-image-compression@2.0.2/dist/browser-image-compression.js",PN(t,s).then(function(v){try{return i=v,h()}catch{return f()}},f)}catch{f()}function d(){try{i.name=t.name,i.lastModified=t.lastModified}catch{}try{s.preserveExif&&t.type==="image/jpeg"&&(!s.fileType||s.fileType&&s.fileType===t.type)&&(i=nE(t,i))}catch{}return n(i)}})}Rt.getDataUrlFromFile=oE,Rt.getFilefromDataUrl=jp,Rt.loadImage=aE,Rt.drawImageInCanvas=uE,Rt.drawFileInCanvas=Lu,Rt.canvasToFile=Ou,Rt.getExifOrientation=cE,Rt.handleMaxWidthOrHeight=hE,Rt.followExifOrientation=dE,Rt.cleanupCanvasMemory=Fn,Rt.isAutoOrientationInBrowser=vi,Rt.approximateBelowMaximumCanvasSizeOfBrowser=lE,Rt.copyExifWithoutOrientation=nE,Rt.getBrowserName=Ss,Rt.version="2.0.2";const fE=async t=>{const e={maxSizeMB:.5,maxWidthOrHeight:1920,useWebWorker:!0,fileType:"image/jpeg"};try{return await Rt(t,e)}catch(n){return console.error("  :",n),t}},DN=({user:t,userData:e,runs:n})=>{const[r,s]=X.useState(!1),i=n.filter(h=>h.runType==="race").length,o=n.filter(h=>h.runType==="casual").length,a=n.filter(h=>h.isOverseas).length,u=n.some(h=>h.raceType==="FULL"),c=async h=>{const f=h.target.files[0];if(f){s(!0);try{const d=await fE(f),v=J1(Z1,`profiles/${t.uid}`);await Y1(v,d);const x=await X1(v);await $f(kn.currentUser,{photoURL:x}),Re("  ."),window.location.reload()}catch(d){console.error("  :",d),Re("  .","error")}finally{s(!1)}}};return g.jsx("div",{className:"bg-white rounded-xl shadow-sm p-4 sm:p-6 mb-4 sm:mb-6",children:g.jsxs("div",{className:"flex items-start gap-4 sm:gap-8",children:[g.jsxs("div",{className:"relative flex-shrink-0",children:[g.jsx("div",{className:"w-16 h-16 sm:w-20 sm:h-20 rounded-full overflow-hidden bg-navy-100 border-2 border-navy-200 cursor-pointer hover:opacity-80 transition-opacity",onClick:()=>document.getElementById("profile-photo-upload").click(),children:r?g.jsx("div",{className:"w-full h-full flex items-center justify-center",children:g.jsx("div",{className:"animate-spin rounded-full h-6 w-6 sm:h-8 sm:w-8 border-2 border-navy-700 border-t-transparent"})}):t.photoURL?g.jsx("img",{src:t.photoURL,alt:"Profile",className:"w-full h-full object-cover"}):g.jsx("div",{className:"w-full h-full flex items-center justify-center bg-navy-100",children:g.jsx("span",{className:"text-3xl sm:text-4xl text-navy-400 font-bold",children:"?"})})}),g.jsx("div",{className:"absolute bottom-0 right-0 bg-navy-700 text-white rounded-full p-1 sm:p-1.5 border-2 border-white cursor-pointer hover:bg-navy-800 transition-colors",onClick:()=>document.getElementById("profile-photo-upload").click(),children:g.jsxs("svg",{className:"w-2.5 h-2.5 sm:w-3 sm:h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z"}),g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 13a3 3 0 11-6 0 3 3 0 016 0z"})]})}),g.jsx("input",{id:"profile-photo-upload",type:"file",accept:"image/*",onChange:c,className:"hidden"})]}),g.jsxs("div",{className:"flex-1 min-w-0",children:[g.jsx("h2",{className:"text-lg sm:text-xl font-bold text-navy-900 mb-2 sm:mb-3 truncate",children:(e==null?void 0:e.nickname)||t.displayName}),g.jsxs("p",{className:"text-xs sm:text-sm text-navy-500",children:[" ",i,"   ",o,a>0&&` ( ${a})`]}),u&&g.jsxs("div",{className:"mt-2 inline-flex items-center gap-1 px-2 sm:px-3 py-1 bg-gradient-to-r from-purple-500 to-pink-500 text-white rounded-full text-xs font-bold",children:[g.jsx("svg",{className:"w-3 h-3",fill:"currentColor",viewBox:"0 0 20 20",children:g.jsx("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})}),g.jsx("span",{className:"hidden sm:inline",children:"42.195km Finisher"}),g.jsx("span",{className:"sm:hidden",children:" "})]})]})]})})},Hs=t=>{const e=Math.floor(t/3600),n=Math.floor(t%3600/60),r=t%60;return e>0?`${e}:${String(n).padStart(2,"0")}:${String(r).padStart(2,"0")}`:`${n}:${String(r).padStart(2,"0")}`},LN=(t,e)=>{const n=e/t,r=Math.floor(n/60),s=Math.floor(n%60);return`${r}:${String(s).padStart(2,"0")}`},Xn=t=>{if(!t)return"";const e=new Date(t),n=e.getFullYear(),r=String(e.getMonth()+1).padStart(2,"0"),s=String(e.getDate()).padStart(2,"0");return`${n}.${r}.${s}`},ON=({runs:t})=>{const[e,n]=X.useState(0),s=(()=>{const o={};return t.forEach(a=>{const u=a.raceType;u!=="CUSTOM"&&u&&(!o[u]||a.time<o[u].time)&&(o[u]=a)}),Object.entries(o).map(([a,u])=>({type:a,...u}))})();if(X.useEffect(()=>{if(s.length>1){const o=setInterval(()=>{n(a=>(a+1)%s.length)},3e3);return()=>clearInterval(o)}},[s.length]),s.length===0)return g.jsxs("div",{className:"pr-card mb-6",style:{minHeight:"120px",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",textAlign:"center"},children:[g.jsx("div",{style:{fontSize:"2.25rem",lineHeight:1,marginBottom:"8px"},children:""}),g.jsx("h2",{style:{fontSize:"1.125rem",fontWeight:"bold",marginBottom:"4px"},children:"  "}),g.jsx("p",{style:{fontSize:"0.875rem",opacity:.9},children:"  !"})]});const i=s[e];return g.jsxs("div",{className:"pr-card mb-6",style:{minHeight:"120px",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",textAlign:"center"},children:[g.jsxs("div",{style:{animation:s.length>1?"fadeSlideUp 0.7s ease-in-out":"none"},children:[g.jsx("div",{style:{fontSize:"0.875rem",fontWeight:600,opacity:.9,marginBottom:"4px"},children:i.type}),g.jsx("div",{style:{fontSize:"2.25rem",fontWeight:"bold",lineHeight:1,marginBottom:"8px"},children:Hs(i.time)}),g.jsxs("div",{style:{fontSize:"0.875rem",opacity:.9},children:[Xn(i.date),i.raceName&&` | ${i.raceName}`]})]},e),g.jsx("style",{children:`
        @keyframes fadeSlideUp {
          0% {
            opacity: 0;
            transform: translateY(20px);
          }
          100% {
            opacity: 1;
            transform: translateY(0);
          }
        }
      `})]})},jN=({run:t,onClick:e})=>{const n=()=>t.raceType==="HALF"?"HALF":t.raceType==="FULL"?"FULL":`${t.distance}km`,r=()=>{if(t.isOverseas){const s=[t.country,t.city,t.place].filter(Boolean);if(s.length>0)return s.join(" ")}return t.runType==="race"?t.raceName||"":t.location||""};return g.jsx("div",{className:"bg-white overflow-hidden cursor-pointer hover:opacity-90 transition-opacity",onClick:e,children:t.photos&&t.photos.length>0?g.jsxs("div",{className:"relative w-full aspect-square bg-navy-100",children:[g.jsx("img",{src:t.photos[0],alt:"Run",className:"w-full h-full object-cover",loading:"lazy"}),t.textColor==="light"&&g.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-40"}),t.photos.length>1&&g.jsx("div",{className:"absolute top-3 right-3 z-10",children:g.jsxs("div",{className:"relative w-6 h-6 sm:w-7 sm:h-7",children:[g.jsx("div",{className:"absolute inset-0 border-2 border-white rounded-sm shadow-lg bg-black bg-opacity-30 backdrop-blur-sm"}),g.jsx("div",{className:"absolute inset-0 border-2 border-white rounded-sm shadow-lg bg-black bg-opacity-40 backdrop-blur-sm transform translate-x-0.5 translate-y-0.5"}),g.jsx("div",{className:"absolute inset-0 border-2 border-white rounded-sm shadow-lg bg-black bg-opacity-50 backdrop-blur-sm transform translate-x-1 translate-y-1"})]})}),t.isOverseas?g.jsx("div",{className:"absolute top-3 left-3 text-2xl sm:text-3xl z-10 drop-shadow-lg",children:""}):t.runType==="race"&&g.jsx("div",{className:"absolute top-3 left-3 text-2xl sm:text-3xl z-10 drop-shadow-lg",children:""}),t.isPublic===!1&&g.jsx("div",{className:"absolute bottom-3 left-3 bg-black bg-opacity-60 text-white p-2 rounded-full shadow-lg z-10 backdrop-blur-sm",children:g.jsx("svg",{className:"w-4 h-4 sm:w-5 sm:h-5",fill:"currentColor",viewBox:"0 0 20 20",children:g.jsx("path",{fillRule:"evenodd",d:"M5 9V7a5 5 0 0110 0v2a2 2 0 012 2v5a2 2 0 01-2 2H5a2 2 0 01-2-2v-5a2 2 0 012-2zm8-2v2H7V7a3 3 0 016 0z",clipRule:"evenodd"})})}),g.jsx("div",{className:"absolute inset-0 flex flex-col items-center justify-center p-6 text-center z-10",children:g.jsxs("div",{className:"space-y-3 sm:space-y-4",children:[g.jsx("div",{className:`text-base sm:text-lg font-medium drop-shadow-lg ${t.textColor==="light"?"text-white":"text-navy-900"}`,children:r()}),g.jsx("div",{className:`text-3xl sm:text-5xl font-bold drop-shadow-lg ${t.textColor==="light"?"text-white":"text-navy-900"}`,children:Hs(t.time)}),g.jsx("div",{className:`text-sm sm:text-base font-semibold drop-shadow-lg ${t.textColor==="light"?"text-white":"text-navy-900"}`,children:n()}),g.jsx("div",{className:`text-xs sm:text-sm opacity-90 drop-shadow-lg ${t.textColor==="light"?"text-white":"text-navy-900"}`,children:Xn(t.date)})]})})]}):g.jsxs("div",{className:`relative w-full aspect-square flex flex-col items-center justify-center p-6 text-center ${t.textColor==="light"?"bg-gradient-to-br from-navy-700 to-navy-900":"bg-white"}`,children:[t.isOverseas?g.jsx("div",{className:"absolute top-3 left-3 text-2xl sm:text-3xl",children:""}):t.runType==="race"&&g.jsx("div",{className:"absolute top-3 left-3 text-2xl sm:text-3xl",children:""}),t.isPublic===!1&&g.jsx("div",{className:`absolute bottom-3 left-3 p-2 rounded-full shadow-lg ${t.textColor==="light"?"bg-white bg-opacity-80 text-navy-900":"bg-navy-800 bg-opacity-80 text-white"}`,children:g.jsx("svg",{className:"w-4 h-4 sm:w-5 sm:h-5",fill:"currentColor",viewBox:"0 0 20 20",children:g.jsx("path",{fillRule:"evenodd",d:"M5 9V7a5 5 0 0110 0v2a2 2 0 012 2v5a2 2 0 01-2 2H5a2 2 0 01-2-2v-5a2 2 0 012-2zm8-2v2H7V7a3 3 0 016 0z",clipRule:"evenodd"})})}),g.jsxs("div",{className:"space-y-3 sm:space-y-4",children:[g.jsx("div",{className:`text-base sm:text-lg font-medium ${t.textColor==="light"?"text-white":"text-navy-600"}`,children:r()}),g.jsx("div",{className:`text-3xl sm:text-5xl font-bold ${t.textColor==="light"?"text-white":"text-navy-900"}`,children:Hs(t.time)}),g.jsx("div",{className:`text-sm sm:text-base font-semibold ${t.textColor==="light"?"text-white":"text-navy-700"}`,children:n()}),g.jsx("div",{className:`text-xs sm:text-sm ${t.textColor==="light"?"text-white opacity-90":"text-navy-600"}`,children:Xn(t.date)})]})]})})},MN=({run:t,onClose:e,onDelete:n,onEdit:r})=>{const[s,i]=X.useState(0),[o,a]=X.useState(!1),[u,c]=X.useState(!1),[h,f]=X.useState(null),[d,v]=X.useState(null),x=50;if(!t)return null;X.useEffect(()=>{var p;t&&(console.log("===    ==="),console.log(" :",t),console.log(" :",Object.keys(t)),console.log("runType:",t.runType),console.log("raceName:",t.raceName),console.log("location:",t.location),console.log("memo:",t.memo),console.log("memo :",typeof t.memo),console.log("memo :",(p=t.memo)==null?void 0:p.length),console.log("note:",t.note),console.log("description:",t.description),console.log("date:",t.date),console.log("time:",t.time),console.log("distance:",t.distance),console.log("createdAt:",t.createdAt),console.log("========================"))},[t]);const k=p=>{v(null),f(p.targetTouches[0].clientX)},P=p=>{v(p.targetTouches[0].clientX)},E=()=>{if(!h||!d)return;const p=h-d,w=p>x,A=p<-x;w&&C(),A&&I()},I=()=>{!(t!=null&&t.photos)||t.photos.length===0||i(p=>p===0?t.photos.length-1:p-1)},C=()=>{!(t!=null&&t.photos)||t.photos.length===0||i(p=>p===t.photos.length-1?0:p+1)},b=async()=>{try{await Nu(Er(lt,"runs",t.id)),n(),e()}catch(p){console.error(" :",p),Re("  .","error")}},j=()=>{alert("    .")},D=()=>t?t.raceType==="HALF"?"HALF":t.raceType==="FULL"?"FULL":`${t.distance||0}km`:"",S=()=>t!=null&&t.runType?t.runType:t!=null&&t.raceName?"race":(t!=null&&t.location,"casual"),y=()=>S()==="race"?(t==null?void 0:t.raceName)||(t==null?void 0:t.location)||"":(t==null?void 0:t.location)||(t==null?void 0:t.raceName)||"";return g.jsxs("div",{className:"fixed inset-0 bg-white z-50 overflow-y-auto",children:[g.jsxs("div",{className:"min-h-screen flex flex-col",children:[g.jsx("div",{className:"sticky top-0 bg-white border-b border-navy-100 z-10 shadow-sm",children:g.jsxs("div",{className:"flex items-center justify-between p-3 sm:p-4",children:[g.jsx("button",{onClick:e,className:"text-navy-900 p-1 -ml-1",children:g.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),g.jsx("h2",{className:"text-base sm:text-lg font-bold text-navy-900",children:""}),g.jsxs("div",{className:"relative",children:[g.jsx("button",{onClick:()=>a(!o),className:"text-navy-900 p-1 -mr-1",children:g.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 5v.01M12 12v.01M12 19v.01M12 6a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2z"})})}),o&&g.jsxs("div",{className:"absolute right-0 top-10 bg-white rounded-lg shadow-lg border border-navy-200 py-2 w-32 z-20",children:[g.jsx("button",{onClick:()=>{a(!1),r(t)},className:"w-full px-4 py-2 text-left text-sm text-navy-700 hover:bg-navy-50 transition-colors",children:""}),g.jsx("button",{onClick:()=>{a(!1),c(!0)},className:"w-full px-4 py-2 text-left text-sm text-red-600 hover:bg-red-50 transition-colors",children:""})]})]})]})}),g.jsxs("div",{className:"bg-white max-w-4xl mx-auto pb-8",children:[t.photos&&t.photos.length>0&&g.jsx("div",{className:"w-full",children:g.jsxs("div",{className:"relative w-full",onTouchStart:k,onTouchMove:P,onTouchEnd:E,children:[g.jsx("img",{src:t.photos[s],alt:"Run",className:"w-full h-auto object-contain"}),t.photos.length>1&&g.jsxs(g.Fragment,{children:[s>0&&g.jsx("button",{className:"hidden sm:flex absolute left-2 top-1/2 -translate-y-1/2 bg-white bg-opacity-80 text-navy-900 w-8 h-8 rounded-full items-center justify-center hover:bg-opacity-100 transition-all shadow-md",onClick:I,children:g.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),s<t.photos.length-1&&g.jsx("button",{className:"hidden sm:flex absolute right-2 top-1/2 -translate-y-1/2 bg-white bg-opacity-80 text-navy-900 w-8 h-8 rounded-full items-center justify-center hover:bg-opacity-100 transition-all shadow-md",onClick:C,children:g.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})}),g.jsx("div",{className:"absolute bottom-4 left-1/2 -translate-x-1/2 flex gap-1.5",children:t.photos.map((p,w)=>g.jsx("div",{className:`w-1.5 h-1.5 rounded-full transition-all ${w===s?"bg-navy-700 w-6":"bg-navy-300"}`},w))})]})]})}),g.jsxs("div",{className:"flex items-center gap-3 sm:gap-4 px-3 sm:px-4 py-3 border-b border-navy-100",children:[g.jsx("button",{className:"hover:opacity-60 transition-opacity p-1",children:g.jsx("svg",{className:"w-6 h-6 sm:w-7 sm:h-7",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"})})}),g.jsx("button",{className:"hover:opacity-60 transition-opacity p-1",children:g.jsx("svg",{className:"w-6 h-6 sm:w-7 sm:h-7",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})})}),g.jsx("button",{onClick:j,className:"hover:opacity-60 transition-opacity p-1",children:g.jsx("svg",{className:"w-6 h-6 sm:w-7 sm:h-7",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8.684 13.342C8.886 12.938 9 12.482 9 12c0-.482-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684m0 2.684l6.632 3.316m-6.632-6l6.632-3.316m0 0a3 3 0 105.367-2.684 3 3 0 00-5.367 2.684zm0 9.316a3 3 0 105.368 2.684 3 3 0 00-5.368-2.684z"})})}),g.jsx("button",{className:"ml-auto hover:opacity-60 transition-opacity p-1",children:g.jsx("svg",{className:"w-6 h-6 sm:w-7 sm:h-7",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 5a2 2 0 012-2h10a2 2 0 012 2v16l-7-3.5L5 21V5z"})})})]}),g.jsxs("div",{className:"px-3 sm:px-4 py-4 sm:py-5",children:[g.jsx("div",{className:"mb-4 sm:mb-5",children:g.jsx("span",{className:"font-bold text-navy-900 text-base sm:text-lg",children:y()})}),g.jsxs("div",{className:"mb-4 sm:mb-5",children:[g.jsx("div",{className:"text-3xl sm:text-4xl font-bold text-navy-900 mb-2",children:t!=null&&t.time?Hs(t.time):"--:--"}),g.jsxs("div",{className:"text-xs sm:text-sm text-navy-600",children:[D(),"  ",t!=null&&t.date?Xn(t.date):""]})]}),(()=>{const p=(t==null?void 0:t.memo)||(t==null?void 0:t.note)||(t==null?void 0:t.description)||"";return p&&typeof p=="string"&&p.trim().length>0?g.jsx("div",{className:"memo-text text-sm sm:text-base text-navy-700 mb-5 leading-relaxed",children:p}):null})(),g.jsx("div",{className:"text-xs text-navy-400 mt-5 pt-4 border-t border-navy-100",children:(()=>{let p="";try{if(t!=null&&t.createdAt){let w=null;t.createdAt&&typeof t.createdAt.toDate=="function"||t.createdAt instanceof je?w=t.createdAt.toDate():t.createdAt.seconds&&typeof t.createdAt.seconds=="number"?w=new Date(t.createdAt.seconds*1e3):t.createdAt._seconds&&typeof t.createdAt._seconds=="number"?w=new Date(t.createdAt._seconds*1e3):t.createdAt instanceof Date?w=t.createdAt:typeof t.createdAt=="number"?w=new Date(t.createdAt):typeof t.createdAt=="string"&&(w=new Date(t.createdAt)),w&&!isNaN(w.getTime())&&(p=w.toLocaleString("ko-KR",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}))}}catch{}if(!p&&(t!=null&&t.date)){let w=null;const A=new Date(t.date);if(!isNaN(A.getTime()))w=A;else if(typeof t.date=="string"){const T=t.date.replace(/\./g,"-").replace(/\s/g,"").split("-");if(T.length>=3){const[M,z,O]=T,L=new Date(parseInt(M,10),parseInt(z,10)-1,parseInt(O,10));isNaN(L.getTime())||(w=L)}}w&&!isNaN(w.getTime())&&(p=w.toLocaleDateString("ko-KR",{year:"numeric",month:"long",day:"numeric"}))}return p||""})()})]})]})]}),u&&g.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:g.jsxs("div",{className:"bg-white rounded-xl p-6 max-w-sm modal-content",children:[g.jsx("h3",{className:"text-lg font-bold text-navy-900 mb-2",children:" "}),g.jsx("p",{className:"text-navy-600 mb-4 text-sm",children:"   ?"}),g.jsxs("div",{className:"flex gap-2",children:[g.jsx("button",{onClick:b,className:"flex-1 bg-red-500 text-white py-2 rounded-lg hover:bg-red-600 transition-colors text-sm font-semibold",children:""}),g.jsx("button",{onClick:()=>c(!1),className:"flex-1 bg-navy-100 text-navy-700 py-2 rounded-lg hover:bg-navy-200 transition-colors text-sm font-semibold",children:""})]})]})})]})},e0=({user:t,userData:e,onShowSettings:n,onEditRun:r,showOwnOnly:s=!0})=>{const[i,o]=X.useState([]),[a,u]=X.useState(!0),[c,h]=X.useState(null),[f,d]=X.useState("all"),[v,x]=X.useState(""),[k,P]=X.useState("all"),E=async()=>{try{u(!0);const b=$r(Cn(lt,"runs"),$i("userId","==",t.uid),k1("date","desc")),D=(await ur(b)).docs.map(S=>({id:S.id,...S.data()}));D.sort((S,y)=>{if(S.date!==y.date)return new Date(y.date)-new Date(S.date);const p=R=>{var T,M,z;return R.createdAt?(T=R.createdAt)!=null&&T.toDate?R.createdAt.toDate().getTime():(M=R.createdAt)!=null&&M.seconds?R.createdAt.seconds*1e3:(z=R.createdAt)!=null&&z._seconds?R.createdAt._seconds*1e3:R.createdAt instanceof Date?R.createdAt.getTime():typeof R.createdAt=="number"?R.createdAt:typeof R.createdAt=="string"?new Date(R.createdAt).getTime():0:0},w=p(S),A=p(y);return w===0&&A===0?y.id.localeCompare(S.id):w===0?1:A===0?-1:A-w}),o(D)}catch(b){console.error("  :",b)}finally{u(!1)}};X.useEffect(()=>{E()},[t]);const I=b=>{h(null),r(b)},C=i.filter(b=>{if(f==="race"&&b.runType!=="race"||f==="casual"&&b.runType!=="casual")return!1;if(v){const j=v.toLowerCase(),D=(b.raceName||"").toLowerCase(),S=(b.location||"").toLowerCase(),y=(b.country||"").toLowerCase(),p=(b.city||"").toLowerCase();return D.includes(j)||S.includes(j)||y.includes(j)||p.includes(j)}return!0});return g.jsxs("div",{children:[s&&g.jsx(DN,{user:t,userData:e,runs:i}),s&&g.jsx(ON,{runs:i}),s&&g.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-3 sm:p-4 mb-4 space-y-3",children:[g.jsxs("div",{className:"flex gap-2",children:[g.jsxs("button",{onClick:()=>d("all"),className:`flex-1 py-2 px-3 rounded-lg font-semibold text-sm transition-colors ${f==="all"?"bg-navy-700 text-white":"bg-navy-100 text-navy-600 hover:bg-navy-200"}`,children:[" (",i.length,")"]}),g.jsxs("button",{onClick:()=>d("race"),className:`flex-1 py-2 px-3 rounded-lg font-semibold text-sm transition-colors ${f==="race"?"bg-navy-700 text-white":"bg-navy-100 text-navy-600 hover:bg-navy-200"}`,children:[" (",i.filter(b=>b.runType==="race").length,")"]}),g.jsxs("button",{onClick:()=>d("casual"),className:`flex-1 py-2 px-3 rounded-lg font-semibold text-sm transition-colors ${f==="casual"?"bg-navy-700 text-white":"bg-navy-100 text-navy-600 hover:bg-navy-200"}`,children:[" (",i.filter(b=>b.runType==="casual").length,")"]})]}),g.jsxs("div",{className:"relative",children:[g.jsx("input",{type:"text",value:v,onChange:b=>x(b.target.value),placeholder:"   ...",className:"w-full pl-10 pr-4 py-2 rounded-lg border-2 border-navy-200 focus:border-navy-600 focus:outline-none text-sm"}),g.jsx("svg",{className:"w-5 h-5 absolute left-3 top-1/2 -translate-y-1/2 text-navy-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),v&&g.jsx("button",{onClick:()=>x(""),className:"absolute right-3 top-1/2 -translate-y-1/2 text-navy-400 hover:text-navy-600",children:g.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})]}),!s&&g.jsx("div",{className:"bg-white rounded-xl shadow-sm p-3 sm:p-4 mb-4",children:g.jsxs("div",{className:"flex gap-2",children:[g.jsx("button",{onClick:()=>P("all"),className:`flex-1 py-2 px-3 rounded-lg font-semibold text-sm transition-colors ${k==="all"?"bg-navy-700 text-white":"bg-navy-100 text-navy-600 hover:bg-navy-200"}`,children:""}),g.jsx("button",{onClick:()=>P("friends"),className:`flex-1 py-2 px-3 rounded-lg font-semibold text-sm transition-colors ${k==="friends"?"bg-navy-700 text-white":"bg-navy-100 text-navy-600 hover:bg-navy-200"}`,children:""}),g.jsx("button",{onClick:()=>P("crew"),className:`flex-1 py-2 px-3 rounded-lg font-semibold text-sm transition-colors ${k==="crew"?"bg-navy-700 text-white":"bg-navy-100 text-navy-600 hover:bg-navy-200"}`,children:""})]})}),a?g.jsx("div",{className:"grid grid-cols-3 gap-1",children:[1,2,3,4,5,6].map(b=>g.jsx("div",{className:"bg-white overflow-hidden animate-pulse",children:g.jsx("div",{className:"w-full aspect-square bg-navy-100"})},b))}):i.length===0?g.jsxs("div",{className:"text-center py-12 bg-white rounded-xl shadow-sm",children:[g.jsx("div",{className:"text-5xl mb-3",children:""}),g.jsx("h3",{className:"text-lg font-bold text-navy-900 mb-2",children:"  "}),g.jsx("p",{className:"text-sm text-navy-600",children:"    !"})]}):C.length===0?g.jsxs("div",{className:"text-center py-12 bg-white rounded-xl shadow-sm",children:[g.jsx("div",{className:"text-5xl mb-3",children:""}),g.jsx("h3",{className:"text-lg font-bold text-navy-900 mb-2",children:"  "}),g.jsx("p",{className:"text-sm text-navy-600",children:"  "})]}):g.jsx("div",{className:"grid grid-cols-3 gap-1",children:C.map(b=>g.jsx(jN,{run:b,onClick:()=>h(b)},b.id))}),c&&g.jsx(MN,{run:c,onClose:()=>h(null),onDelete:E,onEdit:I})]})},VN=({runs:t})=>{const[e,n]=X.useState(2),r=t.filter(d=>d.runType==="race"&&d.raceName).reduce((d,v)=>{const x=v.raceName;return d[x]||(d[x]=[]),d[x].push(v),d},{}),s=Object.entries(r).map(([d,v])=>{const k=[...v].sort((j,D)=>j.time-D.time)[0],P=[...v].sort((j,D)=>new Date(D.date)-new Date(j.date)),E=P[0],I=v.length;let C=null;if(I>1){const j=P[1];E&&j&&(C=j.time-E.time)}const b=[...v].sort((j,D)=>{const S=w=>w.raceType==="HALF"?1:w.raceType==="FULL"?2:3,y=S(j)-S(D);if(y!==0)return y;const p=j.time-D.time;return p!==0?p:new Date(D.date)-new Date(j.date)});return{raceName:d,bestRecord:k,latestRecord:E,count:I,improvement:C,allRecords:b}}).sort((d,v)=>v.count-d.count);if(s.length===0)return null;const i=t.filter(d=>d.runType==="race"&&d.raceName),o=s.length,a=i.length,u={"5K":i.filter(d=>d.raceType==="5K").length,"10K":i.filter(d=>d.raceType==="10K").length,HALF:i.filter(d=>d.raceType==="HALF").length,FULL:i.filter(d=>d.raceType==="FULL").length,CUSTOM:i.filter(d=>!["5K","10K","HALF","FULL"].includes(d.raceType)).length},c=[...i].sort((d,v)=>new Date(d.date)-new Date(v.date)),h=c.length>0?c[0].date:null,f=i.length>0?[...i].sort((d,v)=>new Date(v.date)-new Date(d.date))[0].date:null;return g.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-4 sm:p-6 mb-4 sm:mb-6",children:[g.jsx("div",{className:"flex items-center justify-between mb-4",children:g.jsx("h2",{className:"text-lg sm:text-xl font-bold text-navy-900",children:"  "})}),g.jsxs("div",{className:"bg-navy-50 rounded-lg p-3 sm:p-4 mb-4",children:[g.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-3 sm:gap-4",children:[g.jsxs("div",{children:[g.jsx("div",{className:"text-xs text-navy-600 mb-1",children:"  "}),g.jsxs("div",{className:"text-lg sm:text-xl font-bold text-navy-900",children:[o,""]})]}),g.jsxs("div",{children:[g.jsx("div",{className:"text-xs text-navy-600 mb-1",children:"  "}),g.jsxs("div",{className:"text-lg sm:text-xl font-bold text-navy-900",children:[a,""]})]}),h&&g.jsxs("div",{children:[g.jsx("div",{className:"text-xs text-navy-600 mb-1",children:" "}),g.jsx("div",{className:"text-sm font-semibold text-navy-900",children:Xn(h)})]}),f&&g.jsxs("div",{children:[g.jsx("div",{className:"text-xs text-navy-600 mb-1",children:" "}),g.jsx("div",{className:"text-sm font-semibold text-navy-900",children:Xn(f)})]})]}),g.jsxs("div",{className:"mt-3 pt-3 border-t border-navy-200",children:[g.jsx("div",{className:"text-xs text-navy-600 mb-2",children:"  "}),g.jsxs("div",{className:"flex flex-wrap gap-2 sm:gap-3",children:[u["5K"]>0&&g.jsxs("div",{className:"text-xs",children:[g.jsx("span",{className:"text-navy-700 font-semibold",children:"5K"}),g.jsxs("span",{className:"text-navy-600 ml-1",children:[u["5K"],""]})]}),u["10K"]>0&&g.jsxs("div",{className:"text-xs",children:[g.jsx("span",{className:"text-navy-700 font-semibold",children:"10K"}),g.jsxs("span",{className:"text-navy-600 ml-1",children:[u["10K"],""]})]}),u.HALF>0&&g.jsxs("div",{className:"text-xs",children:[g.jsx("span",{className:"text-navy-700 font-semibold",children:"HALF"}),g.jsxs("span",{className:"text-navy-600 ml-1",children:[u.HALF,""]})]}),u.FULL>0&&g.jsxs("div",{className:"text-xs",children:[g.jsx("span",{className:"text-navy-700 font-semibold",children:"FULL"}),g.jsxs("span",{className:"text-navy-600 ml-1",children:[u.FULL,""]})]}),u.CUSTOM>0&&g.jsxs("div",{className:"text-xs",children:[g.jsx("span",{className:"text-navy-700 font-semibold",children:""}),g.jsxs("span",{className:"text-navy-600 ml-1",children:[u.CUSTOM,""]})]})]})]})]}),g.jsx("div",{className:"grid grid-cols-2 gap-3 sm:gap-4",children:s.slice(0,e).map(({raceName:d,bestRecord:v,latestRecord:x,count:k,improvement:P,allRecords:E})=>{const I=C=>C.raceType==="HALF"?"HALF":C.raceType==="FULL"?"FULL":`${C.distance}km`;return g.jsxs("div",{className:"bg-navy-200 rounded-lg p-3 sm:p-4",children:[g.jsxs("div",{className:"flex items-start justify-between mb-2",children:[g.jsx("div",{className:"flex-1 min-w-0",children:g.jsx("h3",{className:"font-bold text-navy-900 text-sm sm:text-base truncate",children:d})}),g.jsx("div",{className:"text-right ml-3 flex-shrink-0",children:g.jsxs("div",{className:"text-xs sm:text-sm font-semibold text-navy-700",children:[k," "]})})]}),g.jsx("div",{className:"mt-3 pt-3 border-t border-navy-300",children:g.jsx("div",{className:"space-y-3",children:E.map((C,b)=>g.jsxs("div",{className:"flex items-center justify-between gap-4",children:[g.jsxs("div",{className:"flex items-center gap-3",children:[g.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded-md bg-navy-300 text-navy-900 text-xs font-semibold",children:I(C)}),g.jsx("span",{className:"text-navy-600 text-xs",children:Xn(C.date)})]}),g.jsx("span",{className:"text-navy-900 font-bold text-xs sm:text-sm text-right",children:Hs(C.time)})]},b))})})]},d)})}),e<s.length&&g.jsx("div",{className:"text-center mt-4",children:g.jsxs("button",{onClick:()=>n(Math.min(e+3,s.length)),className:"text-navy-600 hover:text-navy-900 text-sm font-semibold px-4 py-2 rounded-lg bg-navy-100 hover:bg-navy-200 transition-colors",children:["+",s.length-e,"  "]})})]})},UN=({user:t,runs:e})=>{const[n,r]=X.useState([]),[s,i]=X.useState(!0),[o,a]=X.useState(!1),[u,c]=X.useState(!1),[h,f]=X.useState(null),[d,v]=X.useState(""),[x,k]=X.useState(""),[P,E]=X.useState([]);X.useEffect(()=>{I()},[t]);const I=async()=>{try{i(!0);const p=$r(Cn(lt,"collections"),$i("userId","==",t.uid)),A=(await ur(p)).docs.map(R=>({id:R.id,...R.data()}));A.sort((R,T)=>{const M=z=>{var O,L;return z.createdAt?(O=z.createdAt)!=null&&O.toDate?z.createdAt.toDate().getTime():(L=z.createdAt)!=null&&L.seconds?z.createdAt.seconds*1e3:0:0};return M(T)-M(R)}),r(A)}catch(p){console.error("  :",p),p.code==="permission-denied"||p.message.includes("permissions")?(console.warn("  . Firestore  ."),r([])):Re("  .","error")}finally{i(!1)}},C=async()=>{if(!d.trim()){Re("  .","error");return}try{let p="";if(P.length>0){const w=e.find(A=>A.id===P[0]);w!=null&&w.photos&&w.photos.length>0&&(p=w.photos[0])}await P1(Cn(lt,"collections"),{userId:t.uid,name:d,description:x,coverPhoto:p,runIds:P,createdAt:je.now(),updatedAt:je.now()}),Re(" ."),a(!1),v(""),k(""),E([]),I()}catch(p){console.error("  :",p),p.code==="permission-denied"||p.message.includes("permissions")?Re("Firestore  .   .","error"):Re("  .","error")}},b=async()=>{if(!d.trim()){Re("  .","error");return}try{let p=h.coverPhoto;if(P.length>0){const w=e.find(A=>A.id===P[0]);w!=null&&w.photos&&w.photos.length>0&&(p=w.photos[0])}await Cp(Er(lt,"collections",h.id),{name:d,description:x,coverPhoto:p,runIds:P,updatedAt:je.now()}),Re(" ."),c(!1),f(null),v(""),k(""),E([]),I()}catch(p){console.error("  :",p),Re("  .","error")}},j=async p=>{if(confirm("  ?"))try{await Nu(Er(lt,"collections",p)),Re(" ."),I()}catch(w){console.error("  :",w),Re("  .","error")}},D=p=>{f(p),v(p.name),k(p.description||""),E(p.runIds||[]),c(!0)},S=p=>{E(w=>w.includes(p)?w.filter(A=>A!==p):[...w,p])},y=p=>e.filter(w=>p.includes(w.id));return s?g.jsx("div",{className:"text-center py-12",children:g.jsx("div",{className:"inline-block animate-spin rounded-full h-10 w-10 border-4 border-navy-700 border-t-transparent"})}):g.jsxs(g.Fragment,{children:[g.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-4 sm:p-6",children:[g.jsxs("div",{className:"flex items-center justify-between mb-4",children:[g.jsx("h2",{className:"text-lg sm:text-xl font-bold text-navy-900",children:" "}),g.jsx("button",{onClick:()=>{v(""),k(""),E([]),a(!0)},className:"px-4 py-2 bg-navy-700 text-white text-sm font-semibold rounded-lg hover:bg-navy-800 transition-colors",children:"+  "})]}),n.length===0?g.jsxs("div",{className:"text-center py-12",children:[g.jsx("div",{className:"text-5xl mb-3",children:""}),g.jsx("h3",{className:"text-lg font-bold text-navy-900 mb-2",children:" "}),g.jsx("p",{className:"text-sm text-navy-600 mb-4",children:"   !"}),g.jsx("button",{onClick:()=>a(!0),className:"px-4 py-2 bg-navy-700 text-white text-sm font-semibold rounded-lg hover:bg-navy-800 transition-colors",children:"  "})]}):g.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-3 sm:gap-4",children:n.map(p=>{const w=y(p.runIds||[]);return g.jsxs("div",{className:"relative bg-navy-50 rounded-lg overflow-hidden cursor-pointer hover:opacity-90 transition-opacity",onClick:()=>D(p),children:[p.coverPhoto?g.jsx("img",{src:p.coverPhoto,alt:p.name,className:"w-full aspect-square object-cover"}):g.jsx("div",{className:"w-full aspect-square bg-gradient-to-br from-navy-200 to-navy-300 flex items-center justify-center",children:g.jsx("span",{className:"text-4xl",children:""})}),g.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/60 via-transparent to-transparent",children:g.jsxs("div",{className:"absolute bottom-0 left-0 right-0 p-3",children:[g.jsx("h3",{className:"text-white font-bold text-sm mb-1 truncate",children:p.name}),g.jsxs("p",{className:"text-white text-xs opacity-90",children:[w.length," "]})]})}),g.jsx("button",{onClick:A=>{A.stopPropagation(),j(p.id)},className:"absolute top-2 right-2 bg-red-500 text-white rounded-full p-1.5 hover:bg-red-600 transition-colors",children:g.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]},p.id)})})]}),o&&g.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:g.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[g.jsxs("div",{className:"flex justify-between items-center p-4 sm:p-6 border-b border-navy-100 sticky top-0 bg-white z-10",children:[g.jsx("h2",{className:"text-xl sm:text-2xl font-bold text-navy-900",children:" "}),g.jsx("button",{onClick:()=>a(!1),className:"text-navy-400 hover:text-navy-600 transition-colors p-1",children:g.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),g.jsxs("div",{className:"p-4 sm:p-6 space-y-4",children:[g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-semibold text-navy-700 mb-2",children:" "}),g.jsx("input",{type:"text",value:d,onChange:p=>v(p.target.value),className:"w-full px-4 py-3 rounded-lg border-2 border-navy-200 focus:border-navy-600 focus:outline-none",placeholder:":   ",required:!0})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-semibold text-navy-700 mb-2",children:" ()"}),g.jsx("textarea",{value:x,onChange:p=>k(p.target.value),className:"w-full px-4 py-3 rounded-lg border-2 border-navy-200 focus:border-navy-600 focus:outline-none",rows:"3",placeholder:"   "})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-semibold text-navy-700 mb-2",children:" "}),g.jsx("div",{className:"grid grid-cols-2 gap-2 max-h-64 overflow-y-auto",children:e.map(p=>g.jsxs("button",{type:"button",onClick:()=>S(p.id),className:`p-2 rounded-lg border-2 transition-colors text-left ${P.includes(p.id)?"border-navy-700 bg-navy-100":"border-navy-200 hover:border-navy-300"}`,children:[g.jsx("div",{className:"text-xs font-semibold text-navy-900 truncate",children:p.runType==="race"?p.raceName:p.location}),g.jsx("div",{className:"text-xs text-navy-600",children:Xn(p.date)})]},p.id))})]}),g.jsx("button",{onClick:C,className:"w-full bg-navy-700 text-white font-semibold py-3 rounded-lg hover:bg-navy-800 transition-colors",children:""})]})]})}),u&&h&&g.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:g.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[g.jsxs("div",{className:"flex justify-between items-center p-4 sm:p-6 border-b border-navy-100 sticky top-0 bg-white z-10",children:[g.jsx("h2",{className:"text-xl sm:text-2xl font-bold text-navy-900",children:" "}),g.jsx("button",{onClick:()=>{c(!1),f(null)},className:"text-navy-400 hover:text-navy-600 transition-colors p-1",children:g.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),g.jsxs("div",{className:"p-4 sm:p-6 space-y-4",children:[g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-semibold text-navy-700 mb-2",children:" "}),g.jsx("input",{type:"text",value:d,onChange:p=>v(p.target.value),className:"w-full px-4 py-3 rounded-lg border-2 border-navy-200 focus:border-navy-600 focus:outline-none",required:!0})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-semibold text-navy-700 mb-2",children:" ()"}),g.jsx("textarea",{value:x,onChange:p=>k(p.target.value),className:"w-full px-4 py-3 rounded-lg border-2 border-navy-200 focus:border-navy-600 focus:outline-none",rows:"3"})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-semibold text-navy-700 mb-2",children:" "}),g.jsx("div",{className:"grid grid-cols-2 gap-2 max-h-64 overflow-y-auto",children:e.map(p=>g.jsxs("button",{type:"button",onClick:()=>S(p.id),className:`p-2 rounded-lg border-2 transition-colors text-left ${P.includes(p.id)?"border-navy-700 bg-navy-100":"border-navy-200 hover:border-navy-300"}`,children:[g.jsx("div",{className:"text-xs font-semibold text-navy-900 truncate",children:p.runType==="race"?p.raceName:p.location}),g.jsx("div",{className:"text-xs text-navy-600",children:Xn(p.date)})]},p.id))})]}),g.jsx("button",{onClick:b,className:"w-full bg-navy-700 text-white font-semibold py-3 rounded-lg hover:bg-navy-800 transition-colors",children:" "})]})]})})]})},FN=({user:t})=>{const[e,n]=X.useState([]),[r,s]=X.useState(!0);X.useEffect(()=>{(async()=>{try{const a=$r(Cn(lt,"runs"),$i("userId","==",t.uid),k1("date","desc")),c=(await ur(a)).docs.map(h=>({id:h.id,...h.data()}));n(c)}catch(a){console.error("  :",a)}finally{s(!1)}})()},[t]);const i=["5K","10K","HALF","FULL"].map(o=>{const a=e.filter(f=>f.raceType===o);if(a.length===0)return{type:o,typeName:o==="HALF"?"HALF":o==="FULL"?"FULL":o,isEmpty:!0};const c=a.reduce((f,d)=>f.time<d.time?f:d),h=a.reduce((f,d)=>f+d.time,0)/a.length;return{type:o,typeName:o==="HALF"?"HALF":o==="FULL"?"FULL":o,best:c,average:h,count:a.length,isEmpty:!1,allRuns:a.sort((f,d)=>new Date(d.date)-new Date(f.date))}});return r?g.jsx("div",{className:"text-center py-12",children:g.jsx("div",{className:"inline-block animate-spin rounded-full h-10 w-10 border-4 border-navy-700 border-t-transparent"})}):g.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[g.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-4 sm:p-6",children:[g.jsx("h2",{className:"text-lg sm:text-xl font-bold text-navy-900 mb-4",children:"  "}),g.jsx("div",{className:"grid grid-cols-2 gap-3 sm:gap-4",children:i.map(({type:o,typeName:a,best:u,average:c,count:h,isEmpty:f})=>g.jsxs("div",{className:`rounded-lg p-4 ${f?"bg-gradient-to-br from-navy-100 to-navy-200 border-2 border-dashed border-navy-300":"bg-gradient-to-br from-navy-100 to-navy-200"}`,children:[g.jsxs("div",{className:"flex items-center justify-between mb-3",children:[g.jsx("h3",{className:"text-base sm:text-lg font-bold text-navy-900",children:a}),!f&&g.jsxs("span",{className:"text-xs text-navy-600",children:[h,""]})]}),f?g.jsxs("div",{className:"flex flex-col items-center justify-center py-6 text-center",children:[g.jsx("div",{className:"text-2xl mb-2",children:""}),g.jsx("div",{className:"text-sm text-navy-600 font-medium mb-1",children:" !"}),g.jsx("div",{className:"text-xs text-navy-500",children:"    "})]}):g.jsxs("div",{className:"space-y-2",children:[g.jsxs("div",{children:[g.jsx("div",{className:"text-xs text-navy-600 mb-1",children:" "}),g.jsx("div",{className:"text-xl sm:text-2xl font-bold text-navy-900",children:Hs(u.time)}),g.jsx("div",{className:"text-xs text-navy-500 mt-1",children:Xn(u.date)})]}),h>1&&g.jsxs("div",{children:[g.jsx("div",{className:"text-xs text-navy-600 mb-1",children:" "}),g.jsx("div",{className:"text-base font-semibold text-navy-700",children:Hs(Math.round(c))})]})]})]},o))})]}),g.jsx(VN,{runs:e}),g.jsx(UN,{user:t,runs:e})]})},t0=[{id:1,name:"",date:"2025-03-16"},{id:2,name:"",date:"2025-03-23"},{id:3,name:"",date:"2025-04-06"},{id:4,name:"",date:"2025-04-13"},{id:5,name:"",date:"2025-10-26"},{id:6,name:"",date:"2025-11-03"},{id:7,name:"",date:"2025-10-26"},{id:11,name:"",date:"2024-03-17"},{id:12,name:"",date:"2024-03-24"},{id:13,name:"",date:"2024-04-07"},{id:14,name:"",date:"2024-04-14"},{id:15,name:"",date:"2024-10-27"},{id:16,name:"",date:"2024-11-03"},{id:17,name:"",date:"2024-10-27"},{id:18,name:"",date:"2024-05-05"},{id:19,name:"",date:"2024-03-10"},{id:21,name:"",date:"2023-03-19"},{id:22,name:"",date:"2023-03-26"},{id:23,name:"",date:"2023-04-09"},{id:24,name:"",date:"2023-04-16"},{id:25,name:"",date:"2023-10-29"},{id:26,name:"",date:"2023-11-05"},{id:27,name:"",date:"2023-10-29"}],BN={"5K":5,"10K":10,HALF:21.0975,FULL:42.195,CUSTOM:null},n0=[{code:"KR",name:"",nameEn:"South Korea"},{code:"JP",name:"",nameEn:"Japan"},{code:"US",name:"",nameEn:"United States"},{code:"GB",name:"",nameEn:"United Kingdom"},{code:"FR",name:"",nameEn:"France"},{code:"DE",name:"",nameEn:"Germany"},{code:"IT",name:"",nameEn:"Italy"},{code:"ES",name:"",nameEn:"Spain"},{code:"CN",name:"",nameEn:"China"},{code:"TW",name:"",nameEn:"Taiwan"},{code:"HK",name:"",nameEn:"Hong Kong"},{code:"SG",name:"",nameEn:"Singapore"},{code:"TH",name:"",nameEn:"Thailand"},{code:"VN",name:"",nameEn:"Vietnam"},{code:"MY",name:"",nameEn:"Malaysia"},{code:"ID",name:"",nameEn:"Indonesia"},{code:"PH",name:"",nameEn:"Philippines"},{code:"AU",name:"",nameEn:"Australia"},{code:"NZ",name:"",nameEn:"New Zealand"},{code:"CA",name:"",nameEn:"Canada"},{code:"MX",name:"",nameEn:"Mexico"},{code:"BR",name:"",nameEn:"Brazil"},{code:"AR",name:"",nameEn:"Argentina"},{code:"CH",name:"",nameEn:"Switzerland"},{code:"AT",name:"",nameEn:"Austria"},{code:"NL",name:"",nameEn:"Netherlands"},{code:"BE",name:"",nameEn:"Belgium"},{code:"SE",name:"",nameEn:"Sweden"},{code:"NO",name:"",nameEn:"Norway"},{code:"DK",name:"",nameEn:"Denmark"},{code:"FI",name:"",nameEn:"Finland"},{code:"PL",name:"",nameEn:"Poland"},{code:"CZ",name:"",nameEn:"Czech Republic"},{code:"GR",name:"",nameEn:"Greece"},{code:"PT",name:"",nameEn:"Portugal"},{code:"TR",name:"",nameEn:"Turkey"},{code:"RU",name:"ussia",nameEn:"Russia"},{code:"AE",name:"",nameEn:"UAE"},{code:"IN",name:"",nameEn:"India"},{code:"EG",name:"",nameEn:"Egypt"},{code:"ZA",name:"",nameEn:"South Africa"},{code:"IL",name:"",nameEn:"Israel"}];function zN(t){if(!t)return n0;const e=t.toLowerCase();return n0.filter(n=>n.name.toLowerCase().includes(e)||n.nameEn.toLowerCase().includes(e))}const $N=({user:t,onRunAdded:e,editingRun:n,onEditComplete:r})=>{const[s,i]=X.useState(!1),[o,a]=X.useState("race");X.useEffect(()=>{const F=()=>{i(!0)};return window.addEventListener("openAddRunForm",F),()=>{window.removeEventListener("openAddRunForm",F)}},[]);const[u,c]=X.useState({date:new Date().toISOString().split("T")[0],distanceType:"5K",customDistance:"",hours:"0",minutes:"0",seconds:"0",location:"",raceName:"",memo:"",isPublic:!0,textColor:"light"}),[h,f]=X.useState([]),[d,v]=X.useState([]),[x,k]=X.useState([]),[P,E]=X.useState(!1),[I,C]=X.useState(null),[b,j]=X.useState(!1),[D,S]=X.useState(""),[y,p]=X.useState(""),[w,A]=X.useState(""),[R,T]=X.useState(!1),[M,z]=X.useState("");X.useEffect(()=>{if(n){i(!0),a(n.runType);const F=Math.floor(n.time/3600),B=Math.floor(n.time%3600/60),ee=n.time%60,ae=t0.some(oe=>oe.name===n.raceName),ie=ae?n.raceName:"CUSTOM";c({date:n.date,distanceType:n.raceType||"CUSTOM",customDistance:n.raceType==="CUSTOM"?n.distance.toString():"",hours:F.toString(),minutes:B.toString(),seconds:ee.toString(),location:n.location||"",raceName:ie,customRaceName:ae?"":n.raceName,memo:n.memo||"",isPublic:n.isPublic!==!1,textColor:n.textColor||"light"}),v(n.photos||[]),f([]),j(!!n.isOverseas),S(n.country||""),p(n.city||""),A(n.place||""),z(n.country||""),T(!1)}},[n]),X.useEffect(()=>{if(o==="race"&&u.date){const F=t0.filter(B=>B.date===u.date);k(F)}},[o,u.date]);const O=async F=>{const B=Array.from(F.target.files),ee=d.filter(pe=>pe.startsWith("http")).length,ae=h.length,oe=3-(ee+ae);if(oe<=0){Re("  3   .","error"),F.target.value="";return}const de=B.slice(0,oe),ge=await Promise.all(de.map(pe=>new Promise(xt=>{const Ze=new FileReader;Ze.onloadend=()=>xt(Ze.result),Ze.readAsDataURL(pe)})));f([...h,...de]),v([...d,...ge]),F.target.value=""},L=F=>{var ee;if((ee=d[F])==null?void 0:ee.startsWith("http"))v(d.filter((ae,ie)=>ie!==F));else{const ae=F-d.filter(ie=>ie.startsWith("http")).length;f(h.filter((ie,oe)=>oe!==ae)),v(d.filter((ie,oe)=>oe!==F))}},U=F=>{C(F)},V=F=>{F.preventDefault()},H=(F,B)=>{if(F.preventDefault(),F.stopPropagation(),I===null||I===B){C(null);return}const ee=[...d],ae=ee.splice(I,1)[0];ee.splice(B,0,ae),v(ee);const ie=d.filter(de=>de.startsWith("http")).length,oe=[...h];if(I>=ie&&B>=ie){const de=I-ie,ge=B-ie,pe=oe.splice(de,1)[0];oe.splice(ge,0,pe),f(oe)}else if(!(I<ie&&B>=ie)){if(I>=ie&&B<ie){const de=I-ie,ge=oe.splice(de,1)[0];oe.splice(0,0,ge),f(oe)}}C(null)},J=()=>{C(null)},K=()=>{i(!1),c({date:new Date().toISOString().split("T")[0],distanceType:"5K",customDistance:"",hours:"0",minutes:"0",seconds:"0",location:"",raceName:"",memo:"",isPublic:!0,textColor:"light"}),f([]),v([]),j(!1),S(""),p(""),A(""),z(""),T(!1),n&&r()},Y=async F=>{F.preventDefault(),E(!0);try{if(o==="casual"&&b){if(!(D&&D.trim()||M&&M.trim())){Re(" .","error"),E(!1);return}if(!y||!y.trim()){Re(" .","error"),E(!1);return}}if(o==="casual"&&!b&&(!u.location||!u.location.trim())){Re(" .","error"),E(!1);return}const B=parseInt(u.hours)*3600+parseInt(u.minutes)*60+parseInt(u.seconds);let ee,ae;u.distanceType==="CUSTOM"?(ee=parseFloat(u.customDistance),ae="CUSTOM"):(ee=BN[u.distanceType],ae=u.distanceType);const ie=[];for(let pe=0;pe<d.length;pe++){const xt=d[pe];if(xt.startsWith("http"))ie.push(xt);else{const Ze=d.slice(0,pe).filter(Fe=>!Fe.startsWith("http")).length,xe=h[Ze];if(xe){const Fe=await fE(xe),Te=J1(Z1,`runs/${t.uid}/${Date.now()}_${Math.random()}`);await Y1(Te,Fe);const Ie=await X1(Te);ie.push(Ie)}}}let oe="";const de=D&&D.trim()||M&&M.trim()||"";o==="casual"&&(b?oe=[de,y,w].filter(Boolean).join(" "):oe=u.location||"");const ge={userId:t.uid,runType:o,date:u.date,distance:ee,time:B,pace:LN(ee,B),location:oe,raceName:o==="race"?u.raceName==="CUSTOM"?u.customRaceName:u.raceName:"",memo:u.memo,photos:ie,isPublic:u.isPublic,textColor:u.textColor,raceType:ae,isOverseas:o==="casual"?b:!1,country:o==="casual"&&b?de:null,city:o==="casual"&&b?y:null,place:o==="casual"&&b?w:null,collections:(n==null?void 0:n.collections)||[],...n?{}:{createdAt:je.now()}};n?(await Cp(Er(lt,"runs",n.id),ge),r()):(await P1(Cn(lt,"runs"),ge),e()),K()}catch(B){console.error("  :",B),Re("  .","error")}finally{E(!1)}};return g.jsx(g.Fragment,{children:s&&g.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-2 sm:p-4 z-50",children:g.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-2xl max-h-[95vh] sm:max-h-[90vh] overflow-y-auto modal-content",children:[g.jsxs("div",{className:"flex justify-between items-center p-4 sm:p-6 border-b border-navy-100 sticky top-0 bg-white z-10",children:[g.jsx("h2",{className:"text-xl sm:text-2xl font-bold text-navy-900",children:n?" ":"  "}),g.jsx("button",{onClick:K,className:"text-navy-400 hover:text-navy-600 transition-colors p-1",children:g.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),g.jsxs("form",{onSubmit:Y,className:"p-4 sm:p-6 space-y-4 sm:space-y-5",children:[g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-semibold text-navy-700 mb-2",children:""}),g.jsxs("div",{className:"flex gap-2",children:[g.jsx("button",{type:"button",onClick:()=>a("race"),className:`flex-1 py-3 rounded-lg font-semibold transition-colors ${o==="race"?"bg-navy-700 text-white":"bg-navy-100 text-navy-600 hover:bg-navy-200"}`,children:""}),g.jsx("button",{type:"button",onClick:()=>a("casual"),className:`flex-1 py-3 rounded-lg font-semibold transition-colors ${o==="casual"?"bg-navy-700 text-white":"bg-navy-100 text-navy-600 hover:bg-navy-200"}`,children:""})]})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-semibold text-navy-700 mb-2",children:""}),g.jsx("input",{type:"date",value:u.date,onChange:F=>c({...u,date:F.target.value}),min:"1900-01-01",max:new Date().toISOString().split("T")[0],className:"w-full px-4 py-3 rounded-lg border-2 border-navy-200 focus:border-navy-600 focus:outline-none",required:!0})]}),o==="race"&&g.jsxs(g.Fragment,{children:[g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-semibold text-navy-700 mb-2",children:""}),g.jsxs("select",{value:u.raceName,onChange:F=>c({...u,raceName:F.target.value}),className:"w-full px-4 py-3 rounded-lg border-2 border-navy-200 focus:border-navy-600 focus:outline-none appearance-none bg-white",style:{backgroundImage:"url('data:image/svg+xml;charset=UTF-8,%3csvg xmlns=%27http://www.w3.org/2000/svg%27 viewBox=%270 0 24 24%27 fill=%27none%27 stroke=%27currentColor%27 stroke-width=%272%27 stroke-linecap=%27round%27 stroke-linejoin=%27round%27%3e%3cpolyline points=%276 9 12 15 18 9%27%3e%3c/polyline%3e%3c/svg%3e')",backgroundRepeat:"no-repeat",backgroundPosition:"right 1rem center",backgroundSize:"1.5em 1.5em",paddingRight:"3rem"},required:!0,children:[g.jsx("option",{value:"",children:" "}),x.map(F=>g.jsx("option",{value:F.name,children:F.name},F.id)),g.jsx("option",{value:"CUSTOM",children:" "})]})]}),u.raceName==="CUSTOM"&&g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-semibold text-navy-700 mb-2",children:"  "}),g.jsx("input",{type:"text",value:u.customRaceName||"",onChange:F=>c({...u,customRaceName:F.target.value}),className:"w-full px-4 py-3 rounded-lg border-2 border-navy-200 focus:border-navy-600 focus:outline-none",placeholder:" ",required:!0})]})]}),o==="casual"&&g.jsxs(g.Fragment,{children:[g.jsxs("div",{className:"mb-3",children:[g.jsxs("div",{className:"flex items-center justify-between mb-2",children:[g.jsx("label",{className:"block text-sm font-semibold text-navy-700",children:""}),g.jsxs("button",{type:"button",onClick:()=>{const F=!b;j(F),F||(S(""),p(""),A(""),z(""),T(!1))},className:`relative inline-flex items-center rounded-full px-3 py-1.5 text-xs font-semibold shadow-sm transition-colors ${b?"bg-navy-700 text-white":"bg-slate-300 text-slate-700"}`,"aria-pressed":b,children:[g.jsx("span",{className:"mr-2",children:b?"":""}),g.jsx("span",{className:`flex items-center justify-center w-5 h-5 rounded-full bg-white text-[10px] transition-colors ${b?"text-navy-700":"text-slate-400"}`,children:b?"":""})]})]}),g.jsx("input",{type:"text",value:u.location,onChange:F=>c({...u,location:F.target.value}),className:"w-full px-4 py-3 rounded-lg border-2 border-navy-200 focus:border-navy-600 focus:outline-none",placeholder:"",required:!0})]}),b&&g.jsx("div",{className:"mt-1 space-y-3",children:g.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-semibold text-navy-700 mb-2",children:""}),g.jsxs("div",{className:"relative",children:[g.jsx("input",{type:"text",value:M,onChange:F=>{z(F.target.value),T(!0)},onFocus:()=>T(!0),placeholder:"  (: )",className:"w-full px-3 py-2 rounded-lg border-2 border-navy-200 focus:border-navy-600 focus:outline-none text-sm",required:b}),R&&g.jsx("div",{className:"absolute z-10 w-full mt-1 bg-white border-2 border-navy-200 rounded-lg shadow-lg max-h-48 overflow-y-auto",children:zN(M).slice(0,10).map(F=>g.jsxs("button",{type:"button",onClick:()=>{S(F.name),z(F.name),T(!1)},className:"w-full text-left px-3 py-1.5 hover:bg-navy-50 transition-colors text-sm",children:[F.name," (",F.nameEn,")"]},F.code))})]})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-semibold text-navy-700 mb-2",children:""}),g.jsx("input",{type:"text",value:y,onChange:F=>p(F.target.value),placeholder:"",className:"w-full px-3 py-2 rounded-lg border-2 border-navy-200 focus:border-navy-600 focus:outline-none text-sm",required:b})]})]})})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-semibold text-navy-700 mb-2",children:""}),g.jsx("div",{className:"grid grid-cols-5 gap-2 mb-2",children:["5K","10K","HALF","FULL","CUSTOM"].map(F=>g.jsx("button",{type:"button",onClick:()=>c({...u,distanceType:F}),className:`py-2 rounded-lg font-semibold text-sm transition-colors ${u.distanceType===F?"bg-navy-700 text-white":"bg-navy-100 text-navy-600 hover:bg-navy-200"}`,children:F==="CUSTOM"?"":F},F))}),u.distanceType==="CUSTOM"&&g.jsx("input",{type:"number",step:"0.01",value:u.customDistance,onChange:F=>c({...u,customDistance:F.target.value}),className:"w-full px-4 py-3 rounded-lg border-2 border-navy-200 focus:border-navy-600 focus:outline-none",placeholder:"  (km)",required:!0})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-semibold text-navy-700 mb-2",children:" "}),g.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[g.jsxs("div",{className:"relative",children:[g.jsx("input",{type:"number",min:"0",value:u.hours,onChange:F=>c({...u,hours:F.target.value}),onFocus:F=>F.target.value==="0"&&c({...u,hours:""}),onBlur:F=>!F.target.value&&c({...u,hours:"0"}),className:"w-full px-4 py-3 pr-16 rounded-lg border-2 border-navy-200 bg-white focus:border-navy-600 focus:outline-none text-center",placeholder:"0"}),g.jsx("div",{className:"absolute right-4 top-1/2 -translate-y-1/2 text-sm text-navy-500 pointer-events-none",children:""})]}),g.jsxs("div",{className:"relative",children:[g.jsx("input",{type:"number",min:"0",max:"59",value:u.minutes,onChange:F=>{const B=F.target.value;(B===""||parseInt(B)>=0&&parseInt(B)<=59)&&c({...u,minutes:B})},onFocus:F=>F.target.value==="0"&&c({...u,minutes:""}),onBlur:F=>{const B=F.target.value;B?parseInt(B)>59?c({...u,minutes:"59"}):parseInt(B)<0&&c({...u,minutes:"0"}):c({...u,minutes:"0"})},className:"w-full px-4 py-3 pr-12 rounded-lg border-2 border-navy-200 bg-white focus:border-navy-600 focus:outline-none text-center",placeholder:"0"}),g.jsx("div",{className:"absolute right-4 top-1/2 -translate-y-1/2 text-sm text-navy-500 pointer-events-none",children:""})]}),g.jsxs("div",{className:"relative",children:[g.jsx("input",{type:"number",min:"0",max:"59",value:u.seconds,onChange:F=>{const B=F.target.value;(B===""||parseInt(B)>=0&&parseInt(B)<=59)&&c({...u,seconds:B})},onFocus:F=>F.target.value==="0"&&c({...u,seconds:""}),onBlur:F=>{const B=F.target.value;B?parseInt(B)>59?c({...u,seconds:"59"}):parseInt(B)<0&&c({...u,seconds:"0"}):c({...u,seconds:"0"})},className:"w-full px-4 py-3 pr-12 rounded-lg border-2 border-navy-200 bg-white focus:border-navy-600 focus:outline-none text-center",placeholder:"0"}),g.jsx("div",{className:"absolute right-4 top-1/2 -translate-y-1/2 text-sm text-navy-500 pointer-events-none",children:""})]})]})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-semibold text-navy-700 mb-2",children:" ( 3)"}),g.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[d.map((F,B)=>g.jsxs("div",{className:"image-upload-container has-image cursor-move",draggable:!0,onDragStart:()=>U(B),onDragOver:V,onDrop:ee=>H(ee,B),onDragEnd:J,style:{opacity:I===B?.5:1},children:[g.jsx("img",{src:F,alt:`Photo ${B}`,className:"image-preview pointer-events-none"}),g.jsx("button",{type:"button",onClick:()=>L(B),className:"absolute top-2 right-2 bg-red-500 text-white rounded-full p-1 hover:bg-red-600 z-10",children:g.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),g.jsx("div",{className:"absolute top-2 left-2 bg-black bg-opacity-50 text-white text-xs px-2 py-1 rounded z-10 pointer-events-none",children:B+1})]},B)),d.length<3&&g.jsx("div",{className:"image-upload-container",onClick:()=>document.getElementById("photo-input").click(),children:g.jsxs("div",{className:"upload-placeholder",children:[g.jsx("svg",{className:"w-6 h-6 sm:w-8 sm:h-8 mx-auto mb-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),g.jsxs("p",{className:"text-xs leading-tight",children:["",g.jsx("br",{}),""]})]})})]}),g.jsx("input",{id:"photo-input",type:"file",accept:"image/*",multiple:!0,onChange:O,className:"hidden"})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-semibold text-navy-700 mb-2",children:""}),g.jsx("textarea",{value:u.memo,onChange:F=>c({...u,memo:F.target.value}),className:"w-full px-4 py-3 rounded-lg border-2 border-navy-200 focus:border-navy-600 focus:outline-none",rows:"3",placeholder:"  ?"})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-semibold text-navy-700 mb-2",children:" "}),g.jsxs("div",{className:"flex gap-2",children:[g.jsx("button",{type:"button",onClick:()=>c({...u,isPublic:!0}),className:`flex-1 py-3 rounded-lg font-semibold transition-colors ${u.isPublic?"bg-navy-700 text-white":"bg-navy-100 text-navy-600 hover:bg-navy-200"}`,children:""}),g.jsx("button",{type:"button",onClick:()=>c({...u,isPublic:!1}),className:`flex-1 py-3 rounded-lg font-semibold transition-colors ${u.isPublic?"bg-navy-100 text-navy-600 hover:bg-navy-200":"bg-navy-700 text-white"}`,children:""})]})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-semibold text-navy-700 mb-2",children:" "}),g.jsxs("div",{className:"flex gap-2",children:[g.jsx("button",{type:"button",onClick:()=>c({...u,textColor:"light"}),className:`flex-1 py-3 rounded-lg font-semibold transition-colors ${u.textColor==="light"?"bg-navy-700 text-white":"bg-navy-100 text-navy-600 hover:bg-navy-200"}`,children:"White"}),g.jsx("button",{type:"button",onClick:()=>c({...u,textColor:"dark"}),className:`flex-1 py-3 rounded-lg font-semibold transition-colors ${u.textColor==="dark"?"bg-navy-700 text-white":"bg-navy-100 text-navy-600 hover:bg-navy-200"}`,children:"Black"})]})]}),g.jsxs("button",{type:"submit",disabled:P,className:"w-full bg-navy-700 text-white font-semibold py-4 rounded-lg hover:bg-navy-800 transition-colors disabled:opacity-50 flex items-center justify-center gap-2",children:[P&&g.jsxs("svg",{className:"animate-spin h-5 w-5",fill:"none",viewBox:"0 0 24 24",children:[g.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),g.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),P?" ...":n?" ":" "]})]})]})})})},HN=({user:t,userData:e,onClose:n,onSignOut:r})=>{const[s,i]=X.useState("menu"),[o,a]=X.useState((e==null?void 0:e.nickname)||t.displayName||""),[u,c]=X.useState(""),[h,f]=X.useState(""),[d,v]=X.useState(""),[x,k]=X.useState(""),[P,E]=X.useState(!1),[I,C]=X.useState(!1),[b,j]=X.useState(""),D=async p=>{p.preventDefault(),k(""),E(!0);try{if(o!==((e==null?void 0:e.nickname)||t.displayName)&&await eE(o)){k("   ."),E(!1);return}await $f(kn.currentUser,{displayName:o}),await Cp(Er(lt,"users",t.uid),{nickname:o}),Re(" ."),setTimeout(()=>window.location.reload(),500)}catch{k("  .")}finally{E(!1)}},S=async p=>{p.preventDefault(),k(""),E(!0);try{if(!tE(h)){k(" ,   8  ."),E(!1);return}if(h!==d){k("   ."),E(!1);return}await wd(kn,t.email,u),await WA(kn.currentUser,h),Re(" ."),i("menu"),c(""),f(""),v("")}catch(w){w.code==="auth/wrong-password"||w.code==="auth/invalid-credential"?k("   ."):k("  .")}finally{E(!1)}},y=async()=>{if(!b){Re(" .","error");return}try{await wd(kn,t.email,b);const p=Er(lt,"users",t.uid);await Nu(p);const w=$r(Cn(lt,"runs"),$i("userId","==",t.uid)),R=(await ur(w)).docs.map(T=>Nu(T.ref));await Promise.all(R),await XA(kn.currentUser),Re("  .")}catch(p){console.error("  :",p),p.code==="auth/wrong-password"||p.code==="auth/invalid-credential"?Re("  .","error"):p.code==="auth/requires-recent-login"?(Re("     .","error"),r()):Re("  .","error")}};return g.jsxs("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-2 sm:p-4 z-50",children:[g.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-md max-h-[90vh] overflow-y-auto slide-up",children:[g.jsxs("div",{className:"flex justify-between items-center p-4 sm:p-6 border-b border-navy-100 sticky top-0 bg-white z-10",children:[g.jsxs("h2",{className:"text-lg sm:text-xl font-bold text-navy-900",children:[s==="menu"&&"",s==="nickname"&&" ",s==="password"&&" "]}),g.jsx("button",{onClick:n,className:"text-navy-400 hover:text-navy-600 transition-colors p-1",children:g.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),g.jsxs("div",{className:"p-4 sm:p-6",children:[s==="menu"&&g.jsxs("div",{className:"space-y-3",children:[g.jsx("button",{onClick:()=>i("nickname"),className:"w-full bg-navy-200 text-navy-900 font-medium text-sm px-4 py-3 rounded-lg transition-colors text-center hover:bg-navy-300",children:" "}),g.jsx("button",{onClick:()=>i("password"),className:"w-full bg-navy-200 text-navy-900 font-medium text-sm px-4 py-3 rounded-lg transition-colors text-center hover:bg-navy-300",children:" "}),g.jsx("button",{onClick:()=>alert(`RunLog v1.0.0

   .`),className:"w-full bg-navy-200 text-navy-900 text-sm px-4 py-3 rounded-lg transition-colors text-center hover:bg-navy-300",children:" "}),g.jsx("button",{onClick:r,className:"w-full bg-navy-900 hover:bg-navy-800 text-white font-medium text-sm px-4 py-3 rounded-lg transition-colors text-center",children:""}),g.jsx("button",{onClick:()=>C(!0),className:"w-full bg-red-50 hover:bg-red-100 text-red-600 font-medium text-sm px-4 py-3 rounded-lg transition-colors text-center",children:" "})]}),s==="nickname"&&g.jsxs("form",{onSubmit:D,className:"space-y-3",children:[g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-semibold text-navy-700 mb-2",children:" "}),g.jsx("input",{type:"text",value:o,onChange:p=>a(p.target.value),className:"w-full px-4 py-2 rounded-lg border-2 border-navy-200 focus:border-navy-600 focus:outline-none text-sm",required:!0})]}),x&&g.jsx("div",{className:"bg-red-50 text-red-600 px-3 py-2 rounded-lg text-xs",children:x}),g.jsxs("div",{className:"flex gap-2",children:[g.jsx("button",{type:"button",onClick:()=>i("menu"),className:"flex-1 bg-navy-100 text-navy-700 py-2 rounded-lg hover:bg-navy-200 transition-colors text-sm font-semibold",children:""}),g.jsx("button",{type:"submit",disabled:P,className:"flex-1 bg-navy-700 text-white py-2 rounded-lg hover:bg-navy-800 transition-colors text-sm font-semibold disabled:opacity-50",children:P?" ...":""})]})]}),s==="password"&&g.jsxs("form",{onSubmit:S,className:"space-y-3",children:[g.jsx("input",{type:"password",value:u,onChange:p=>c(p.target.value),className:"w-full px-4 py-2 rounded-lg border-2 border-navy-200 focus:border-navy-600 focus:outline-none text-sm",placeholder:" ",required:!0}),g.jsx("input",{type:"password",value:h,onChange:p=>f(p.target.value),className:"w-full px-4 py-2 rounded-lg border-2 border-navy-200 focus:border-navy-600 focus:outline-none text-sm",placeholder:" ",required:!0}),g.jsx("input",{type:"password",value:d,onChange:p=>v(p.target.value),className:"w-full px-4 py-2 rounded-lg border-2 border-navy-200 focus:border-navy-600 focus:outline-none text-sm",placeholder:"  ",required:!0}),g.jsx("p",{className:"text-xs text-navy-500",children:",   8 "}),x&&g.jsx("div",{className:"bg-red-50 text-red-600 px-3 py-2 rounded-lg text-xs",children:x}),g.jsxs("div",{className:"flex gap-2",children:[g.jsx("button",{type:"button",onClick:()=>i("menu"),className:"flex-1 bg-navy-100 text-navy-700 py-2 rounded-lg hover:bg-navy-200 transition-colors text-sm font-semibold",children:""}),g.jsx("button",{type:"submit",disabled:P,className:"flex-1 bg-navy-700 text-white py-2 rounded-lg hover:bg-navy-800 transition-colors text-sm font-semibold disabled:opacity-50",children:P?" ...":""})]})]})]})]}),I&&g.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center p-4 z-50",children:g.jsxs("div",{className:"bg-white rounded-xl p-6 max-w-sm w-full modal-content",children:[g.jsx("h3",{className:"text-lg font-bold text-navy-900 mb-2",children:" "}),g.jsx("p",{className:"text-navy-600 mb-2 text-sm",children:" ?"}),g.jsx("p",{className:"text-red-600 mb-4 text-sm font-semibold",children:"      ."}),g.jsxs("div",{className:"mb-4",children:[g.jsx("label",{className:"block text-sm font-semibold text-navy-700 mb-2",children:" "}),g.jsx("input",{type:"password",value:b,onChange:p=>j(p.target.value),className:"w-full px-4 py-2 rounded-lg border-2 border-navy-200 focus:border-navy-600 focus:outline-none text-sm",placeholder:" "})]}),g.jsxs("div",{className:"flex gap-2",children:[g.jsx("button",{onClick:y,className:"flex-1 bg-red-500 text-white py-2 rounded-lg hover:bg-red-600 transition-colors text-sm font-semibold",children:""}),g.jsx("button",{onClick:()=>{C(!1),j("")},className:"flex-1 bg-navy-100 text-navy-700 py-2 rounded-lg hover:bg-navy-200 transition-colors text-sm font-semibold",children:""})]})]})})]})},WN=({user:t})=>{const[e,n]=X.useState(""),[r,s]=X.useState({users:[],races:[],places:[]}),[i,o]=X.useState([]),[a,u]=X.useState([]),[c,h]=X.useState(!1);X.useEffect(()=>{f(),d()},[]);const f=async()=>{try{const k=$r(Cn(lt,"users"),vl(10));let E=(await ur(k)).docs.filter(I=>I.id!==t.uid).map(I=>({id:I.id,...I.data(),type:"new"}));E.sort((I,C)=>{const b=j=>{var D,S;return j.createdAt?(D=j.createdAt)!=null&&D.toDate?j.createdAt.toDate().getTime():(S=j.createdAt)!=null&&S.seconds?j.createdAt.seconds*1e3:0:0};return b(C)-b(I)}),o(E.slice(0,3))}catch(k){console.error("   :",k),o([])}},d=()=>{const k=localStorage.getItem("recentSearches");k&&u(JSON.parse(k))},v=k=>{const P=[k,...a.filter(E=>E!==k)].slice(0,5);u(P),localStorage.setItem("recentSearches",JSON.stringify(P))},x=async()=>{if(e.trim()){h(!0),v(e);try{const k={users:[],races:[],places:[]};try{const P=$r(Cn(lt,"users"),vl(50)),E=await ur(P),I=e.toLowerCase();k.users=E.docs.filter(C=>C.id!==t.uid).map(C=>({id:C.id,...C.data()})).filter(C=>(C.nickname||"").toLowerCase().includes(I)).slice(0,10)}catch(P){console.error("  :",P)}try{const P=$r(Cn(lt,"runs"),$i("runType","==","race"),vl(50)),E=await ur(P),I=e.toLowerCase(),C=new Map;E.docs.forEach(b=>{const j=b.data();j.raceName&&j.raceName.toLowerCase().includes(I)&&!C.has(j.raceName)&&C.set(j.raceName,{id:b.id,raceName:j.raceName,date:j.date})}),k.races=Array.from(C.values()).slice(0,10)}catch(P){console.error("  :",P)}try{const P=$r(Cn(lt,"runs"),$i("isOverseas","==",!0),vl(50)),E=await ur(P),I=new Map;E.docs.forEach(C=>{const b=C.data();if(b.country||b.city){const j=`${b.country||""}_${b.city||""}`;I.has(j)||I.set(j,{country:b.country||"",city:b.city||""})}}),k.places=Array.from(I.values()).filter(C=>C.country&&C.country.includes(e)||C.city&&C.city.includes(e)).slice(0,10)}catch(P){console.error("  :",P)}s(k)}catch(k){console.error(" :",k)}finally{h(!1)}}};return g.jsxs("div",{className:"space-y-4",children:[g.jsx("div",{className:"bg-white rounded-xl shadow-sm p-4",children:g.jsxs("div",{className:"relative",children:[g.jsx("input",{type:"text",value:e,onChange:k=>n(k.target.value),onKeyPress:k=>k.key==="Enter"&&x(),placeholder:", ,  ...",className:"w-full pl-10 pr-4 py-3 rounded-lg border-2 border-navy-200 focus:border-navy-600 focus:outline-none"}),g.jsx("svg",{className:"w-5 h-5 absolute left-3 top-1/2 -translate-y-1/2 text-navy-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),e&&g.jsx("button",{onClick:()=>{n(""),s({users:[],races:[],places:[]})},className:"absolute right-3 top-1/2 -translate-y-1/2 text-navy-400 hover:text-navy-600",children:g.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),e&&g.jsx("button",{onClick:x,disabled:c,className:"absolute right-10 top-1/2 -translate-y-1/2 text-navy-600 hover:text-navy-800 font-semibold text-sm",children:c?" ...":""})]})}),r.users.length>0||r.races.length>0||r.places.length>0?g.jsxs("div",{className:"space-y-4",children:[r.users.length>0&&g.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-4",children:[g.jsx("h3",{className:"font-bold text-navy-900 mb-3",children:" "}),g.jsx("div",{className:"space-y-2",children:r.users.map(k=>g.jsxs("div",{className:"flex items-center gap-3 p-2 hover:bg-navy-50 rounded-lg cursor-pointer",children:[g.jsx("div",{className:"w-10 h-10 rounded-full bg-navy-200 flex items-center justify-center",children:k.photoURL?g.jsx("img",{src:k.photoURL,alt:k.nickname,className:"w-full h-full rounded-full object-cover"}):g.jsx("span",{className:"text-navy-600 text-sm",children:"?"})}),g.jsx("div",{className:"flex-1",children:g.jsx("p",{className:"font-semibold text-sm text-navy-900",children:k.nickname||" "})}),g.jsx("button",{className:"px-3 py-1.5 bg-navy-700 text-white text-xs font-semibold rounded-lg hover:bg-navy-800",children:""})]},k.id))})]}),r.races.length>0&&g.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-4",children:[g.jsx("h3",{className:"font-bold text-navy-900 mb-3",children:" "}),g.jsx("div",{className:"space-y-2",children:r.races.map(k=>g.jsxs("div",{className:"p-2 hover:bg-navy-50 rounded-lg cursor-pointer",children:[g.jsx("p",{className:"font-semibold text-sm text-navy-900",children:k.raceName}),k.date&&g.jsx("p",{className:"text-xs text-navy-500 mt-1",children:k.date})]},k.id))})]}),r.places.length>0&&g.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-4",children:[g.jsx("h3",{className:"font-bold text-navy-900 mb-3",children:" "}),g.jsx("div",{className:"space-y-2",children:r.places.map((k,P)=>g.jsx("div",{className:"p-2 hover:bg-navy-50 rounded-lg cursor-pointer",children:g.jsxs("p",{className:"font-semibold text-sm text-navy-900",children:[k.country," ",k.city]})},P))})]})]}):e?g.jsx("div",{className:"bg-white rounded-xl shadow-sm p-8 text-center",children:g.jsx("p",{className:"text-navy-500",children:"  "})}):g.jsxs("div",{className:"space-y-4",children:[a.length>0&&g.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-4",children:[g.jsx("h3",{className:"font-bold text-navy-900 mb-3",children:" "}),g.jsx("div",{className:"flex flex-wrap gap-2",children:a.map((k,P)=>g.jsx("button",{onClick:()=>{n(k),x()},className:"px-3 py-1.5 bg-navy-100 text-navy-700 rounded-full text-sm hover:bg-navy-200 transition-colors",children:k},P))})]}),i.length>0&&g.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-4",children:[g.jsx("h3",{className:"font-bold text-navy-900 mb-3",children:" "}),g.jsx("div",{className:"space-y-3",children:i.map(k=>g.jsxs("div",{className:"flex items-center gap-3 p-3 bg-navy-50 rounded-lg",children:[g.jsx("div",{className:"w-12 h-12 rounded-full bg-navy-200 flex items-center justify-center flex-shrink-0",children:k.photoURL?g.jsx("img",{src:k.photoURL,alt:k.nickname,className:"w-full h-full rounded-full object-cover"}):g.jsx("span",{className:"text-navy-600",children:"?"})}),g.jsxs("div",{className:"flex-1 min-w-0",children:[g.jsx("p",{className:"font-semibold text-navy-900 truncate",children:k.nickname||" "}),g.jsx("p",{className:"text-xs text-navy-500",children:" "})]}),g.jsx("button",{className:"px-3 py-1.5 bg-navy-700 text-white text-xs font-semibold rounded-lg hover:bg-navy-800 transition-colors flex-shrink-0",children:""})]},k.id))})]})]})]})};function qN(){const[t,e]=X.useState(null),[n,r]=X.useState(null),[s,i]=X.useState(!0),[o,a]=X.useState("home"),[u,c]=X.useState(!1),[h,f]=X.useState(null);X.useEffect(()=>{const v=QA(kn,async x=>{if(e(x),x)try{const k=await ub(Er(lt,"users",x.uid));k.exists()&&r(k.data())}catch(k){console.error("   :",k)}i(!1)});return()=>v()},[]);const d=async()=>{try{await YA(kn)}catch(v){console.error(" :",v)}};return s?g.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-navy-800 via-navy-700 to-navy-600",children:g.jsx("div",{className:"text-white text-xl font-semibold",children:"Loading..."})}):t?g.jsxs("div",{className:"min-h-screen bg-navy-50",children:[g.jsx("header",{className:"bg-white shadow-sm sticky top-0 z-40",children:g.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-4 py-3 sm:py-4 flex items-center justify-between",children:[g.jsx("h1",{className:"text-xl sm:text-2xl font-bold text-navy-900",children:"RunLog"}),g.jsx("div",{className:"flex items-center gap-2 sm:gap-3",children:g.jsx("button",{onClick:()=>document.getElementById("settings-trigger").click(),className:"text-navy-700 hover:text-navy-900 transition-colors p-1",children:g.jsx("svg",{className:"w-6 h-6 sm:w-6 sm:h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})})})]})}),g.jsxs("main",{className:"max-w-4xl mx-auto px-3 sm:px-4 py-4 sm:py-6 pb-24",children:[o==="home"&&g.jsx(e0,{user:t,userData:n,showOwnOnly:!1,onShowSettings:()=>c(!0),onEditRun:f}),o==="search"&&g.jsx(WN,{user:t}),o==="add"&&g.jsx("div",{className:"text-center py-12",children:g.jsx("p",{className:"text-navy-600 mb-4",children:"   ..."})}),o==="stats"&&g.jsx(FN,{user:t}),o==="profile"&&g.jsx(e0,{user:t,userData:n,showOwnOnly:!0,onShowSettings:()=>c(!0),onEditRun:f})]}),g.jsx($N,{user:t,onRunAdded:()=>window.location.reload(),editingRun:h,onEditComplete:()=>{f(null),window.location.reload()}}),u&&g.jsx(HN,{user:t,userData:n,onClose:()=>c(!1),onSignOut:d}),g.jsx("button",{id:"settings-trigger",onClick:()=>c(!0),className:"hidden"}),g.jsx("button",{id:"add-run-trigger",onClick:()=>{a("add"),window.dispatchEvent(new CustomEvent("openAddRunForm"))},className:"hidden"}),g.jsx("nav",{className:"fixed bottom-0 left-0 right-0 bg-white border-t border-navy-200 z-50",children:g.jsxs("div",{className:"max-w-4xl mx-auto px-2 sm:px-4 py-2 sm:py-3 flex justify-around items-center",children:[g.jsx("button",{onClick:()=>a("home"),className:`flex items-center justify-center transition-colors ${o==="home"?"text-navy-900":"text-navy-400"}`,children:g.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",strokeWidth:o==="home"?"2.5":"1.5",viewBox:"0 0 24 24",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})})}),g.jsx("button",{onClick:()=>a("search"),className:`flex items-center justify-center transition-colors ${o==="search"?"text-navy-900":"text-navy-400"}`,children:g.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",strokeWidth:o==="search"?"2.5":"1.5",viewBox:"0 0 24 24",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})}),g.jsx("button",{onClick:()=>{a("add"),document.getElementById("add-run-trigger").click()},className:`flex items-center justify-center transition-colors ${o==="add"?"text-navy-900":"text-navy-400"}`,children:g.jsx("div",{className:"w-10 h-10 bg-navy-700 text-white rounded-full flex items-center justify-center shadow-lg hover:bg-navy-800 transition-colors",children:g.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",strokeWidth:2.5,viewBox:"0 0 24 24",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4.5v15m7.5-7.5h-15"})})})}),g.jsx("button",{onClick:()=>a("stats"),className:`flex items-center justify-center transition-colors ${o==="stats"?"text-navy-900":"text-navy-400"}`,children:g.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",strokeWidth:o==="stats"?"2.5":"1.5",viewBox:"0 0 24 24",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})})}),g.jsx("button",{onClick:()=>a("profile"),className:`flex items-center justify-center transition-colors ${o==="profile"?"text-navy-900":"text-navy-400"}`,children:g.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",strokeWidth:o==="profile"?"2.5":"1.5",viewBox:"0 0 24 24",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})})})]})})]}):g.jsx(IN,{onAuthSuccess:()=>{}})}const KN=wh.createRoot(document.getElementById("root"));KN.render(g.jsx(ZE.StrictMode,{children:g.jsx(qN,{})}));
